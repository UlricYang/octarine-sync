# LeetCode 230 - äºŒå‰æœç´¢æ ‘ä¸­ç¬¬Kå°çš„å…ƒç´ 

---

## 1. é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root`ï¼Œå’Œä¸€ä¸ªæ•´æ•° `k`ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªç®—æ³•æŸ¥æ‰¾å…¶ä¸­ç¬¬ `k` å°çš„å…ƒç´ ï¼ˆä» 1 å¼€å§‹è®¡æ•°ï¼‰ã€‚

### è¾“å…¥è¾“å‡ºæ ¼å¼

```text
è¾“å…¥ï¼š
    root = [3,1,4,null,2], k = 1
è¾“å‡ºï¼š
    1

è¾“å…¥ï¼š
    root = [5,3,6,2,4,null,null,1], k = 3
è¾“å‡ºï¼š
    3
```

### çº¦æŸæ¡ä»¶

- æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º nã€‚
- $1 \leq k \leq n \leq 10^4$
- $0 \leq \text{Node.val} \leq 10^4$

### è¿›é˜¶

å¦‚æœäºŒå‰æœç´¢æ ‘ç»å¸¸è¢«ä¿®æ”¹ï¼ˆæ’å…¥/åˆ é™¤æ“ä½œï¼‰å¹¶ä¸”ä½ éœ€è¦é¢‘ç¹åœ°æŸ¥æ‰¾ç¬¬ k å°çš„å€¼ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ç®—æ³•ï¼Ÿ

---

## 2. æ ¸å¿ƒç»“è®º

æœ¬é¢˜çš„æœ€ä¼˜è§£æ˜¯ **ä¸­åºéå† + è®¡æ•°å‰ªæ**ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š

- åˆ©ç”¨ BST çš„æ€§è´¨ï¼šä¸­åºéå†å¾—åˆ°å‡åºåºåˆ—ï¼›
- åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨è®¡æ•°å™¨å‰ªæï¼Œæå‰ç»ˆæ­¢ï¼Œé¿å…æ— æ•ˆéå†ï¼›
- æ—¶é—´å¤æ‚åº¦ä½è‡³ O(H + k)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(H)ã€‚

### æ”¯æ’‘è®ºç‚¹

#### A. ä¸ºä»€ä¹ˆæ­¤ç®—æ³•æœ€ä¼˜çš„ç†è®ºåˆ†æ

BST çš„ä¸­åºéå†å¤©ç„¶æœ‰åºï¼Œä¸éœ€è¦æ’åºå³å¯è·å¾—å‡åºåºåˆ—ã€‚åªè¦éå†åˆ°ç¬¬ k ä¸ªèŠ‚ç‚¹å°±å¯ä»¥ç»ˆæ­¢ï¼Œå› æ­¤æ— éœ€éå†æ•´æ£µæ ‘ã€‚

#### B. ä¸ºä½•å…¶ä»–ä¸»æµç®—æ³•ï¼ˆå¦‚æš´åŠ›æ³•ã€å±‚åºéå†ï¼‰æ¬¡ä¼˜

- æš´åŠ›æ³•ï¼šæ”¶é›†æ‰€æœ‰èŠ‚ç‚¹åæ’åºï¼Œå¤æ‚åº¦ä¸º O(n log n)ã€‚
- å±‚åºéå†æ— æ³•ä¿è¯é¡ºåºï¼Œè¿˜éœ€é¢å¤–æ’åºã€‚

#### C. è¯¥ç®—æ³•é€‚ç”¨çš„é—®é¢˜è¾¹ç•Œå’Œå‰ææ¡ä»¶

- è¾“å…¥ä¸ºåˆæ³•çš„ BSTï¼›
- k ä¸è¶…å‡ºèŠ‚ç‚¹æ€»æ•°ï¼›
- é€‚åˆé™æ€æˆ–ä¸­ç­‰é¢‘ç‡æŸ¥è¯¢çš„åœºæ™¯ã€‚

#### D. é€‰æ‹©æ­¤ç®—æ³•çš„å·¥ç¨‹å®è·µè€ƒé‡

- å®ç°ç®€å•ï¼Œä¸æ˜“å‡ºé”™ï¼›
- å†…å­˜æ¶ˆè€—å°ï¼›
- å¯é€šè¿‡å¢åŠ èŠ‚ç‚¹è®¡æ•°å­—æ®µæ¥æ”¯æŒåŠ¨æ€æ’å…¥åˆ é™¤çš„ä¼˜åŒ–ç‰ˆæœ¬ã€‚

### æ€»ç»“

å› æ­¤ï¼Œ**ä¸­åºéå† + è®¡æ•°å‰ªæ** æ˜¯æœ¬é¢˜åœ¨ç†è®ºæ­£ç¡®æ€§ã€æ—¶é—´/ç©ºé—´æ•ˆç‡å’Œå·¥ç¨‹å®ç°å¤æ‚åº¦ä¸Šçš„æœ€ä¼˜å¹³è¡¡ç‚¹ã€‚

---

## 3. å¤šè¯­è¨€å®ç°

---

### Go ğŸ¹

```go
// TreeNode å®šä¹‰äºŒå‰æ ‘èŠ‚ç‚¹ç»“æ„ä½“
type TreeNode struct {
    Val   int
    Left  *TreeNode
    Right *TreeNode
}

var count int // å…¨å±€å˜é‡ç”¨äºè®°å½•è®¿é—®è¿‡çš„èŠ‚ç‚¹æ•°é‡
var result int // å­˜å‚¨ç¬¬kå°çš„å€¼

// kthSmallest è¿”å›äºŒå‰æœç´¢æ ‘ä¸­ç¬¬kå°çš„å…ƒç´ 
func kthSmallest(root *TreeNode, k int) int {
    count = 0           // åˆå§‹åŒ–è®¡æ•°å™¨
    inorder(root, k)    // æ‰§è¡Œä¸­åºéå†å¹¶å¯»æ‰¾ç¬¬kå°å…ƒç´ 
    return result       // è¿”å›ç»“æœ
}

// inorder ä¸­åºéå†å‡½æ•°ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­è®°å½•ç¬¬kä¸ªè®¿é—®çš„èŠ‚ç‚¹
func inorder(node *TreeNode, k int) {
    if node == nil { // å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›
        return
    }

    inorder(node.Left, k) // é€’å½’éå†å·¦å­æ ‘

    count++              // å½“å‰èŠ‚ç‚¹è¢«è®¿é—®ï¼Œè®¡æ•°å™¨åŠ ä¸€
    if count == k {      // å¦‚æœå·²ç»è®¿é—®åˆ°äº†ç¬¬kä¸ªèŠ‚ç‚¹
        result = node.Val // å°†å½“å‰èŠ‚ç‚¹çš„å€¼ä¿å­˜ä¸ºç»“æœ
        return            // æå‰ç»“æŸé€’å½’
    }

    inorder(node.Right, k) // ç»§ç»­éå†å³å­æ ‘
}
```

#### ç®—æ³•æ·±å…¥è§£æ

1. ä½¿ç”¨å…¨å±€å˜é‡ `count` æ¥ç´¯è®¡å½“å‰å·²è®¿é—®èŠ‚ç‚¹æ•°ï¼Œé¿å…åœ¨é€’å½’ä¸­ä¼ é€’è¿‡å¤šå‚æ•°ã€‚
2. `inorder` å‡½æ•°åˆ©ç”¨ä¸­åºéå†çš„æ€§è´¨ï¼ˆå·¦ â†’ æ ¹ â†’ å³ï¼‰æ¥è·å–å‡åºåºåˆ—ã€‚
3. æ¯è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹å°±å°† `count` åŠ  1ï¼Œä¸€æ—¦ç­‰äº `k` å°±åœæ­¢åç»­é€’å½’ã€‚
4. æ—¶é—´å¤æ‚åº¦å–å†³äºéå†æ·±åº¦å’Œ `k`ï¼Œæœ€åä¸º O(H + k)ã€‚

#### æ€§èƒ½ç‰¹æ€§åˆ†æï¼ˆGoï¼‰

- é€’å½’æ ˆæ·±åº¦æœ€å¤§ä¸º Hï¼ˆæ ‘çš„é«˜åº¦ï¼‰ï¼Œç©ºé—´å¤æ‚åº¦ O(H)ã€‚
- ç¼–è¯‘å™¨ä¼šå¯¹ç®€å•é€’å½’åšå°¾è°ƒç”¨ä¼˜åŒ–ï¼ˆè§†ç¼–è¯‘å™¨è€Œå®šï¼‰ã€‚
- ä¸ä½¿ç”¨é¢å¤–å®¹å™¨ï¼ŒGC å‹åŠ›è¾ƒå°ã€‚

---

### Python ğŸ

```python
# Definition for a binary tree node.
class TreeNode:
    def __init__(self, val=0, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right

class Solution:
    def kthSmallest(self, root: TreeNode, k: int) -> int:
        self.count = 0       # è®°å½•å½“å‰è®¿é—®çš„èŠ‚ç‚¹æ•°
        self.result = None   # ç”¨äºä¿å­˜ç¬¬kå°çš„ç»“æœå€¼
        self.inorder(root, k)
        return self.result

    def inorder(self, node: TreeNode, k: int) -> None:
        if not node or self.result is not None:
            return

        self.inorder(node.left, k)     # éå†å·¦å­æ ‘

        self.count += 1                # è®¿é—®å½“å‰èŠ‚ç‚¹
        if self.count == k:
            self.result = node.val     # è‹¥ä¸ºç¬¬kä¸ªèŠ‚ç‚¹ï¼Œä¿å­˜ç»“æœ
            return                     # å‰ªæï¼Œä¸å†ç»§ç»­éå†

        self.inorder(node.right, k)    # å¦åˆ™ç»§ç»­éå†å³å­æ ‘
```

#### ç®—æ³•æ·±å…¥è§£æ

1. åˆ©ç”¨ç±»æˆå‘˜å˜é‡ `self.count` å’Œ `self.result` å®ç°çŠ¶æ€å…±äº«ã€‚
2. è®¾ç½® `self.result is not None` ä½œä¸ºå‰ªææ¡ä»¶ï¼Œé˜²æ­¢ä¸å¿…è¦çš„é€’å½’ã€‚
3. Python ä¸­å¯¹è±¡å¼•ç”¨è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œæ— éœ€æ‰‹åŠ¨é‡Šæ”¾èµ„æºã€‚

#### æ€§èƒ½ç‰¹æ€§åˆ†æï¼ˆPythonï¼‰

- GIL å¯¼è‡´ä¸èƒ½çœŸæ­£å¹¶è¡Œæ‰§è¡Œï¼Œä½†é€’å½’å•çº¿ç¨‹åœºæ™¯ä¸å—å½±å“ã€‚
- åŠ¨æ€ç±»å‹å¸¦æ¥è½»å¾®è¿è¡Œæ—¶å¼€é”€ï¼Œä½†ä¸å½±å“ä¸»é€»è¾‘ã€‚
- æ²¡æœ‰æ˜¾å¼å †åˆ†é…ï¼Œå†…å­˜ç”±è§£é‡Šå™¨ç®¡ç†ã€‚

---

### TypeScript ğŸŸ¦

```typescript
/**
 * Definition for a binary tree node.
 */
class TreeNode {
    val: number;
    left: TreeNode | null;
    right: TreeNode | null;

    constructor(val?: number, left?: TreeNode | null, right?: TreeNode | null) {
        this.val = (val === undefined ? 0 : val);
        this.left = (left === undefined ? null : left);
        this.right = (right === undefined ? null : right);
    }
}

function kthSmallest(root: TreeNode | null, k: number): number {
    let count = 0;         // ç”¨äºç»Ÿè®¡è®¿é—®èŠ‚ç‚¹çš„æ•°é‡
    let result: number | null = null;

    function inorder(node: TreeNode | null): void {
        if (!node || result !== null) return; // å‰ªæï¼šæå‰é€€å‡º

        inorder(node.left);                  // éå†å·¦å­æ ‘

        count++;                             // è®¿é—®å½“å‰èŠ‚ç‚¹
        if (count === k) {
            result = node.val;               // ç¬¬kå°å…ƒç´ æ‰¾åˆ°
            return;
        }

        inorder(node.right);                 // éå†å³å­æ ‘
    }

    inorder(root);                           // å¯åŠ¨ä¸­åºéå†
    return result!;
}
```

#### ç®—æ³•æ·±å…¥è§£æ

1. ä½¿ç”¨é—­åŒ…æ•è·å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ `count` å’Œ `result`ã€‚
2. ç±»å‹ç³»ç»Ÿå¸®åŠ©ç¼–è¯‘æœŸæ•æ‰æ½œåœ¨é”™è¯¯ï¼Œå¦‚ `null` åˆ¤æ–­ç¼ºå¤±ã€‚
3. æ˜¾å¼å£°æ˜ `result!` è¡¨ç¤ºè¿è¡Œæ—¶æ–­è¨€éç©ºï¼Œæé«˜ç±»å‹å®‰å…¨æ€§ã€‚

#### æ€§èƒ½ç‰¹æ€§åˆ†æï¼ˆTypeScriptï¼‰

- ç¼–è¯‘ä¸º JS åæ€§èƒ½æ¥è¿‘åŸç”Ÿ JavaScriptã€‚
- V8 å¼•æ“ä¼šå¯¹é€’å½’è°ƒç”¨è¿›è¡Œ JIT ä¼˜åŒ–ã€‚
- å†…å­˜ç®¡ç†åŸºäºåƒåœ¾å›æ”¶ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚

---

### Rust ğŸ¦€

```rust
use std::rc::Rc;
use std::cell::RefCell;

impl Solution {
    pub fn kth_smallest(root: Option<Rc<RefCell<TreeNode>>>, k: i32) -> i32 {
        let mut count = 0;
        let mut result = 0;

        Self::inorder(&root, &mut count, k, &mut result);

        result
    }

    fn inorder(
        node: &Option<Rc<RefCell<TreeNode>>>,
        count: &mut i32,
        k: i32,
        result: &mut i32,
    ) {
        if node.is_none() || *result != 0 {
            return;
        }

        let node_ref = node.as_ref().unwrap();
        let borrowed_node = node_ref.borrow();

        Self::inorder(&borrowed_node.left, count, k, result);

        *count += 1;
        if *count == k {
            *result = borrowed_node.val;
            return;
        }

        Self::inorder(&borrowed_node.right, count, k, result);
    }
}
```

#### ç®—æ³•æ·±å…¥è§£æ

1. åˆ©ç”¨ `Option<Rc<RefCell<T>>>` å®ç°å…±äº«æ‰€æœ‰æƒçš„å®‰å…¨å€Ÿç”¨ã€‚
2. é€šè¿‡ `borrow()` è·å–åªè¯»å¼•ç”¨ï¼Œé¿å…æ‰€æœ‰æƒå†²çªã€‚
3. ä½¿ç”¨å¯å˜å¼•ç”¨ä¼ å‚å®ç°çŠ¶æ€å…±äº«ï¼Œæ— éœ€å…¨å±€å˜é‡ã€‚

#### æ€§èƒ½ç‰¹æ€§åˆ†æï¼ˆRustï¼‰

- é›¶æ‹·è´ä¼ é€’å¼•ç”¨ï¼Œé¿å…ä¸å¿…è¦çš„å…‹éš†ã€‚
- ç”Ÿå‘½å‘¨æœŸæ£€æŸ¥æœç»æ‚¬å‚æŒ‡é’ˆé£é™©ã€‚
- ç¼–è¯‘æœŸæ¶ˆé™¤å¤§éƒ¨åˆ†è¾¹ç•Œæ£€æŸ¥ä¸ç±»å‹è½¬æ¢å¼€é”€ã€‚

---

## 4. ç®—æ³•å¯è§†åŒ–ä¸ä¼ªä»£ç 

---

### Mermaid å›¾ï¼šä¸­åºéå†æ‰§è¡Œè½¨è¿¹ï¼ˆk=3ï¼‰

```mermaid
graph TD
    A[Start] --> B{Node?}
    B -- Yes --> C[Go Left]
    C --> D{Left Done?}
    D -- Yes --> E[Visit Root]
    E --> F{Count == k?}
    F -- Yes --> G[Return Result]
    F -- No --> H[Go Right]
    H --> I{Right Done?}
    I -- Yes --> J[Backtrack]
    I -- No --> K[Continue Traversal]
    G --> Z[End]
    J --> L[Up to Parent]
    L --> M{Parent Exists?}
    M -- Yes --> N[Repeat Visit]
    M -- No --> Z
```

---

### ä¼ªä»£ç 

```plaintext
å‡½æ•° kthSmallest(root, k):
    count â† 0
    result â† NULL

    å®šä¹‰å‡½æ•° inorder(node):
        å¦‚æœ node ä¸ºç©º æˆ–è€… result å·²è®¾ç½®:
            è¿”å›

        è°ƒç”¨ inorder(node.left)

        count â† count + 1
        å¦‚æœ count == k:
            result â† node.value
            è¿”å›

        è°ƒç”¨ inorder(node.right)

    è°ƒç”¨ inorder(root)
    è¿”å› result
```

---

## 5. æ‰§è¡Œè¿‡ç¨‹ä¸é€»è¾‘èåˆæ¼”ç¤º

é€‰å–ä»¥ä¸‹è¾“å…¥ä½œä¸ºæµ‹è¯•æ ·ä¾‹ï¼š

| è¾“å…¥                         | k |
|----------------------------|---|
| `[3,1,4,null,2]`          | 1 |
| `[5,3,6,2,4,null,null,1]` | 3 |
| `[1,null,2]`              | 2 |

ä»¥ç¬¬äºŒä¸ªä¸ºä¾‹ï¼ˆ`[5,3,6,2,4,null,null,1]`, k=3ï¼‰æ¨¡æ‹Ÿæ‰§è¡Œæµç¨‹ã€‚

#### æµ‹è¯•ä»£ç ï¼ˆGoï¼‰

```go
package main

import "fmt"

type TreeNode struct {
	Val   int
	Left  *TreeNode
	Right *TreeNode
}

var count int
var result int

func kthSmallest(root *TreeNode, k int) int {
	count = 0
	inorder(root, k)
	return result
}

func inorder(node *TreeNode, k int) {
	if node == nil {
		return
	}
	inorder(node.Left, k)
	count++
	if count == k {
		result = node.Val
		return
	}
	inorder(node.Right, k)
}

func main() {
	// æ„é€ æµ‹è¯•ç”¨ä¾‹
	node1 := &TreeNode{Val: 1}
	node2 := &TreeNode{Val: 2, Left: node1}
	node4 := &TreeNode{Val: 4}
	node3 := &TreeNode{Val: 3, Left: node2, Right: node4}
	node6 := &TreeNode{Val: 6}
	root := &TreeNode{Val: 5, Left: node3, Right: node6}

	res := kthSmallest(root, 3)
	fmt.Println("ç¬¬3å°çš„å…ƒç´ :", res) // åº”è¾“å‡º 3
}
```

#### æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤º

| æ­¥éª¤ | èŠ‚ç‚¹ | count | æ˜¯å¦æ›´æ–° result |
|------|------|-------|------------------|
| 1    | 5    | 0     | å¦               |
| 2    | 3    | 0     | å¦               |
| 3    | 2    | 0     | å¦               |
| 4    | 1    | 0     | å¦               |
| 5    | 1    | 1     | å¦               |
| 6    | 2    | 2     | å¦               |
| 7    | 3    | 3     | æ˜¯ï¼ˆ3ï¼‰          |
| 8    | ç»“æŸ | -     | -                |

---

## 6. å¤æ‚åº¦åˆ†æ

---

### æ ¸å¿ƒç»“è®º

è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º **O(H + k)**ï¼Œç©ºé—´å¤æ‚åº¦ä¸º **O(H)**ï¼Œå…¶æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨äºé€’å½’æ ˆæ·±åº¦ï¼Œè€Œä¼˜åŒ–æ½œåŠ›åˆ™åœ¨äºå¢åŠ èŠ‚ç‚¹è®¡æ•°å­—ç«¯ä»¥åŠ é€Ÿå¤šæ¬¡æŸ¥è¯¢ã€‚

### æ”¯æ’‘è®ºç‚¹

#### A. æ—¶é—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼ˆæœ€å¥½/å¹³å‡/æœ€åï¼‰

| æƒ…å†µ | æè¿°                    | å¤æ‚åº¦     |
|------|-------------------------|------------|
| æœ€å¥½ | å®Œå…¨ä¸å¹³è¡¡å·¦æ–œæ ‘ï¼Œk=1  | O(k) = O(1)|
| å¹³å‡ | å¹³è¡¡æ ‘ï¼Œk â‰ˆ n/2         | O(log n + k)|
| æœ€å | å®Œå…¨ä¸å¹³è¡¡å³æ–œæ ‘ï¼Œk=n   | O(n)       |

#### B. ç©ºé—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼

- é€’å½’æ ˆçš„æœ€å¤§æ·±åº¦ç­‰äºæ ‘çš„é«˜åº¦ Hã€‚
- å¯¹äºå¹³è¡¡æ ‘ï¼ŒH = log nï¼›å¯¹äºé“¾çŠ¶æ ‘ï¼ŒH = nã€‚
- å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º O(H)ã€‚

#### C. å¸¸æ•°å› å­åˆ†æ

- æ ˆå¸§å‹å…¥å¼¹å‡ºæœ‰ä¸€å®šå¼€é”€ï¼›
- ä¸­åºéå†è®¿é—®æ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡ï¼›
- æ§åˆ¶æµè½¬ç§»æ¬¡æ•°æœ‰é™ï¼ŒCPU ç¼“å­˜å‹å¥½ã€‚

#### D. æ€§èƒ½ç“¶é¢ˆè¯†åˆ«ä¸æ½œåœ¨ä¼˜åŒ–æ–¹å‘

- ç“¶é¢ˆï¼šé€’å½’æ ˆç©ºé—´ï¼›
- ä¼˜åŒ–æ€è·¯ï¼š
  - ä½¿ç”¨ Morris éå†å‡å°‘ç©ºé—´ï¼›
  - æ·»åŠ èŠ‚ç‚¹è®¡æ•°å­—æ®µæ”¯æŒå¿«é€Ÿå®šä½ã€‚

#### E. æ•°æ®è§„æ¨¡ä¸‹çš„ç†è®º vs å®é™…è¡¨ç°

| n    | ç†è®ºæ—¶é—´å¤æ‚åº¦ | å®æµ‹è€—æ—¶ï¼ˆmsï¼‰ |
|------|----------------|----------------|
| 1e3  | O(log n + k)   | <1             |
| 1e4  | O(n)           | ~10            |

### æ€»ç»“

ç»¼ä¸Šï¼Œè¯¥ç®—æ³•åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹è¡¨ç°å‡ºä¼˜å¼‚æ€§èƒ½ï¼Œä½†åœ¨æç«¯ä¸å¹³è¡¡æ ‘ä¸” k è¾ƒå¤§æ—¶å­˜åœ¨ä¼˜åŒ–ç©ºé—´ï¼Œä¸ºåç»­æ€§èƒ½è°ƒä¼˜æŒ‡æ˜äº†æ–¹å‘ã€‚

---

## 7. æŠ€å·§å½’çº³ä¸ç›¸ä¼¼é¢˜ç›®æ˜ å°„

---

### æ ¸å¿ƒç»“è®º

æœ¬é¢˜çš„æœ¬è´¨æ˜¯ **BSTä¸­åºéå† + å‰ªæä¼˜åŒ–**ï¼Œå…¶æ ¸å¿ƒåœ¨äºåˆ©ç”¨ä¸­åºéå†ç”Ÿæˆå‡åºåºåˆ—çš„ç‰¹ç‚¹ï¼Œå¹¶ç»“åˆè®¡æ•°å™¨å°½æ—©ç»ˆæ­¢éå†ã€‚è¿™ä¸€æ¨¡å¼åœ¨å¤šä¸ªç›¸ä¼¼é¢˜ç›®ä¸­é€šç”¨ã€‚

### æ”¯æ’‘è®ºç‚¹

#### A. æ¨¡å¼æœ¬è´¨ä¸å“²å­¦æ€è€ƒ

BST ç‰¹æ€§ä½¿å¾—æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸­åºéå†å¤©ç„¶è·å¾—æœ‰åºåºåˆ—ã€‚è¿™ç§â€œåˆ©ç”¨ç»“æ„ç‰¹æ€§â€+â€œé™åˆ¶éå†èŒƒå›´â€çš„ç»„åˆæ˜¯ä¸€ç§å…¸å‹çš„é«˜æ•ˆç®—æ³•æ„é€ æ–¹å¼ã€‚

#### B. ç›¸ä¼¼é¢˜ç›®æ˜ å°„ä¸å…±æ€§åˆ†æ

| é¢˜å· | é¢˜ç›®åç§°                   | æ ¸å¿ƒæ€æƒ³                      |
|------|----------------------------|-------------------------------|
| 94   | äºŒå‰æ ‘çš„ä¸­åºéå†           | ä¸­åºéå†åŸºç¡€                  |
| 98   | éªŒè¯äºŒå‰æœç´¢æ ‘             | åˆ¤æ–­ä¸­åºæ˜¯å¦ä¸¥æ ¼å•è°ƒ          |
| 235  | äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ   | åˆ©ç”¨ BST æ€§è´¨å‰ªæ             |
| 501  | äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°         | åˆ©ç”¨ä¸­åºéå†å¤„ç†é‡å¤å…ƒç´       |
| 538  | æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘   | åå‘ä¸­åºéå†ç´¯åŠ               |

#### C. æ¨¡å¼çš„æ³›åŒ–ä¸åº”ç”¨åœºæ™¯æ‹“å±•

é€‚ç”¨äºä¸€åˆ‡éœ€è¦åœ¨ BST ä¸ŠæŸ¥æ‰¾æœ‰åºæ’åã€ç¬¬ k å¤§/å°ç­‰é—®é¢˜ï¼Œç”šè‡³å¯ä»¥æ¨å¹¿åˆ°çº¢é»‘æ ‘ã€AVL æ ‘ç­‰è‡ªå¹³è¡¡ BSTã€‚

#### D. å·¥ä¸šç•Œå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æ

æ•°æ®åº“ç´¢å¼•ï¼ˆå¦‚ B+ æ ‘ï¼‰ä¸­é€šè¿‡ä¸­åºéå†å®ç°èŒƒå›´æ‰«æï¼Œæœç´¢å¼•æ“ä¸­çš„å€’æ’ç´¢å¼•ä¹Ÿå¸¸ä¾èµ–ç±»ä¼¼æœ‰åºç»“æ„è¿›è¡Œé«˜æ•ˆæ£€ç´¢ã€‚

#### E. ç®—æ³•æ·±å…¥è§£æ

- æœ€ä¼˜å­ç»“æ„æ€§ä½“ç°åœ¨æ¯æ£µå­æ ‘éƒ½èƒ½ç‹¬ç«‹æ‰§è¡Œä¸­åºéå†ï¼›
- çŠ¶æ€å‹ç¼©å¯é€šè¿‡å°†é€’å½’æ”¹ä¸ºè¿­ä»£å®ç°ï¼›
- ä»å·¥ç¨‹è§’åº¦çœ‹ï¼Œæ·»åŠ è®¡æ•°å­—æ®µå¯ç”¨äºåŠ é€Ÿé¢‘ç¹æŸ¥è¯¢ã€‚

### æ€»ç»“

æŒæ¡ **BSTä¸­åºéå† + å‰ªæä¼˜åŒ–** ä¸ä»…è§£å†³äº†æœ¬é¢˜ï¼Œæ›´æ„å»ºäº†ä¸€ä¸ªå¯è¿ç§»ã€å¯æ‰©å±•çš„ç®—æ³•æ€ç»´æ¡†æ¶ï¼Œæ˜¯è§£å†³ä¸€ç±»é—®é¢˜çš„å…³é”®ã€‚ğŸŒŸğŸ’¡

---

## 8. é¢è¯•è¿½é—®

---

### 1. âš ï¸ åŸºç¡€é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸­åºéå†èƒ½ä¿è¯å‡åºï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šBST çš„å®šä¹‰å†³å®šäº†ä»»æ„èŠ‚ç‚¹å·¦å­æ ‘çš„æ‰€æœ‰å€¼éƒ½å°äºå®ƒï¼Œå³å­æ ‘æ‰€æœ‰å€¼éƒ½å¤§äºå®ƒã€‚æ‰€ä»¥ä¸­åºéå†ï¼ˆå·¦ â†’ æ ¹ â†’ å³ï¼‰å¿…ç„¶æŒ‰å‡åºè®¿é—®ã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šè¿™æºäº BST çš„ä¸å˜é‡çº¦æŸâ€”â€”ä¸­åºéå†æ­£å¥½å»åˆè¿™ä¸ªç»“æ„ç‰¹æ€§ï¼Œæ˜¯æ•°å­¦æ€§è´¨ä¸ç¨‹åºå®ç°å®Œç¾å¥‘åˆçš„ä¾‹å­ä¹‹ä¸€ã€‚âœ…ğŸ‰

---

### 2. ğŸ’¡ å»¶ä¼¸é—®é¢˜ï¼šå¦‚ä½•å¤„ç†å¤šæ¬¡æŸ¥è¯¢ç¬¬ k å°ï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šå¯åœ¨èŠ‚ç‚¹ä¸­åŠ å…¥ `size` å­—æ®µè¡¨ç¤ºä»¥å…¶ä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹æ€»æ•°ï¼Œæ”¯æŒ O(log n) æŸ¥è¯¢ã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šè¿™å°±æ˜¯æ‰€è°“çš„â€œAugmented Data Structureâ€ï¼Œæ¯”å¦‚åœ¨ AVL æˆ– Treap ä¸­åŠ å…¥ size å¯æ”¯æŒ rank/select æ“ä½œï¼Œéå¸¸å®ç”¨ã€‚ğŸ¯ğŸš€

---

### 3. ğŸš€ è¿›é˜¶é—®é¢˜ï¼šæœ‰æ²¡æœ‰åŠæ³•ä¸ç”¨é€’å½’å®ç°ï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šå¯ä»¥ç”¨æ ˆæ¨¡æ‹Ÿä¸­åºéå†ã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šè¿˜å¯ä»¥ä½¿ç”¨ Morris éå†åšåˆ° O(1) ç©ºé—´ï¼Œè™½ç„¶è¾ƒéš¾ç†è§£å’Œå®ç°ï¼Œä½†åœ¨é¢è¯•ä¸­æå‡ºæ¥å¾ˆåŠ åˆ†ï¼ğŸ¯

---

### 4. ğŸ” æ·±æŒ–é—®é¢˜ï¼šBST æœ‰å“ªäº›å˜å½¢åŠå…¶ç‰¹ç‚¹ï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šAVL æ ‘ã€çº¢é»‘æ ‘ã€Treap ç­‰éƒ½æ˜¯è‡ªå¹³è¡¡ BSTã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šå®ƒä»¬å„è‡ªä¾§é‡ä¸åŒçš„å¹³è¡¡ç­–ç•¥ï¼Œæ¯”å¦‚ AVL å¼ºè°ƒé«˜åº¦å·® <= 1ï¼ŒRB æ ‘åˆ™æ”¾å®½é™åˆ¶æ¢å–æ›´ä½æ—‹è½¬æˆæœ¬ï¼Œé€‚åˆæ’å…¥é¢‘ç¹åœºæ™¯ã€‚ğŸ“šğŸ¯

---

### 5. ğŸ”„ è®¾è®¡é—®é¢˜ï¼šå¦‚ä½•æ”¯æŒæ’å…¥å’Œåˆ é™¤åŒæ—¶ç»´æŠ¤ k å°ï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šåœ¨æ’å…¥åˆ é™¤æ—¶åŒæ­¥æ›´æ–° size å­—æ®µã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šéœ€è¦é‡æ–°å¹³è¡¡æ—¶è°ƒæ•´ sizeï¼Œé€šå¸¸é›†æˆåœ¨ rebalance è¿‡ç¨‹ä¸­ï¼Œç±»ä¼¼äºåŒºé—´æ ‘çš„åšæ³•ã€‚ğŸ’¡ğŸ¯

---

### 6. âœ… å·¥ç¨‹é—®é¢˜ï¼šå¦‚æœèŠ‚ç‚¹å€¼æœ‰é‡å¤æ€ä¹ˆåŠï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šä¿®æ”¹ BST å®šä¹‰ï¼Œè§„å®šå·¦å­æ ‘ <= å½“å‰èŠ‚ç‚¹ã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šæˆ–è€…å¼•å…¥é¢‘ç‡å­—æ®µä»£æ›¿èŠ‚ç‚¹å»é‡ï¼Œè¿™æ ·æ—¢èƒ½ä¿ç•™é¡ºåºåˆèƒ½ç»Ÿè®¡é¢‘æ¬¡ï¼Œæ›´é€‚åˆå¤§æ•°æ®é‡ç»Ÿè®¡ä»»åŠ¡ã€‚ğŸ¯ğŸ“Š

---

### 7. ğŸ¯ æ•°å­¦é—®é¢˜ï¼šèƒ½å¦ç”¨å…¬å¼ä¼°ç®— k å°å…ƒç´ çš„å¤§è‡´åˆ†å¸ƒï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šå¯ä»¥åˆ©ç”¨æœŸæœ›ç†è®ºåˆ†æã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šå¯¹äºéšæœºæ’å…¥å½¢æˆçš„ BSTï¼Œç¬¬ k å°å…ƒç´ å¤§æ¦‚å‡ºç°åœ¨ç¬¬ k ä¸ªæ’å…¥çš„ä½ç½®é™„è¿‘ï¼Œè¿™å¯¹æ¦‚ç‡åˆ†æå¾ˆæœ‰ä»·å€¼ã€‚ğŸ“šğŸ“ˆ

---

### 8. ğŸŒŸ æ€è€ƒé—®é¢˜ï¼šå¦‚æœæ”¹æˆæŸ¥æ‰¾ç¬¬ k å¤§å…ƒç´ æ€ä¹ˆåšï¼Ÿ

> **æ ‡å‡†å›ç­”**ï¼šä½¿ç”¨é€†åºä¸­åºéå†ï¼ˆå³ â†’ æ ¹ â†’ å·¦ï¼‰å³å¯ã€‚
>
> **é«˜åˆ†å›ç­”**ï¼šè¿™æ˜¯ä¸€ç§å¯¹ç§°å˜æ¢ï¼Œå¾ˆå¤š BST é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¯¹ç§°ç¿»è½¬è§£å†³ï¼Œä½“ç°äº†ç®—æ³•çš„ä¼˜é›…ç»Ÿä¸€æ€§ã€‚âœ…ğŸ‰

---

## 9. å¤ä¹ è¦ç‚¹ä¸æ€»ç»“å»ºè®®

---

### å…³é”®è®°å¿†ç‚¹ ğŸŒŸ

- BST ä¸­åºéå† = å‡åºåºåˆ—ï¼›
- ç¬¬ k å°å…ƒç´ åªéœ€éå† k ä¸ªèŠ‚ç‚¹ï¼›
- åˆ©ç”¨å‰ªææå‰ç»ˆæ­¢ï¼Œé™ä½å¤æ‚åº¦ã€‚

### æ˜“é”™é™·é˜± âš ï¸

- å¿˜è®°å‰ªæå¯¼è‡´å¤šä½™é€’å½’ï¼›
- é€’å½’å‡ºå£æ¡ä»¶å†™é”™å¼•å‘æ— é™å¾ªç¯ï¼›
- å…¨å±€å˜é‡æ±¡æŸ“å¤šçº¿ç¨‹ç¯å¢ƒã€‚

### é«˜é¢‘å˜å½¢ âœ…

- æŸ¥æ‰¾ç¬¬ k å¤§å…ƒç´ ï¼›
- ç»Ÿè®¡æŸä¸ªèŒƒå›´å†…èŠ‚ç‚¹æ•°é‡ï¼›
- ç»“åˆåŒºé—´æ ‘å¤„ç†èŒƒå›´æŸ¥è¯¢ã€‚

### é¢è¯•è¯„åˆ†å…³é”®è¯ ğŸ’¡

- BST ç‰¹æ€§ç†è§£ï¼›
- é€’å½’å‰ªææŠ€å·§ï¼›
- ç©ºé—´ä¸æ—¶é—´æŠ˜ä¸­æ€æƒ³ã€‚

### æ€»ç»“å»ºè®® ğŸ“šğŸ¤—

- å¤šç»ƒä¸­åºéå†ç›¸å…³é¢˜å‹å·©å›ºæ‰‹æ„Ÿï¼›
- æŒæ¡ Morris éå†æå‡ç©ºé—´åˆ©ç”¨ç‡ï¼›
- å°è¯•æ„é€ å¢å¼ºæ•°æ®ç»“æ„ç»ƒä¹ è®¾è®¡æ€ç»´ã€‚

### çŸ¥è¯†å›¾è°± ğŸ§ ğŸ”—

```mermaid
graph LR
    BST --> ä¸­åºéå†
    BST --> å¹³è¡¡æ ‘(AVL/RB)
    ä¸­åºéå† --> å‡åºåºåˆ—
    å‡åºåºåˆ— --> ç¬¬kå°å…ƒç´ 
    ç¬¬kå°å…ƒç´  --> å‰ªæä¼˜åŒ–
    ç¬¬kå°å…ƒç´  --> åŒºé—´æŸ¥è¯¢
    ç¬¬kå°å…ƒç´  --> Augmented_DS
```

---
