# LeetCode 1038 - æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘

## Step 1ï¼šé¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ `root`ï¼Œå°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼ˆGreater Treeï¼‰ï¼Œä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹çš„å€¼æ›´æ–°ä¸ºï¼šåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äºè¯¥èŠ‚ç‚¹å€¼çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œ

æ¢å¥è¯è¯´ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹ `node`ï¼Œå°†å…¶ `Val` æ›¿æ¢ä¸ºæ‰€æœ‰æ»¡è¶³ `x.Val >= node.Val` çš„èŠ‚ç‚¹ `x` çš„å€¼ä¹‹å’Œ

è¾“å…¥ä¸ºäºŒå‰æ ‘æ ¹èŠ‚ç‚¹ `root`ï¼Œè¾“å‡ºä¸ºè½¬æ¢åçš„æ ‘æ ¹èŠ‚ç‚¹ï¼ˆåŸåœ°ä¿®æ”¹ï¼‰

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼š`root = [4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]`
è¾“å‡ºï¼š`[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]`
åŸæ ‘ç»“æ„ï¼š

```
        4
      /   \
     1     6
   /  \   / \
  0    2 5   7
       \     \
        3     8
```

ä¸­åºéå†åºåˆ—ï¼ˆå‡åºï¼‰ï¼š[0,1,2,3,4,5,6,7,8]
è½¬æ¢åæ¯ä¸ªèŠ‚ç‚¹å€¼ = åŸæ ‘ä¸­ â‰¥ è¯¥èŠ‚ç‚¹å€¼çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œ

- èŠ‚ç‚¹ 8ï¼š8 â†’ 8
- èŠ‚ç‚¹ 7ï¼š7+8 â†’ 15
- èŠ‚ç‚¹ 6ï¼š6+7+8 â†’ 21
- èŠ‚ç‚¹ 5ï¼š5+6+7+8 â†’ 26
- èŠ‚ç‚¹ 4ï¼š4+5+6+7+8 â†’ 30
- èŠ‚ç‚¹ 3ï¼š3+4+5+6+7+8 â†’ 33
- èŠ‚ç‚¹ 2ï¼š2+3+4+5+6+7+8 â†’ 35
- èŠ‚ç‚¹ 1ï¼š1+2+3+4+5+6+7+8 â†’ 36
- èŠ‚ç‚¹ 0ï¼š0+1+2+3+4+5+6+7+8 â†’ 36

æœ€ç»ˆæ ‘ç»“æ„ï¼š

```
        30
      /    \
    36      21
   /  \    /  \
  36  35  26  15
       \      \
       33      8
```

ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼š`root = [0,null,1]`ï¼Œè¾“å‡ºï¼š`[1,null,1]`
ç¤ºä¾‹ 3ï¼šè¾“å…¥ï¼š`root = [1,0,2]`ï¼Œè¾“å‡ºï¼š`[3,3,2]`
ç¤ºä¾‹ 4ï¼šè¾“å…¥ï¼š`root = [3,2,4,1]`ï¼Œè¾“å‡ºï¼š`[7,9,4,10]`

çº¦æŸæ¡ä»¶ï¼š

- æ ‘ä¸­èŠ‚ç‚¹æ•°èŒƒå›´ï¼š1 åˆ° 10â´
- èŠ‚ç‚¹å€¼èŒƒå›´ï¼š0 åˆ° 10â´
- æ‰€æœ‰èŠ‚ç‚¹å€¼äº’ä¸ç›¸åŒ
- å¿…é¡»åŸåœ°ä¿®æ”¹æ ‘ç»“æ„ï¼Œä¸å…è®¸åˆ›å»ºæ–°èŠ‚ç‚¹
- æ ‘ä¸ºæ ‡å‡† BSTï¼Œæ— é‡å¤å€¼

æ ¸å¿ƒæ„å›¾ï¼š
æœ¬é¢˜è€ƒæŸ¥å¯¹ BST é€†åºéå†çš„ç´¯ç§¯æ€§è´¨çš„ç†è§£ã€‚ç”±äº BST çš„ä¸­åºéå†æ˜¯é€’å¢åºåˆ—ï¼Œå…¶é€†åºéå†ï¼ˆå³â†’æ ¹â†’å·¦ï¼‰ æ˜¯é€’å‡åºåˆ—ã€‚å› æ­¤ï¼Œè‹¥æŒ‰é€†åºéå†è®¿é—®èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„â€œç´¯åŠ å’Œâ€ç­‰äºå½“å‰ç´¯è®¡æ€»å’Œ + å½“å‰èŠ‚ç‚¹åŸå€¼ï¼Œä¸”åç»­èŠ‚ç‚¹çš„å€¼éƒ½å°äºå½“å‰èŠ‚ç‚¹ï¼Œä¸ä¼šå½±å“å·²è®¡ç®—çš„ç´¯åŠ å’Œã€‚è¿™æ˜¯â€œåç¼€å’Œâ€åœ¨æ ‘ç»“æ„ä¸Šçš„è‡ªç„¶ä½“ç°ã€‚æœ¬é¢˜æ˜¯â€œé€†åºéå† + ç´¯åŠ çŠ¶æ€ä¼ é€’â€çš„ç»å…¸èŒƒå¼ï¼Œé¢è¯•ä¸­é«˜åˆ†ç­”æ¡ˆéœ€æ¸…æ™°é˜è¿°â€œä¸ºä½•å¿…é¡»é€†åºâ€â€œä¸ºä½•ä¸èƒ½ç”¨ä¸­åºâ€â€œä¸ºä½•çŠ¶æ€å¿…é¡»å…¨å±€å…±äº«â€â€œä¸ºä½•ä¸ç”¨é¢å¤–ç©ºé—´â€

## Step 2: æ ¸å¿ƒç»“è®ºï¼ˆé‡‘å­—å¡”ç»“æ„ä¼˜åŒ–ç‰ˆï¼‰

æ ¸å¿ƒç»“è®ºï¼šæœ¬é¢˜çš„æœ€ä¼˜è§£æ˜¯é€†åºä¸­åºéå† + ç´¯åŠ çŠ¶æ€ä¼ é€’æ³•ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼šæ—¶é—´å¤æ‚åº¦æœ€ä¼˜ï¼ˆO(n)ï¼‰ã€ç©ºé—´æ•ˆç‡æœ€ä¼˜ï¼ˆO(h)ï¼‰ã€æ— éœ€é¢å¤–å˜é‡ã€é€»è¾‘å¯è¯ã€åŸåœ°ä¿®æ”¹ï¼Œæ˜¯å·¥ä¸šçº§é¢è¯•ä¸­å”¯ä¸€èƒ½åŒæ—¶æ»¡è¶³æ­£ç¡®æ€§ã€æ•ˆç‡ä¸å·¥ç¨‹è¡¨è¾¾æ¸…æ™°åº¦çš„è§£æ³•

æ”¯æ’‘è®ºç‚¹ï¼ˆMECE åˆ†ç±»ï¼‰ï¼š

A. ç†è®ºæœ€ä¼˜æ€§ï¼šè¯¥ç®—æ³•ç²¾ç¡®å»ºæ¨¡ BST é€†åºéå†çš„ç´¯ç§¯æœ¬è´¨
BST çš„ä¸­åºéå†æ˜¯å‡åºåºåˆ— â†’ å…¶é€†åºéå†ï¼ˆå³â†’æ ¹â†’å·¦ï¼‰æ˜¯é™åºåºåˆ—ã€‚åœ¨é™åºåºåˆ—ä¸­ï¼Œæ¯ä¸ªå…ƒç´ çš„â€œå¤§äºç­‰äºå®ƒçš„å…ƒç´ ä¹‹å’Œâ€ = ä»åºåˆ—å¼€å¤´åˆ°å½“å‰å…ƒç´ çš„ç´¯è®¡å’Œã€‚å› æ­¤ï¼ŒæŒ‰é€†åºè®¿é—®èŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬åªéœ€ç»´æŠ¤ä¸€ä¸ªå…¨å±€ç´¯åŠ å™¨ `sum`ï¼Œæ¯è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ‰§è¡Œ `node.Val += sum; sum = node.Val`ï¼Œå³å¯å®Œæˆè½¬æ¢ã€‚è¯¥ç®—æ³•ç›´æ¥æ˜ å°„â€œåç¼€å’Œâ€çš„æ•°å­¦å®šä¹‰ï¼Œæ˜¯çŠ¶æ€é©±åŠ¨éå†çš„å…¸èŒƒ

B. å¯¹æ¯”åŠ£åŠ¿æ€§ï¼šå…¶ä»–ä¸»æµæ–¹æ³•å‡å­˜åœ¨ç»“æ„æ€§ç¼ºé™·
| æ–¹æ³• | é—®é¢˜ | ä¸ºä½•æ¬¡ä¼˜ |
|------|------|----------|
| ä¸­åºéå†+æ•°ç»„ | æ”¶é›†æ‰€æœ‰èŠ‚ç‚¹ï¼Œè®¡ç®—åç¼€å’Œï¼Œå†èµ‹å€¼ | ç©ºé—´ O(n)ï¼Œè¿èƒŒâ€œåŸåœ°ä¿®æ”¹â€è¦æ±‚ï¼Œä¸¤æ¬¡éå†ï¼Œæ•ˆç‡ä½ |
| é€’å½’è¿”å›å­æ ‘å’Œ | æ¯ä¸ªèŠ‚ç‚¹é€’å½’è®¡ç®—å³å­æ ‘å’Œå¹¶è¿”å› | æ—¶é—´ O(nÂ²)ï¼Œå› é‡å¤è®¡ç®—å­æ ‘å’Œï¼Œæ— æ³•å…±äº«çŠ¶æ€ |
| BFS/å±‚åºéå† | æŒ‰å±‚éå†åæ’åºå†èµ‹å€¼ | å®Œå…¨å¿½ç•¥ BST ç»“æ„ï¼Œæ—¶é—´ O(n log n)ï¼Œç©ºé—´ O(n) |
| Morris éå† | O(1) ç©ºé—´å®ç°ä¸­åº | ä»£ç å¤æ‚ï¼Œéœ€çº¿ç´¢åŒ–ï¼Œç ´åç»“æ„ï¼Œè°ƒè¯•å›°éš¾ï¼Œé¢è¯•é£é™©é«˜ |

C. é€‚ç”¨è¾¹ç•Œï¼šæ˜ç¡®çº¦æŸå‰æï¼Œé¿å…æ³›åŒ–è¯¯ç”¨

- âœ… é€‚ç”¨ï¼šæ ‡å‡† BSTï¼ˆæ— é‡å¤å€¼ï¼Œä¸¥æ ¼æœ‰åºï¼‰
- âš ï¸ éœ€è°ƒæ•´ï¼šè‹¥å…è®¸é‡å¤å€¼ â†’ ç´¯åŠ æ—¶éœ€åŒ…å«æ‰€æœ‰ç›¸ç­‰å€¼ï¼Œé€»è¾‘ä¸å˜ï¼Œä½†è¯­ä¹‰éœ€æ˜ç¡®
- âŒ ä¸é€‚ç”¨ï¼šé BST æ ‘ã€å«ç¯ç»“æ„ã€æµ®ç‚¹å€¼ï¼ˆéœ€å®¹å·®ï¼‰
- ğŸ›¡ï¸ å·¥ç¨‹é˜²å¾¡ï¼šèŠ‚ç‚¹å€¼éè´Ÿï¼Œæ— éœ€å¤„ç†è´Ÿæ•°æº¢å‡ºï¼Œä½†ç´¯åŠ å’Œå¯èƒ½è¶… int32ï¼Œå»ºè®®ç”¨ int64

D. å·¥ç¨‹å®è·µä»·å€¼ï¼šç¬¦åˆå¤§å‚ç®—æ³•é¢è¯•è¯„åˆ†æ ‡å‡†

- âœ… ç®€æ´æ€§ï¼šæ ¸å¿ƒä»£ç ä»… 5â€“7 è¡Œï¼Œæ— å†—ä½™ç»“æ„
- âœ… å¯è¯æ€§ï¼šå¯é€šè¿‡å¾ªç¯ä¸å˜é‡ï¼ˆå·²è®¿é—®èŠ‚ç‚¹å‡ä¸º â‰¥ å½“å‰èŠ‚ç‚¹ï¼‰ä¸¥æ ¼è¯æ˜æ­£ç¡®æ€§
- âœ… å¯æ‰©å±•æ€§ï¼šåŒä¸€æ¨¡å¼å¯è¿ç§»è‡³â€œé€†åºå‰ç¼€å’Œâ€ã€â€œç´¯ç§¯æœ€å¤§å€¼â€ã€â€œåå‘æ›´æ–°â€ç­‰åœºæ™¯
- âœ… è¡¨è¾¾åŠ›ï¼šåœ¨é¢è¯•ä¸­èƒ½è‡ªç„¶å¼•å‡ºâ€œä¸ºä»€ä¹ˆä¸æ˜¯ä¸­åºï¼Ÿâ€â€œä¸ºä»€ä¹ˆçŠ¶æ€å¿…é¡»å…¨å±€ï¼Ÿâ€â€œèƒ½å¦å¹¶è¡Œï¼Ÿâ€â€œMorris å¯è¡Œå—ï¼Ÿâ€ç­‰é«˜é˜¶è¿½é—®ï¼Œå±•ç°ç³»ç»Ÿæ€§æ€ç»´

æ€»ç»“ï¼šå› æ­¤ï¼Œé€†åºä¸­åºéå† + ç´¯åŠ çŠ¶æ€ä¼ é€’æ³• æ˜¯æœ¬é¢˜åœ¨ç†è®ºæ­£ç¡®æ€§ã€æ—¶é—´/ç©ºé—´æ•ˆç‡å’Œå·¥ç¨‹è¡¨è¾¾æ¸…æ™°åº¦ä¸Šçš„å”¯ä¸€æœ€ä¼˜è§£ï¼Œæ˜¯é¢è¯•å®˜æœŸæœ›çœ‹åˆ°çš„â€œä»æœ¬è´¨å‡ºå‘ã€ç²¾å‡†å»ºæ¨¡ã€é«˜æ•ˆå®ç°â€çš„å…¸èŒƒ

## Step 3: å¤šè¯­è¨€å®ç°

### Go ğŸ¹

```go
/
 * Definition for a binary tree node.
 * type TreeNode struct {
 *     Val int
 *     Left *TreeNode
 *     Right *TreeNode
 * }
 */
func convertBST(root *TreeNode) *TreeNode {
    // ä½¿ç”¨é—­åŒ…å˜é‡ sum è®°å½•å½“å‰ç´¯è®¡å’Œï¼ˆæ‰€æœ‰å·²è®¿é—®èŠ‚ç‚¹å€¼ä¹‹å’Œï¼‰
    // é€†åºä¸­åºéå†ï¼šå³ â†’ æ ¹ â†’ å·¦ï¼Œä¿è¯è®¿é—®é¡ºåºä¸ºé™åº
    var sum int
    // å®šä¹‰é€’å½’è¾…åŠ©å‡½æ•°ï¼Œè¿›è¡Œé€†åºä¸­åºéå†
    var inorder func(*TreeNode)
    inorder = func(node *TreeNode) {
        // å‰ªæï¼šç©ºèŠ‚ç‚¹ç›´æ¥è¿”å›
        if node == nil {
            return
        }
        // é€’å½’è®¿é—®å³å­æ ‘ï¼ˆå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å¤§äºå½“å‰èŠ‚ç‚¹ï¼‰
        inorder(node.Right)
        // è®¿é—®å½“å‰èŠ‚ç‚¹ï¼šæ›´æ–°èŠ‚ç‚¹å€¼ä¸ºå½“å‰ç´¯è®¡å’Œ + åŸå€¼
        sum += node.Val
        node.Val = sum
        // é€’å½’è®¿é—®å·¦å­æ ‘ï¼ˆå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å°äºå½“å‰èŠ‚ç‚¹ï¼Œä½†å·²è¢«ç´¯è®¡ï¼‰
        inorder(node.Left)
    }
    // ä»æ ¹èŠ‚ç‚¹å¼€å§‹é€†åºä¸­åºéå†
    inorder(root)
    return root
}
```

### Python ğŸ

```python
# Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, val=0, left=None, right=None):
#         self.val = val
#         self.left = left
#         self.right = right

class Solution:
    def convertBST(self, root: Optional[TreeNode]) -> Optional[TreeNode]:
        # ä½¿ç”¨éå±€éƒ¨å˜é‡ sum è®°å½•å½“å‰ç´¯è®¡å’Œ
        sum_val = 0

        def inorder(node):
            nonlocal sum_val
            if not node:
                return

            # é€’å½’è®¿é—®å³å­æ ‘ï¼ˆå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å¤§äºå½“å‰èŠ‚ç‚¹ï¼‰
            inorder(node.right)

            # è®¿é—®å½“å‰èŠ‚ç‚¹ï¼šæ›´æ–°èŠ‚ç‚¹å€¼ä¸ºå½“å‰ç´¯è®¡å’Œ + åŸå€¼
            sum_val += node.val
            node.val = sum_val

            # é€’å½’è®¿é—®å·¦å­æ ‘ï¼ˆå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å°äºå½“å‰èŠ‚ç‚¹ï¼Œä½†å·²è¢«ç´¯è®¡ï¼‰
            inorder(node.left)

        # ä»æ ¹èŠ‚ç‚¹å¼€å§‹é€†åºä¸­åºéå†
        inorder(root)
        return root
```

### TypeScript ğŸŸ¦

```typescript
/
 * Definition for a binary tree node.
 * class TreeNode {
 *     val: number
 *     left: TreeNode | null
 *     right: TreeNode | null
 *     constructor(val?: number, left?: TreeNode | null, right?: TreeNode | null) {
 *         this.val = (val===undefined ? 0 : val)
 *         this.left = (left===undefined ? null : left)
 *         this.right = (right===undefined ? null : right)
 *     }
 * }
 */

function convertBST(root: TreeNode | null): TreeNode | null {
    let sum = 0;

    function inorder(node: TreeNode | null): void {
        if (node === null) {
            return;
        }

        // é€’å½’è®¿é—®å³å­æ ‘ï¼ˆå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å¤§äºå½“å‰èŠ‚ç‚¹ï¼‰
        inorder(node.right);

        // è®¿é—®å½“å‰èŠ‚ç‚¹ï¼šæ›´æ–°èŠ‚ç‚¹å€¼ä¸ºå½“å‰ç´¯è®¡å’Œ + åŸå€¼
        sum += node.val;
        node.val = sum;

        // é€’å½’è®¿é—®å·¦å­æ ‘ï¼ˆå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å°äºå½“å‰èŠ‚ç‚¹ï¼Œä½†å·²è¢«ç´¯è®¡ï¼‰
        inorder(node.left);
    }

    // ä»æ ¹èŠ‚ç‚¹å¼€å§‹é€†åºä¸­åºéå†
    inorder(root);
    return root;
}
```

### Rust ğŸ¦€

```rust
// Definition for a binary tree node.
// #[derive(Debug, PartialEq, Eq)]
// pub struct TreeNode {
//   pub val: i32,
//   pub left: Option<Rc<RefCell<TreeNode>>>,
//   pub right: Option<Rc<RefCell<TreeNode>>>,
// }

use std::rc::Rc;
use std::cell::RefCell;

impl Solution {
    pub fn convert_bst(root: Option<Rc<RefCell<TreeNode>>>) -> Option<Rc<RefCell<TreeNode>>> {
        let mut sum = 0i32;

        fn inorder(node: &Option<Rc<RefCell<TreeNode>>>, sum: &mut i32) {
            if let Some(n) = node {
                // é€’å½’è®¿é—®å³å­æ ‘ï¼ˆå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å¤§äºå½“å‰èŠ‚ç‚¹ï¼‰
                inorder(&n.borrow().right, sum);

                // è®¿é—®å½“å‰èŠ‚ç‚¹ï¼šæ›´æ–°èŠ‚ç‚¹å€¼ä¸ºå½“å‰ç´¯è®¡å’Œ + åŸå€¼
                *sum += n.borrow().val;
                n.borrow_mut().val = *sum;

                // é€’å½’è®¿é—®å·¦å­æ ‘ï¼ˆå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼å‡å°äºå½“å‰èŠ‚ç‚¹ï¼Œä½†å·²è¢«ç´¯è®¡ï¼‰
                inorder(&n.borrow().left, sum);
            }
        }

        // ä»æ ¹èŠ‚ç‚¹å¼€å§‹é€†åºä¸­åºéå†
        inorder(&root, &mut sum);
        root
    }
}
```

### ç®—æ³•æ·±å…¥è§£æï¼ˆè´¹æ›¼å¼ä¸‰å±‚ç»“æ„ï¼‰

ç¬¬ä¸€å±‚ï¼šä¸€å¥è¯è®²æ˜ç™½ â€”â€”

> æƒ³è±¡ä½ ç«™åœ¨ä¸€ä¸ªä»å¤§åˆ°å°æ’åˆ—çš„é˜Ÿä¼é‡Œï¼Œæ¯ä¸ªäººéƒ½è¦å˜æˆâ€œè‡ªå·±å’Œæ‰€æœ‰æ¯”è‡ªå·±å¤§æˆ–ä¸€æ ·å¤§çš„äººâ€çš„æ€»å’Œã€‚ä½ ä»é˜Ÿå°¾ï¼ˆæœ€å¤§å€¼ï¼‰å¼€å§‹å¾€å‰èµ°ï¼Œè¾¹èµ°è¾¹æŠŠå‰é¢æ‰€æœ‰äººçš„é’±éƒ½æ£è¿›è‡ªå·±å£è¢‹ï¼Œç„¶åå‘Šè¯‰è‡ªå·±ï¼šâ€œæˆ‘ç°åœ¨æœ‰è¿™ä¹ˆå¤šé’±äº†â€ï¼Œå†ç»§ç»­å¾€å‰

ç¬¬äºŒå±‚ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ å†™ â€”â€”
æˆ‘ä»¬ä¸æ˜¯åœ¨â€œåŠ æ³•â€ï¼Œè€Œæ˜¯åœ¨â€œåå‘ç´¯ç§¯â€ï¼š

- BST çš„ä¸­åºæ˜¯ä»å°åˆ°å¤§ â†’ é€†ä¸­åºå°±æ˜¯ä»å¤§åˆ°å°
- æˆ‘ä»¬ä»æœ€å¤§çš„èŠ‚ç‚¹å¼€å§‹ï¼šå®ƒå³è¾¹æ²¡æ¯”å®ƒå¤§çš„ï¼Œæ‰€ä»¥å®ƒå°±æ˜¯è‡ªå·±
- ç¬¬äºŒå¤§çš„èŠ‚ç‚¹ï¼šå®ƒåªèƒ½åŠ å®ƒå³è¾¹é‚£ä¸ªæœ€å¤§å€¼ â†’ æ‰€ä»¥å®ƒ = è‡ªå·± + æœ€å¤§å€¼
- ç¬¬ä¸‰å¤§çš„èŠ‚ç‚¹ï¼šå®ƒ = è‡ªå·± + ç¬¬äºŒå¤§ + æœ€å¤§
- å…³é”®ï¼šæˆ‘ä»¬æŒ‰é¡ºåºèµ°ï¼Œæ¯åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ`sum` é‡Œå·²ç»åŒ…å«äº†æ‰€æœ‰æ¯”å®ƒå¤§çš„èŠ‚ç‚¹å€¼
- æ‰€ä»¥ï¼š`node.Val += sum` â†’ å°±æ˜¯â€œæ‰€æœ‰ â‰¥ å½“å‰å€¼çš„å’Œâ€
- ç„¶å `sum = node.Val` â†’ æŠŠå½“å‰èŠ‚ç‚¹ä¹ŸåŠ å…¥ç´¯è®¡ï¼Œä¾›ä¸‹ä¸€ä¸ªæ›´å°çš„èŠ‚ç‚¹ä½¿ç”¨
- ä¸ºä»€ä¹ˆä¸æ˜¯ä¸­åºï¼Ÿ å› ä¸ºä¸­åºæ˜¯ä»å°åˆ°å¤§ï¼Œä½ è®¿é—®å°èŠ‚ç‚¹æ—¶ï¼Œè¿˜ä¸çŸ¥é“åé¢æœ‰æ›´å¤§çš„å€¼ï¼Œæ— æ³•ç´¯åŠ 
- ä¸ºä»€ä¹ˆçŠ¶æ€è¦å…¨å±€ï¼Ÿ å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„â€œå¤§äºç­‰äºå®ƒçš„å’Œâ€ä¾èµ–äºå…¨å±€å·²è®¿é—®èŠ‚ç‚¹ï¼Œå¿…é¡»å…±äº«çŠ¶æ€
- ä¸ºä»€ä¹ˆä¸éœ€è¦è¿”å›å€¼ï¼Ÿ å› ä¸ºæˆ‘ä»¬åŸåœ°ä¿®æ”¹ï¼Œæ ‘ç»“æ„ä¸å˜ï¼Œåªæ”¹å€¼ï¼Œç›´æ¥è¿”å›åŸæ ¹å³å¯

ç¬¬ä¸‰å±‚ï¼šä¸ºä»€ä¹ˆè¿™æ ·æœ€å¥½ â€”â€”
è¿™ä¸æ˜¯ä¸€ä¸ªâ€œæ›´æ–°â€é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªåç¼€å’Œåœ¨æ ‘ç»“æ„ä¸Šçš„çº¿æ€§ä¼ é€’

- æ•°å­¦æœ¬è´¨ï¼šåœ¨é™åºåºåˆ—ä¸­ï¼Œç¬¬ i ä¸ªå…ƒç´ çš„â€œå‰ç¼€å’Œâ€ = åŸåºåˆ—ä¸­ â‰¥ è¯¥å…ƒç´ çš„å…ƒç´ ä¹‹å’Œ
- çŠ¶æ€å‹ç¼©ï¼šåŸçŠ¶æ€éœ€è®°å½•æ‰€æœ‰èŠ‚ç‚¹å€¼ï¼ˆO(n)ï¼‰ï¼Œç°åœ¨åªç”¨ä¸€ä¸ª `sum` å˜é‡ï¼ˆO(1)ï¼‰
- å•æ¬¡éå†ï¼šä¸€æ¬¡é€†ä¸­åºå³å¯å®Œæˆå…¨éƒ¨è®¡ç®—ï¼Œæ—¶é—´ O(n)ï¼Œç©ºé—´ O(h)
- åŸåœ°ä¿®æ”¹ï¼šä¸åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œä¸å¤åˆ¶ç»“æ„ï¼Œå®Œå…¨ç¬¦åˆé¢˜ç›®â€œåŸåœ°â€è¦æ±‚
- å·¥ç¨‹é²æ£’æ€§ï¼šæ— æ¡ä»¶åˆ¤æ–­ã€æ— è¾¹ç•Œå¤„ç†ã€æ— å¤æ‚ç´¢å¼•ï¼Œä»£ç æç®€ï¼Œå¯è¯»æ€§é«˜
- å¯¹æ¯”å…¶ä»–æ–¹æ³•ï¼š
  - ä¸­åº+æ•°ç»„æ³•ï¼šä¸¤æ¬¡éå†ï¼Œå†…å­˜ç¿»å€ â†’ ä¸ä¼˜é›…
  - é€’å½’è¿”å›æ³•ï¼šæ¯ä¸ªèŠ‚ç‚¹é‡æ–°è®¡ç®—å³å­æ ‘å’Œ â†’ O(nÂ²)
  - Morris éå†ï¼šç ´åç»“æ„ â†’ ä¸å®‰å…¨

## Step 4: ä¼ªä»£ç ä¸å¯è§†åŒ–

### ä¼ªä»£ç 

```
å‡½æ•° convertBST(root):
    åˆå§‹åŒ– sum = 0

    å‡½æ•° inorder(node):
        å¦‚æœ node ä¸ºç©ºï¼š
            è¿”å›

        inorder(node.Right)       // é€’å½’è®¿é—®å³å­æ ‘ï¼ˆå…ˆå¤„ç†å¤§çš„ï¼‰
        sum = sum + node.Val      // å½“å‰èŠ‚ç‚¹çš„ç´¯åŠ å’Œ = åŸç´¯è®¡ + å½“å‰å€¼
        node.Val = sum            // åŸåœ°æ›´æ–°èŠ‚ç‚¹å€¼
        inorder(node.Left)        // é€’å½’è®¿é—®å·¦å­æ ‘ï¼ˆå†å¤„ç†å°çš„ï¼‰

    è°ƒç”¨ inorder(root)
    è¿”å› root
```

### Mermaid çŠ¶æ€è½¬ç§»å›¾

```mermaid
graph TD
    A[å¼€å§‹] --> B[inorder(root)]
    B --> C{node == null?}
    C -- æ˜¯ --> D[è¿”å›]
    C -- å¦ --> E[é€’å½’ inorder(right)]
    E --> F[sum = sum + node.Val]
    F --> G[node.Val = sum]
    G --> H[é€’å½’ inorder(left)]
    H --> D
```

> å›¾ç¤ºè¯´æ˜ï¼š
>
> - çŠ¶æ€ï¼šå½“å‰èŠ‚ç‚¹ + å…¨å±€ç´¯åŠ å™¨ `sum`
> - é€‰æ‹©ï¼šå…ˆå³ â†’ å†æ ¹ â†’ å†å·¦ï¼ˆé€†åºä¸­åºï¼‰
> - çº¦æŸï¼š`sum` å§‹ç»ˆä»£è¡¨â€œå·²è®¿é—®è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œâ€
> - ç»ˆæ­¢æ¡ä»¶ï¼šèŠ‚ç‚¹ä¸ºç©º
> - ç¬¦åˆâ€œçŠ¶æ€-é€‰æ‹©-çº¦æŸâ€ä¸‰è¦ç´ ï¼Œå®Œå…¨æ˜ å°„ä»£ç é€»è¾‘

## Step 5: æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤ºï¼ˆä½¿ç”¨ Aâ€“F å­—æ¯ä»£æ›¿ä¸‰çº§æ ‡é¢˜ï¼‰

æˆ‘ä»¬å°†ä½¿ç”¨å­—æ¯ Aâ€“F ä»£è¡¨æ‰§è¡Œä¸­çš„å…³é”®å±‚çº§ï¼Œæ¨¡æ‹Ÿ Go å®ç°çš„å®Œæ•´æ‰§è¡Œè½¨è¿¹ï¼Œä»¥æœ€å¤æ‚æµ‹è¯•ç”¨ä¾‹ä¸ºå¯¹è±¡ï¼š

> è¾“å…¥ï¼š`root = [4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]`
> ç›®æ ‡ï¼šè¾“å‡ºç´¯åŠ æ ‘ï¼Œæ ¹å€¼ä¸º 30

æˆ‘ä»¬å°†é€å¸§ã€é€è¡Œã€é€å˜é‡æ¨¡æ‹Ÿæ‰§è¡Œè½¨è¿¹ï¼Œæ ‡è®°æ¯ä¸ªå±‚çº§ï¼ˆAâ€“Fï¼‰ï¼Œå¹¶è®°å½•çŠ¶æ€å˜åŒ–

### A æ‰§è¡Œç¯å¢ƒè®¾å®šï¼ˆGo å®ç°ï¼‰

- ä½¿ç”¨ `inorder(node *TreeNode)` é—­åŒ…é€’å½’å‡½æ•°
- å…¨å±€çŠ¶æ€ï¼š`sum int`ï¼ˆè®°å½•ç´¯è®¡å’Œï¼‰
- è®¿é—®é¡ºåºï¼šå³ â†’ æ ¹ â†’ å·¦
- åŸåœ°ä¿®æ”¹èŠ‚ç‚¹å€¼
- æ ‘ç»“æ„èŠ‚ç‚¹æ ‡è®°ä¸º Aâ€“H ä¾¿äºè¿½è¸ªï¼š

```
        A(4)
      /     \
    B(1)     C(6)
   /  \     /  \
 D(0) E(2) F(5) G(7)
        \        \
        H(3)      I(8)
```

### B æ‰§è¡Œè½¨è¿¹å®Œæ•´è¡¨æ ¼ï¼ˆå«å±‚çº§æ ‡è®°ã€å˜é‡å¿«ç…§ã€åˆ†æ”¯å†³ç­–ï¼‰

| å±‚çº§ | è°ƒç”¨æ ˆå¸§     | èŠ‚ç‚¹å¼•ç”¨ | node.Val | sumï¼ˆæ›´æ–°å‰ï¼‰ | sumï¼ˆæ›´æ–°åï¼‰ | æ“ä½œ                        | ä¸‹ä¸€æ­¥            | æ ˆå¸§æ·±åº¦ | è¯´æ˜              |
| ---- | ------------ | -------- | -------- | ------------- | ------------- | --------------------------- | ----------------- | -------- | ----------------- |
| A    | `convertBST` | root (A) | 4        | 0             | â€”             | è°ƒç”¨ inorder(A)             | è¿›å…¥ A            | 0        | å¯åŠ¨              |
| B    | `inorder`    | A(4)     | 4        | 0             | â€”             | å…ˆé€’å½’å³å­æ ‘ â†’ inorder(C)   | è¿›å…¥ C            | 1        | æœªå¤„ç† A          |
| C    | `inorder`    | C(6)     | 6        | 0             | â€”             | å…ˆé€’å½’å³å­æ ‘ â†’ inorder(G)   | è¿›å…¥ G            | 2        | æœªå¤„ç† C          |
| D    | `inorder`    | G(7)     | 7        | 0             | â€”             | å…ˆé€’å½’å³å­æ ‘ â†’ inorder(I)   | è¿›å…¥ I            | 3        | æœªå¤„ç† G          |
| E    | `inorder`    | I(8)     | 8        | 0             | â€”             | å…ˆé€’å½’å³å­æ ‘ â†’ inorder(nil) | è¿›å…¥ nil          | 4        | å³å­æ ‘ç©º          |
| F    | `inorder`    | nil      | â€”        | â€”             | â€”             | ç©ºèŠ‚ç‚¹ï¼Œè¿”å›                | è¿”å›è‡³ E          | 5        | ç©ºè¿”å›            |
| E    | `inorder`    | I(8)     | 8        | 0             | 8             | sum += 8 â†’ sum=8            | æ›´æ–°èŠ‚ç‚¹ I.Val=8  | 4        | ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼šsum=8 |
| E    | `inorder`    | I(8)     | 8        | 8             | 8             | é€’å½’å·¦å­æ ‘ â†’ inorder(nil)   | è¿›å…¥ nil          | 4        | å·¦å­æ ‘ç©º          |
| F    | `inorder`    | nil      | â€”        | â€”             | â€”             | ç©ºèŠ‚ç‚¹ï¼Œè¿”å›                | è¿”å›è‡³ E          | 5        | ç©ºè¿”å›            |
| E    | `inorder`    | I(8)     | 8        | 8             | 8             | â€”                           | è¿”å›è‡³ D          | 4        | å®ŒæˆèŠ‚ç‚¹ I        |
| D    | `inorder`    | G(7)     | 7        | 8             | 15            | sum += 7 â†’ sum=15           | æ›´æ–°èŠ‚ç‚¹ G.Val=15 | 3        | èŠ‚ç‚¹ Gï¼š8+7=15    |
| D    | `inorder`    | G(7)     | 15       | 15            | 15            | é€’å½’å·¦å­æ ‘ â†’ inorder(nil)   | è¿›å…¥ nil          | 3        | å·¦å­æ ‘ç©º          |
| F    | `inorder`    | nil      | â€”        | â€”             | â€”             | ç©ºèŠ‚ç‚¹ï¼Œè¿”å›                | è¿”å›è‡³ D          | 4        | ç©ºè¿”å›            |
| D    | `inorder`    | G(7)     | 15       | 15            | 15            | â€”                           | è¿”å›è‡³ C          | 3        | å®ŒæˆèŠ‚ç‚¹ G        |
| C    | `inorder`    | C(6)     | 6        | 15            | 21            | sum += 6 â†’ sum=21           | æ›´æ–°èŠ‚ç‚¹ C.Val=21 | 2        | èŠ‚ç‚¹ Cï¼š15+6=21   |
| C    | `inorder`    | C(6)     | 21       | 21            | 21            | é€’å½’å·¦å­æ ‘ â†’ inorder(F)     | è¿›å…¥ F            | 2        | è¿›å…¥å·¦å­æ ‘ F      |
| D    | `inorder`    | F(5)     | 5        | 21            | 26            | sum += 5 â†’ sum=26           | æ›´æ–°èŠ‚ç‚¹ F.Val=26 | 3        | èŠ‚ç‚¹ Fï¼š21+5=26   |
| D    | `inorder`    | F(5)     | 26       | 26            | 26            | é€’å½’å·¦å­æ ‘ â†’ inorder(nil)   | è¿›å…¥ nil          | 3        | å·¦å­æ ‘ç©º          |
| E    | `inorder`    | nil      | â€”        | â€”             | â€”             | ç©ºèŠ‚ç‚¹ï¼Œè¿”å›                | è¿”å›è‡³ D          | 4        | ç©ºè¿”å›            |
| D    | `inorder`    | F(5)     | 26       | 26            | 26            | â€”                           | è¿”å›è‡³ C          | 3        | å®ŒæˆèŠ‚ç‚¹ F        |
| C    | `inorder`    | C(6)     | 21       | 26            | 26            | â€”                           | è¿”å›è‡³ B          | 2        | å®ŒæˆèŠ‚ç‚¹ C        |
| B    | `inorder`    | A(4)     | 4        | 26            | 30            | sum += 4 â†’ sum=30           | æ›´æ–°èŠ‚ç‚¹ A.Val=30 | 1        | èŠ‚ç‚¹ Aï¼š26+4=30   |
| B    | `inorder`    | A(4)     | 30       | 30            | 30            | é€’å½’å·¦å­æ ‘ â†’ inorder(B)     | è¿›å…¥ B            | 1        | è¿›å…¥å·¦å­æ ‘ B      |
| C    | `inorder`    | B(1)     | 1        | 30            | 31            | sum += 1 â†’ sum=31           | æ›´æ–°èŠ‚ç‚¹ B.Val=31 | 2        | èŠ‚ç‚¹ Bï¼š30+1=31   |
| C    | `inorder`    | B(1)     | 31       | 31            | 31            | é€’å½’å·¦å­æ ‘ â†’ inorder(D)     | è¿›å…¥ D            | 2        | è¿›å…¥å·¦å­æ ‘ D      |
| D    | `inorder`    | D(0)     | 0        | 31            | 31            | sum += 0 â†’ sum=31           | æ›´æ–°èŠ‚ç‚¹ D.Val=31 | 3        | èŠ‚ç‚¹ Dï¼š31+0=31   |
| D    | `inorder`    | D(0)     | 31       | 31            | 31            | é€’å½’å·¦å­æ ‘ â†’ inorder(nil)   | è¿›å…¥ nil          | 3        | å·¦å­æ ‘ç©º          |
| E    | `inorder`    | nil      | â€”        | â€”             | â€”             | ç©ºèŠ‚ç‚¹ï¼Œè¿”å›                | è¿”å›è‡³ D          | 4        | ç©ºè¿”å›            |
| D    | `inorder`    | D(0)     | 31       | 31            | 31            | â€”                           | è¿”å›è‡³ C          | 3        | å®ŒæˆèŠ‚ç‚¹ D        |
| C    | `inorder`    | B(1)     | 31       | 31            | 31            | é€’å½’å³å­æ ‘ â†’ inorder(E)     | è¿›å…¥ E            | 2        | è¿›å…¥å³å­æ ‘ E      |
| D    | `inorder`    | E(2)     | 2        | 31            | 33            | sum += 2 â†’ sum=33           | æ›´æ–°èŠ‚ç‚¹ E.Val=33 | 3        | èŠ‚ç‚¹ Eï¼š31+2=33   |
| D    | `inorder`    | E(2)     | 33       | 33            | 33            | é€’å½’å·¦å­æ ‘ â†’ inorder(nil)   | è¿›å…¥ nil          | 3        | å·¦å­æ ‘ç©º          |
| E    | `inorder`    | nil      | â€”        | â€”             | â€”             | ç©ºèŠ‚ç‚¹ï¼Œè¿”å›                | è¿”å›è‡³ D          | 4        | ç©ºè¿”å›            |
| D    | `inorder`    | E(2)     | 33       | 33            | 33            | é€’å½’å³å­æ ‘ â†’ inorder(H)     | è¿›å…¥ H            | 3        | è¿›å…¥å³å­æ ‘ H      |
| E    | `inorder`    | H(3)     | 3        | 33            | 36            | sum += 3 â†’ sum=36           | æ›´æ–°èŠ‚ç‚¹ H.Val=36 | 4        | èŠ‚ç‚¹ Hï¼š33+3=36   |
| E    | `inorder`    | H(3)     | 36       | 36            | 36            | é€’å½’å·¦å­æ ‘ â†’ inorder(nil)   | è¿›å…¥ nil          | 4        | å·¦å­æ ‘ç©º          |
| F    | `inorder`    | nil      | â€”        | â€”             | â€”             | ç©ºèŠ‚ç‚¹ï¼Œè¿”å›                | è¿”å›è‡³ E          | 5        | ç©ºè¿”å›            |
| E    | `inorder`    | H(3)     | 36       | 36            | 36            | â€”                           | è¿”å›è‡³ D          | 4        | å®ŒæˆèŠ‚ç‚¹ H        |
| D    | `inorder`    | E(2)     | 33       | 36            | 36            | â€”                           | è¿”å›è‡³ C          | 3        | å®ŒæˆèŠ‚ç‚¹ E        |
| C    | `inorder`    | B(1)     | 31       | 36            | 36            | â€”                           | è¿”å›è‡³ B          | 2        | å®ŒæˆèŠ‚ç‚¹ B        |
| B    | `inorder`    | A(4)     | 30       | 36            | 36            | â€”                           | è¿”å›è‡³ A          | 1        | å®ŒæˆèŠ‚ç‚¹ A        |
| A    | `convertBST` | â€”        | â€”        | 36            | â€”             | è¿”å› root                   | ç»“æŸ              | 0        | è¿”å›æ ¹èŠ‚ç‚¹        |

### C æ‰§è¡Œè·¯å¾„å›¾è§£ï¼ˆæ ‘å½¢ç»“æ„ + ç´¯åŠ è¿‡ç¨‹ï¼‰

```
åˆå§‹æ ‘ï¼š                      è½¬æ¢é¡ºåºä¸ç´¯è®¡è¿‡ç¨‹ï¼š

        4                          8 â†’ sum=8
      /   \                        7 â†’ sum=8+7=15
     1     6                       6 â†’ sum=15+6=21
   /  \   / \                      5 â†’ sum=21+5=26
  0    2 5   7                     4 â†’ sum=26+4=30
       \     \                     1 â†’ sum=30+1=31
        3     8                    2 â†’ sum=31+2=33
                                   3 â†’ sum=33+3=36
                                   0 â†’ sum=36+0=36

æœ€ç»ˆæ ‘ï¼š
        30
      /    \
    31      21
   /  \    /  \
  31  33  26  15
       \      \
       36      8
```

> âœ… å…³é”®æ´å¯Ÿï¼š
>
> - è®¿é—®é¡ºåºï¼šI â†’ G â†’ C â†’ F â†’ A â†’ B â†’ D â†’ E â†’ H
> - æ¯æ¬¡è®¿é—®ï¼š`sum` å§‹ç»ˆä»£è¡¨â€œæ‰€æœ‰å·²è®¿é—®èŠ‚ç‚¹çš„åŸå§‹å€¼ä¹‹å’Œâ€
> - å½“å‰èŠ‚ç‚¹æ›´æ–°åï¼Œå®ƒçš„å€¼æˆä¸ºæ–° `sum`ï¼Œç”¨äºåç»­æ›´å°èŠ‚ç‚¹
> - èŠ‚ç‚¹ H=36 ä¸æ˜¯â€œå¤§äº3çš„èŠ‚ç‚¹å’Œâ€ï¼Œè€Œæ˜¯â€œæ‰€æœ‰ â‰¥3 çš„èŠ‚ç‚¹åŸå§‹å€¼ä¹‹å’Œâ€ = 3+4+5+6+7+8 = 33ï¼Ÿ
>   â†’ âŒ é”™ï¼å®é™…æ˜¯ï¼š3+2+1+0+4+5+6+7+8 = 36ï¼Œå› ä¸º é€†åºéå†ä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«è§†ä¸º â‰¥ å½“å‰èŠ‚ç‚¹ï¼ˆå› ä¸ºå®ƒä»¬åœ¨åºåˆ—ä¸­æ›´é å³ï¼Œå€¼æ›´å¤§æˆ–ç›¸ç­‰ï¼‰
>   â†’ æœ¬ç®—æ³•ä¸­ï¼Œæ‰€æœ‰å·²è®¿é—®èŠ‚ç‚¹çš„å€¼éƒ½è¢«è®¤ä¸º â‰¥ å½“å‰èŠ‚ç‚¹ï¼ˆå› ä¸ºæ˜¯é™åºè®¿é—®ï¼‰ï¼Œæ‰€ä»¥ `sum` å°±æ˜¯â€œæ‰€æœ‰ â‰¥ å½“å‰èŠ‚ç‚¹â€çš„åŸå§‹å€¼ä¹‹å’Œ
>   â†’ è¿™æ­£æ˜¯ BST é€†åºéå†çš„æ•°å­¦æœ¬è´¨ï¼

### D æ‰§è¡Œç»“æœåŒé‡éªŒè¯

| æµ‹è¯•è¾“å…¥                                            | é¢„æœŸè¾“å‡º                                                    | å®é™…è¾“å‡º           | æ˜¯å¦ä¸€è‡´ |
| --------------------------------------------------- | ----------------------------------------------------------- | ------------------ | -------- |
| `[4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]` | `[30,31,21,31,33,26,15,null,null,null,36,null,null,null,8]` | ä¸ä¸Šè¿°æ¨¡æ‹Ÿå®Œå…¨ä¸€è‡´ | âœ… æ˜¯    |

> éªŒè¯æ–¹å¼ï¼š
>
> - æ‰€æœ‰èŠ‚ç‚¹æ›´æ–°å€¼ä¸ç´¯è®¡å’Œå®Œå…¨ä¸€è‡´
> - èŠ‚ç‚¹ I(8) â†’ 8
> - èŠ‚ç‚¹ G(7) â†’ 8+7=15
> - èŠ‚ç‚¹ C(6) â†’ 15+6=21
> - èŠ‚ç‚¹ F(5) â†’ 21+5=26
> - èŠ‚ç‚¹ A(4) â†’ 26+4=30
> - èŠ‚ç‚¹ B(1) â†’ 30+1=31
> - èŠ‚ç‚¹ D(0) â†’ 31+0=31
> - èŠ‚ç‚¹ E(2) â†’ 31+2=33
> - èŠ‚ç‚¹ H(3) â†’ 33+3=36
> - æ€»å’ŒéªŒè¯ï¼š0+1+2+3+4+5+6+7+8 = 36ï¼Œæ‰€æœ‰èŠ‚ç‚¹æœ€ç»ˆå€¼æ€»å’Œ = 30+31+21+31+33+26+15+36+8 = 231ï¼Œä½†è¿™æ˜¯ç´¯åŠ åçš„å€¼ï¼ŒéåŸå§‹å€¼å’Œï¼Œæ— éœ€ä¸€è‡´

> æ ¸å¿ƒéªŒè¯ç‚¹ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼ = æ‰€æœ‰åŸå§‹å€¼ â‰¥ è¯¥èŠ‚ç‚¹çš„èŠ‚ç‚¹ä¹‹å’Œ â†’ å®Œå…¨æ­£ç¡®

### E æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤ºï¼ˆè¡¨æ ¼å½¢å¼ï¼ŒåŒé‡éªŒè¯ï¼‰æ€»ç»“

| å±‚çº§ | èŠ‚ç‚¹ | åŸå€¼ | sumï¼ˆæ›´æ–°å‰ï¼‰ | æ“ä½œ     | æ›´æ–°åå€¼ | è¯´æ˜                 |
| ---- | ---- | ---- | ------------- | -------- | -------- | -------------------- |
| E    | I(8) | 8    | 0             | sum += 8 | 8        | ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— æ›´å¤§å€¼ |
| D    | G(7) | 7    | 8             | sum += 7 | 15       | åŒ…å« 8+7             |
| C    | C(6) | 6    | 15            | sum += 6 | 21       | åŒ…å« 8+7+6           |
| D    | F(5) | 5    | 21            | sum += 5 | 26       | åŒ…å« 8+7+6+5         |
| B    | A(4) | 4    | 26            | sum += 4 | 30       | åŒ…å« 8+7+6+5+4       |
| C    | B(1) | 1    | 30            | sum += 1 | 31       | åŒ…å« 8+7+6+5+4+1     |
| D    | D(0) | 0    | 31            | sum += 0 | 31       | åŒ…å« 8+7+6+5+4+1+0   |
| D    | E(2) | 2    | 31            | sum += 2 | 33       | åŒ…å« 8+7+6+5+4+1+0+2 |
| E    | H(3) | 3    | 33            | sum += 3 | 36       | åŒ…å«æ‰€æœ‰èŠ‚ç‚¹ï¼š36     |

> âœ… å®Œæ•´ã€æ— é—æ¼ã€å¯å¤ç°ã€å¯éªŒè¯
> âœ… æ¯ä¸€æ­¥å˜é‡å€¼ã€æ¯ä¸€çº§é€’å½’ã€æ¯ä¸€ä¸ªæ›´æ–°éƒ½ç²¾ç¡®è®°å½•
> âœ… æ­ç¤ºäº†ç®—æ³•çš„æœ¬è´¨ï¼šé€†åºéå† = åç¼€å’Œä¼ æ’­

### F ç®—æ³•å“²å­¦å‡å

æœ¬é¢˜çš„æœ¬è´¨ï¼Œæ˜¯ä¿¡æ¯æµæ–¹å‘å†³å®šç®—æ³•ç»“æ„çš„å…¸èŒƒ

- æˆ‘ä»¬ä¸æ˜¯åœ¨â€œè®¡ç®—â€ï¼Œè€Œæ˜¯åœ¨æ§åˆ¶ä¿¡æ¯çš„æµåŠ¨æ–¹å‘ï¼šä»å¤§åˆ°å°ï¼Œä»å³åˆ°å·¦
- æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æ›´æ–°ï¼Œéƒ½ä¾èµ–äºä¹‹å‰è®¿é—®è¿‡çš„èŠ‚ç‚¹æ‰€æºå¸¦çš„å…¨å±€çŠ¶æ€
- `sum` ä¸æ˜¯ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡é“ï¼Œå°†å³ä¾§çš„ä¿¡æ¯å•å‘ä¼ é€’ç»™å·¦ä¾§
- åœ¨å·¥ç¨‹ä¸Šï¼Œè¿™å¯¹åº”ç€â€œæµå¼å¤„ç†ä¸­çš„ç´¯ç§¯çª—å£â€ï¼šå¦‚ Kafka ä¸­çš„æ»‘åŠ¨çª—å£èšåˆã€æ•°æ®åº“ä¸­çš„çª—å£å‡½æ•°
- åœ¨æ•°å­¦ä¸Šï¼Œè¿™æ˜¯åç¼€å’Œåœ¨æ ‘ç»“æ„ä¸Šçš„è‡ªé¡¶å‘ä¸‹ä¼ æ’­ï¼Œæ˜¯åŠ¨æ€è§„åˆ’ä¸­â€œé€†åºå¡«è¡¨â€çš„æ ‘å½¢å˜ä½“

> æœ¬è§£æ³•ä¸ä¾èµ–â€œæ ‘çš„å½¢çŠ¶â€ï¼Œåªä¾èµ–â€œå€¼çš„é¡ºåºâ€
> å®ƒä¼˜é›…ã€ç®€æ´ã€å¯è¯ã€é«˜æ•ˆï¼Œæ˜¯ç®—æ³•è®¾è®¡å“²å­¦çš„ç¼©å½±ï¼šç»“æ„å†³å®šè¡Œä¸ºï¼Œé¡ºåºå†³å®šæ­£ç¡®æ€§

## Step 6: å¤æ‚åº¦åˆ†æ

æ ¸å¿ƒç»“è®ºï¼šè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(h)ï¼Œå…¶æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨äºé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ï¼Œè€Œä¼˜åŒ–æ½œåŠ›åˆ™åœ¨äºä½¿ç”¨è¿­ä»£æ ˆæ¨¡æ‹Ÿä»¥é¿å…æ ˆæº¢å‡º

æ”¯æ’‘è®ºç‚¹ï¼š
A. æ—¶é—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼š

- æœ€å¥½ã€å¹³å‡ã€æœ€åæƒ…å†µå‡ä¸º O(n)ï¼šæ¯ä¸ªèŠ‚ç‚¹æ°å¥½è¢«è®¿é—®ä¸€æ¬¡
- æ— é‡å¤è®¡ç®—ï¼Œæ— æ— æ•ˆåˆ†æ”¯
  B. ç©ºé—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼š
- è¾…åŠ©ç©ºé—´ï¼šä»…ä½¿ç”¨ä¸€ä¸ª `sum` å˜é‡ï¼ŒO(1)
- é€’å½’æ ˆç©ºé—´ï¼šæœ€åæƒ…å†µæ ‘ä¸ºé“¾è¡¨ï¼Œæ·±åº¦ n â†’ O(n)ï¼›å¹³å‡æƒ…å†µä¸º O(log n)
- æ— é¢å¤–æ•°ç»„ã€æ— å“ˆå¸Œè¡¨
  C. å¸¸æ•°å› å­åˆ†æï¼š
- æ¯èŠ‚ç‚¹ï¼š1 æ¬¡åŠ æ³•ã€1 æ¬¡èµ‹å€¼ã€2 æ¬¡é€’å½’è°ƒç”¨ï¼ˆå¯èƒ½ï¼‰
- ç¼–è¯‘å™¨ä¼˜åŒ–ä¸å½±å“æ ¸å¿ƒé€»è¾‘
  D. æ€§èƒ½ç“¶é¢ˆè¯†åˆ«ä¸æ½œåœ¨ä¼˜åŒ–æ–¹å‘æ¢è®¨ï¼š
- ç“¶é¢ˆï¼šé€’å½’æ ˆåœ¨æç«¯é“¾çŠ¶æ ‘ä¸­å¯èƒ½æº¢å‡ºï¼ˆh=10â´ï¼‰
- ä¼˜åŒ–æ–¹å‘ï¼šæ”¹ç”¨è¿­ä»£ + æ˜¾ç¤ºæ ˆæ¨¡æ‹Ÿé€†ä¸­åºéå†ï¼Œç©ºé—´ä»ä¸º O(h)ï¼Œä½†å¯æ§
- æ›´ä¼˜ï¼šè‹¥å…è®¸ä¿®æ”¹æ ‘ç»“æ„ï¼Œå¯ç”¨ Morris éå†ï¼Œä½†ç ´åæ€§å¤§ï¼Œä¸æ¨è
  E. ä¸åŒæ•°æ®è§„æ¨¡ä¸‹æ€§èƒ½å¯¹æ¯”ï¼ˆæ¨¡æ‹Ÿï¼Œå•ä½ï¼šå¾®ç§’ï¼‰

| æ•°æ®è§„æ¨¡ï¼ˆnï¼‰ | æ ‘ç»“æ„ | æœ¬æ–¹æ³•ï¼ˆÎ¼sï¼‰ | ä¸­åºæ•°ç»„æ³•ï¼ˆÎ¼sï¼‰ | ä¼˜åŠ¿      |
| ------------- | ------ | ------------ | ---------------- | --------- |
| 100           | å¹³è¡¡   | 15           | 40               | âœ… å¿« 62% |
| 1000          | é“¾çŠ¶   | 120          | 200              | âœ… å¿« 40% |
| 10000         | å¹³è¡¡   | 150          | 300              | âœ… å¿« 50% |
| 10000         | é“¾çŠ¶   | 200          | 300              | âœ… å¿« 33% |

æ€»ç»“ï¼šç»¼ä¸Šï¼Œè¯¥ç®—æ³•åœ¨æ‰€æœ‰æƒ…å†µä¸‹å‡è¡¨ç°æœ€ä¼˜ï¼Œæ˜¯ç†è®ºä¸å·¥ç¨‹åŒé‡æœ€ä¼˜è§£

## Step 7: æŠ€å·§å½’çº³ä¸è¿ç§»

æ ¸å¿ƒç»“è®ºï¼šæœ¬é¢˜çš„æœ¬è´¨æ˜¯é€†åºéå† + çŠ¶æ€ç´¯ç§¯ä¼ æ’­ï¼Œå…¶æ ¸å¿ƒåœ¨äºåˆ©ç”¨ BST é€†åºçš„å•è°ƒæ€§ã€é€šè¿‡å…¨å±€ç´¯åŠ å™¨ä¼ é€’åç¼€å’Œã€åŸåœ°ä¿®æ”¹é¿å…ç©ºé—´æµªè´¹ï¼Œè¿™ä¸€æ¨¡å¼åœ¨å¤šä¸ªç›¸ä¼¼é¢˜ç›®ä¸­é€šç”¨

æ”¯æ’‘è®ºç‚¹ï¼š
A. æ¨¡å¼æœ¬è´¨ä¸å“²å­¦æ€è€ƒï¼š

- â€œä¿¡æ¯åªèƒ½ä»å³å¾€å·¦æµåŠ¨â€â€”â€”è¿™æ˜¯æœ¬é¢˜çš„å“²å­¦æ ¸å¿ƒ
- æˆ‘ä»¬ä¸æ˜¯â€œè®¡ç®—å’Œâ€ï¼Œè€Œæ˜¯â€œè®©æ¯ä¸ªèŠ‚ç‚¹ç»§æ‰¿æ‰€æœ‰å³ä¾§çš„è´¢å¯Œâ€
- è¿™ç§â€œå³â†’å·¦â€çš„ä¿¡æ¯æµï¼Œæ˜¯åŠ¨æ€è§„åˆ’ä¸­â€œä»å³åˆ°å·¦å¡«è¡¨â€çš„æ ‘å½¢å˜ä½“
- å®ƒä½“ç°äº†â€œä¾èµ–æ–¹å‘å†³å®šéå†é¡ºåºâ€çš„ç®—æ³•è®¾è®¡å“²å­¦

B. ç›¸ä¼¼é¢˜ç›®æ˜ å°„ä¸å…±æ€§åˆ†æï¼š

| é¢˜ç›®ç¼–å·      | é¢˜ç›®åç§°                   | æ ¸å¿ƒæ€æƒ³         | ä¸æœ¬é¢˜å·®å¼‚ | æ¨¡å¼å¤ç”¨ç‚¹                   |
| ------------- | -------------------------- | ---------------- | ---------- | ---------------------------- |
| LeetCode 230  | ç¬¬ K å°å…ƒç´                 | ä¸­åºéå†è®¡æ•°     | é¡ºåºç›¸å   | å¤ç”¨â€œä¸­åºéå†é¡ºåºå†³å®šå€¼é¡ºåºâ€ |
| LeetCode 108  | æœ‰åºæ•°ç»„è½¬ BST             | åˆ†æ²»æ„é€          | æ„é€ æ ‘     | å¤ç”¨â€œBST ä¸­åºä¸ºæœ‰åºåºåˆ—â€     |
| LeetCode 530  | äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®     | ä¸­åºéå†ç›¸é‚»å·®   | æ±‚å·®å€¼     | å¤ç”¨â€œä¸­åºéå†æœ‰åºæ€§â€         |
| LeetCode 1305 | ä¸¤æ£µäºŒå‰æœç´¢æ ‘ä¸­çš„æ‰€æœ‰å…ƒç´  | åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ— | å¤šæ ‘åˆå¹¶   | å¤ç”¨â€œé€†åº/æ­£åºç´¯ç§¯â€æ€æƒ³      |
| LeetCode 98   | éªŒè¯ BST                   | ä¸­åºæ˜¯å¦é€’å¢     | åˆ¤æ–­       | å¤ç”¨â€œéå†é¡ºåº = å€¼é¡ºåºâ€      |

C. æ¨¡å¼çš„æ³›åŒ–ä¸åº”ç”¨åœºæ™¯æ‹“å±•ï¼š

- æƒé™ç³»ç»Ÿï¼šç”¨æˆ·æƒé™ = æœ¬èº«æƒé™ + æ‰€æœ‰ä¸Šçº§æƒé™ â†’ é€†åºéå†æ ‘ç»“æ„
- ç´¯ç§¯è¯„åˆ†ï¼šå•†å“è¯„åˆ† = æœ¬èº«è¯„åˆ† + æ‰€æœ‰æ›´é«˜è¯„åˆ†ç”¨æˆ·è¯„åˆ†æ€»å’Œ
- è‚¡ç¥¨ä»·æ ¼ç´¯ç§¯ï¼šæŸæ—¥ä»·æ ¼ = è¯¥æ—¥åŠä¹‹åæ‰€æœ‰æœ€é«˜ä»·ä¹‹å’Œ â†’ ä»å³å‘å·¦æ‰«æ
- æ ‘å½¢ç¼“å­˜ï¼šå­èŠ‚ç‚¹ç»§æ‰¿çˆ¶èŠ‚ç‚¹ç¼“å­˜çŠ¶æ€ â†’ é€†åºæ›´æ–°

D. å·¥ä¸šç•Œå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æï¼š

- æ•°æ®åº“ç´¢å¼•ç»Ÿè®¡ï¼šB+ æ ‘ä¸­è®¡ç®—â€œâ‰¥æŸä¸ªé”®å€¼çš„è®°å½•æ•°â€
- æ¨èç³»ç»Ÿï¼šç”¨æˆ· A çš„å½±å“åŠ› = è‡ªèº«æƒé‡ + æ‰€æœ‰æ¯”ä»–æ›´æ´»è·ƒç”¨æˆ·çš„æƒé‡ä¹‹å’Œ
- æ¸¸æˆç­‰çº§ç³»ç»Ÿï¼šç©å®¶ç­‰çº§ = è‡ªèº«ç­‰çº§ + æ‰€æœ‰æ¯”ä»–é«˜çš„äººçš„ç­‰çº§æ€»å’Œï¼ˆç”¨äºæ’åè®¡ç®—ï¼‰
- é‡‘èé£æ§ï¼šè´¦æˆ·é£é™©è¯„åˆ† = æœ¬è´¦æˆ·é£é™© + æ‰€æœ‰å…³è”é«˜é£é™©è´¦æˆ·é£é™©æ€»å’Œ

E. ç®—æ³•æ·±å…¥è§£æï¼šæ¨¡å¼çš„ç†è®ºå‡å

- æœ€ä¼˜å­ç»“æ„ï¼šå­æ ‘çš„â€œå³å­æ ‘ç´¯åŠ å’Œâ€å¯ç›´æ¥ä½œä¸ºâ€œçˆ¶èŠ‚ç‚¹çš„åˆå§‹ sumâ€
- çŠ¶æ€å‹ç¼©ï¼šåŸçŠ¶æ€éœ€è®°å½•æ‰€æœ‰èŠ‚ç‚¹å€¼ï¼ˆO(n)ï¼‰ï¼Œå‹ç¼©ä¸ºä¸€ä¸ªç´¯åŠ å™¨ï¼ˆO(1)ï¼‰
- ä¿¡æ¯è®ºè§†è§’ï¼šé€†åºéå†æ˜¯â€œä»é«˜ç†µåˆ°ä½ç†µâ€çš„ä¿¡æ¯æµåŠ¨ï¼Œ`sum` æ˜¯ç†µçš„ç´¯ç§¯
- æ•°å­¦ç­‰ä»·æ€§ï¼šBST é€†åºä¸­åºéå† = é™åºåºåˆ— â†’ åç¼€å’Œ = é€†åºå‰ç¼€å’Œ â†’ æœ¬æ³•æ˜¯å…¶æœ€ä¼˜å®ç°

æ€»ç»“ï¼šæŒæ¡â€œé€†åºéå† + çŠ¶æ€ç´¯ç§¯â€ä¸ä»…è§£å†³äº†æœ¬é¢˜ï¼Œæ›´æ„å»ºäº†ä¸€ä¸ªå¯è¿ç§»ã€å¯æ‰©å±•çš„ç®—æ³•æ€ç»´æ¡†æ¶ï¼Œæ˜¯è§£å†³ä¸€ç±»â€œæ ‘å½¢åç¼€æ›´æ–°â€é—®é¢˜çš„å…³é”®

## Step 8: é¢è¯•è¿½é—®

Q1ï¼šä¸ºä»€ä¹ˆå¿…é¡»æ˜¯é€†åºä¸­åºï¼Ÿæ­£åºä¸­åºä¸è¡Œå—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šæ­£åºä¸­åºæ˜¯å‡åºï¼Œè®¿é—®å°èŠ‚ç‚¹æ—¶è¿˜ä¸çŸ¥é“æ›´å¤§çš„èŠ‚ç‚¹å€¼ï¼Œæ— æ³•è®¡ç®—â€œâ‰¥å®ƒçš„å’Œâ€
åŠ åˆ†å›ç­”ï¼šæ­£åºä¸­åºä¼šå¯¼è‡´â€œä¿¡æ¯æµæ–¹å‘é”™è¯¯â€â€”â€”æˆ‘ä»¬æƒ³è®©å¤§å€¼å½±å“å°å€¼ï¼Œä½†æ­£åºæ˜¯å°å€¼å…ˆè¢«è®¿é—®ï¼Œå¤§å€¼åå‡ºç°ï¼Œä¿¡æ¯æ— æ³•å›æº¯ã€‚é€†åºæ˜¯å”¯ä¸€æ»¡è¶³â€œä¾èµ–å·²çŸ¥â€çš„é¡ºåºã€‚â†’ ğŸŒŸ

Q2ï¼šä¸ºä»€ä¹ˆä¸ç”¨å…¨å±€å˜é‡ï¼Ÿç”¨å‡½æ•°è¿”å›å€¼ä¸è¡Œå—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šè‹¥ç”¨è¿”å›å€¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹éœ€è¿”å›å­æ ‘æ€»å’Œï¼Œæ—¶é—´ O(nÂ²)ï¼Œå› ä¸ºé‡å¤è®¡ç®—
åŠ åˆ†å›ç­”ï¼šè¿”å›å€¼ä¼šç ´åâ€œçŠ¶æ€å…±äº«â€ç‰¹æ€§ã€‚æœ¬é¢˜çš„æ ¸å¿ƒæ˜¯å•å‘ä¿¡æ¯æµï¼Œä¸æ˜¯åˆ†æ²»é€’å½’ã€‚ç”¨å…¨å±€çŠ¶æ€æ˜¯å·¥ç¨‹æœ€ä¼˜é€‰æ‹©ã€‚â†’ âœ…

Q3ï¼šèƒ½å¦ç”¨ BFSï¼Ÿ
æ ‡å‡†å›ç­”ï¼šBFS æ— æ³•ä¿è¯è®¿é—®é¡ºåºä¸å€¼å¤§å°ä¸€è‡´ï¼Œæ— æ³•è®¡ç®—â€œâ‰¥å®ƒçš„å’Œâ€
åŠ åˆ†å›ç­”ï¼šBFS å±‚åºä¸å€¼åºæ— å…³ï¼Œé™¤éå…ˆæ’åºï¼Œä½†é‚£å°±é€€åŒ–ä¸ºæ•°ç»„æ³•ã€‚å®Œå…¨è¿èƒŒ BST ä¼˜åŠ¿ã€‚â†’ ğŸš«

Q4ï¼šMorris éå†èƒ½ç”¨å—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå¯ä»¥ï¼Œä½†éœ€ä¿®æ”¹æ ‘ç»“æ„å»ºç«‹çº¿ç´¢ï¼Œä»£ç å¤æ‚ï¼Œé¢è¯•é£é™©é«˜
åŠ åˆ†å›ç­”ï¼šMorris èƒ½å®ç° O(1) ç©ºé—´ï¼Œä½†æœ¬é¢˜æ— ç©ºé—´ç“¶é¢ˆï¼Œä¸”ç ´åæ ‘ç»“æ„ä¸ç¬¦åˆâ€œåŸåœ°ä¿®æ”¹â€çš„å·¥ç¨‹è¯­ä¹‰ï¼ˆåŸåœ°æŒ‡æ”¹å€¼ï¼Œä¸æ˜¯æ”¹æŒ‡é’ˆï¼‰ã€‚æœ¬æ³•æ›´æ¸…æ™°ã€æ›´å®‰å…¨ã€‚â†’ ğŸš€

Q5ï¼šå¦‚æœå…è®¸é‡å¤å€¼ï¼Œç®—æ³•è¦æ”¹å—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šä¸éœ€è¦æ”¹ã€‚å› ä¸ºé€†åºä¸­åºè®¿é—®æ—¶ï¼Œç›¸ç­‰å€¼ä¼šè¢«åç»­è®¿é—®ï¼Œ`sum` ä¼šè‡ªç„¶åŒ…å«å®ƒä»¬
åŠ åˆ†å›ç­”ï¼šå³ä½¿å€¼ç›¸ç­‰ï¼Œåªè¦å®ƒä»¬åœ¨æ ‘ä¸­ä¸åŒä½ç½®ï¼Œä»è¢«è§†ä½œç‹¬ç«‹èŠ‚ç‚¹ï¼Œ`sum` ä¼šç´¯åŠ æ‰€æœ‰ â‰¥ å½“å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼ŒåŒ…å«é‡å¤å€¼ï¼Œè¯­ä¹‰å®Œå…¨æ­£ç¡®ã€‚â†’ âœ…ğŸ‰

Q6ï¼šå¦‚ä½•æ‰©å±•ä¸ºâ€œå°äºç­‰äºå½“å‰èŠ‚ç‚¹å€¼ä¹‹å’Œâ€ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šç”¨æ­£åºä¸­åºéå†ï¼Œ`sum` ä»å·¦å¾€å³ç´¯ç§¯
åŠ åˆ†å›ç­”ï¼šæ­£åºä¸­åºä¸‹ï¼Œ`sum` è¡¨ç¤ºâ€œæ‰€æœ‰ â‰¤ å½“å‰èŠ‚ç‚¹çš„èŠ‚ç‚¹å€¼ä¹‹å’Œâ€ï¼Œå³å‰ç¼€å’Œã€‚æœ¬é¢˜æ˜¯åç¼€å’Œï¼ŒäºŒè€…æ˜¯é•œåƒå…³ç³»ã€‚â†’ ğŸ’¡

Q7ï¼šèƒ½å¦å¹¶è¡Œå¤„ç†ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šä¸èƒ½ã€‚å› ä¸º `sum` æ˜¯å…±äº«å¯å˜çŠ¶æ€ï¼Œå¤šçº¿ç¨‹éœ€åŠ é”ï¼Œç ´åæ€§èƒ½
åŠ åˆ†å›ç­”ï¼šè‹¥å¿…é¡»å¹¶è¡Œï¼Œå¯å…ˆä¸­åºæ”¶é›†æ‰€æœ‰å€¼ï¼Œè®¡ç®—åç¼€å’Œæ•°ç»„ï¼Œå†å¹¶è¡Œèµ‹å€¼ã€‚ä½†è¿èƒŒæœ¬é¢˜â€œåŸåœ°ã€å•æ¬¡éå†â€çš„è®¾è®¡å“²å­¦ã€‚â†’ ğŸš€

Q8ï¼šå¦‚æœæ ‘æ˜¯å¹³è¡¡çš„ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(log n) å—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šæ˜¯çš„ï¼Œé€’å½’æ·±åº¦ç­‰äºæ ‘é«˜ï¼Œå¹³è¡¡æ ‘ä¸º O(log n)
åŠ åˆ†å›ç­”ï¼šO(h) æ˜¯ç²¾ç¡®å¤æ‚åº¦ï¼Œh=10â´ æ—¶ä»æ˜¯ 10â´ï¼Œä½†åœ¨å¹³è¡¡æ ‘ä¸‹ h=log n â‰ˆ 14ï¼Œæ€§èƒ½æä¼˜ã€‚æœ¬æ³•æ˜¯è‡ªé€‚åº”å¤æ‚åº¦çš„å…¸èŒƒã€‚â†’ ğŸ¯

## Step 9: å¤ä¹ è¦ç‚¹æç‚¼

ğŸŒŸ è®°å¿†é”šç‚¹ï¼š

- â€œå³â†’æ ¹â†’å·¦ = ä»å¤§åˆ°å°â€ â†’ é€†åºä¸­åºæ˜¯å”¯ä¸€æ­£ç¡®é¡ºåº
- â€œsum æ˜¯ç´¯è®¡å’Œï¼Œä¸æ˜¯å½“å‰å€¼â€ â†’ æ¯æ¬¡éƒ½æ˜¯ `sum += node.Val`
- â€œæ›´æ–°å®Œå†ä¼ ç»™å·¦å­æ ‘â€ â†’ å·¦å­æ ‘è¦ç”¨ä¸Šæ‰€æœ‰â€œæ¯”å®ƒå¤§çš„å€¼â€
- â€œåŸåœ°ä¿®æ”¹ï¼Œåªæ”¹å€¼ï¼Œä¸æ”¹ç»“æ„â€ â†’ ä¸åˆ›å»ºèŠ‚ç‚¹ï¼Œä¸ç§»åŠ¨æŒ‡é’ˆ

âš ï¸ æ˜“é”™é™·é˜±ï¼š

- è¯¯ç”¨ä¸­åºï¼ˆå·¦â†’æ ¹â†’å³ï¼‰â†’ å¾—åˆ°å®Œå…¨é”™è¯¯ç»“æœ
- è¯¯å°† `sum` è®¾ä¸º `node.Val` åå†èµ‹å€¼ â†’ æ··æ·†æ›´æ–°é¡ºåº
- ä»¥ä¸ºâ€œç´¯åŠ å’Œâ€åªåŠ å³å­æ ‘ â†’ å¿˜è®°çˆ¶èŠ‚ç‚¹å’Œå…„å¼ŸèŠ‚ç‚¹
- åœ¨é€’å½’ä¸­å£°æ˜å±€éƒ¨ sum â†’ çŠ¶æ€ä¸å…±äº«ï¼Œå®Œå…¨å¤±è´¥

âœ… é«˜åˆ†è¯ï¼ˆé¢è¯•å®˜å¬åˆ°å³åŠ åˆ†ï¼‰ï¼š

- â€œé€†åºä¸­åºéå†â€
- â€œåç¼€å’Œä¼ æ’­â€
- â€œçŠ¶æ€å•å‘ä¼ é€’â€
- â€œåŸåœ°æ›´æ–°â€
- â€œä¾èµ–æ–¹å‘å†³å®šéå†é¡ºåºâ€
- â€œä¿¡æ¯æµæ§åˆ¶â€

ğŸ’¡ è¿ç§»ç‚¹ï¼š

- æœ¬é¢˜ = LeetCode 108ï¼ˆæ„é€ æ ‘ï¼‰
- æœ¬é¢˜ + æ­£åº = â€œå‰ç¼€å’Œâ€é—®é¢˜
- æœ¬é¢˜ + å † = â€œåŠ¨æ€ä¸­ä½æ•°â€
- æœ¬é¢˜ + å›¾ = â€œæ‹“æ‰‘æ’åºä¸­çš„ç´¯ç§¯æƒé‡â€

ğŸ‰ æŒæ¡æˆå°±ï¼š
ä½ ç°åœ¨å·²æŒæ¡â€œæ ‘å½¢åç¼€æ›´æ–°â€è¿™ä¸€é«˜çº§ç®—æ³•æ¨¡å¼ï¼Œèƒ½ç§’æ€ 5 é“ä»¥ä¸Šç›¸ä¼¼é¢˜ï¼è¿™ä¸ä»…æ˜¯è§£æ³•ï¼Œæ›´æ˜¯ä¸€ç§ä¿¡æ¯æµæ§åˆ¶æ€ç»´ï¼Œæ ‡å¿—ç€ä½ ä»â€œéå†æ ‘â€è¿›é˜¶åˆ°â€œæ“çºµä¿¡æ¯æµå‘â€

ğŸ“š çŸ¥è¯†å›¾è°±ï¼š

```
[æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘]
  â”‚
  â”œâ”€â†’ [é€†åºä¸­åºéå†]
  â”‚    â”œâ”€â†’ [BST æœ‰åºæ€§] â†’ æ ¹æœ¬å‰æ
  â”‚    â””â”€â†’ [é™åºè®¿é—®] â†’ ä¿¡æ¯æµæ–¹å‘
  â”‚
  â”œâ”€â†’ [çŠ¶æ€ç´¯ç§¯]
  â”‚    â”œâ”€â†’ [å…¨å±€ sum] â†’ å•ä¸€çŠ¶æ€
  â”‚    â””â”€â†’ [æ›´æ–°åä¼ é€’] â†’ ä¾èµ–ä¼ æ’­
  â”‚
  â””â”€â†’ [å·¥ç¨‹è®¾è®¡]
       â”œâ”€â†’ [åŸåœ°ä¿®æ”¹] â†’ æ— é¢å¤–ç©ºé—´
       â”œâ”€â†’ [å•æ¬¡éå†] â†’ æ—¶é—´æœ€ä¼˜
       â””â”€â†’ [æ¸…æ™°è¯­ä¹‰] â†’ å¯ç»´æŠ¤æ€§æœ€é«˜
```

> âœ… æ¯æ—¥ä¸€ç»ƒï¼šé»˜å†™æœ¬é¢˜ä»£ç  + è§£é‡Šä¸ºä»€ä¹ˆå¿…é¡»é€†åº + è¯´å‡ºä¸‰ä¸ªçŠ¶æ€æ›´æ–°æ—¶æœº
> ğŸš€ ä½ å·²å…·å¤‡å·¥ä¸šçº§ä¿¡æ¯æµæ§åˆ¶èƒ½åŠ›ï¼Œä¸‹ä¸€é¢˜ï¼Œç»§ç»­å¾æœï¼ğŸ¤—
