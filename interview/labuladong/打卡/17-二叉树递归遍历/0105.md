# LeetCode 105 - ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘

## 1. é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ `preorder` å’Œ `inorder`ï¼Œå…¶ä¸­ `preorder` æ˜¯äºŒå‰æ ‘çš„å‰åºéå†åºåˆ—ï¼Œ`inorder` æ˜¯åŒä¸€æ£µæ ‘çš„ä¸­åºéå†åºåˆ—ï¼Œè¯·æ„é€ å¹¶è¿”å›è¿™æ£µäºŒå‰æ ‘

### è¾“å…¥è¾“å‡ºæ ¼å¼

```
è¾“å…¥ï¼špreorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
è¾“å‡ºï¼š[3,9,20,null,null,15,7]

è¾“å…¥ï¼špreorder = [-1], inorder = [-1]
è¾“å‡ºï¼š[-1]

è¾“å…¥ï¼špreorder = [1,2], inorder = [2,1]
è¾“å‡ºï¼š[1,null,2]
```

### çº¦æŸæ¡ä»¶

- `1 <= preorder.length <= 3000`
- `inorder.length == preorder.length`
- `-3000 <= preorder[i], inorder[i] <= 3000`
- `preorder` å’Œ `inorder` å‡æ— é‡å¤å…ƒç´ 
- `inorder` ä¿è¯æ˜¯ `preorder` çš„ä¸€ä¸ªæœ‰æ•ˆäºŒå‰æ ‘çš„ä¸­åºéå†

## 2. è§£æ³•åˆ†æï¼šé€’å½’åˆ’åˆ†æ³•

### æ ¸å¿ƒç»“è®ºï¼š

æœ¬é¢˜çš„æœ€ä¼˜è§£æ˜¯ é€’å½’åˆ’åˆ†æ³•ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºåˆ©ç”¨å‰åºå’Œä¸­åºéå†çš„ç»“æ„ç‰¹æ€§ã€å®ç°é€»è¾‘é«˜åº¦è‡ªæ´½ã€æ—¶é—´å¤æ‚åº¦æœ€ä¼˜ï¼Œå¹¶èƒ½ç›´æ¥æ˜ å°„åˆ°äºŒå‰æ ‘çš„æ„é€ è¿‡ç¨‹ï¼Œæ˜¯é¢è¯•ä¸­æœ€èƒ½ä½“ç°å¯¹æ ‘éå†æœ¬è´¨ç†è§£çš„è§£æ³•

### æ”¯æ’‘è®ºç‚¹ï¼š

#### A. ä¸ºä»€ä¹ˆé€’å½’åˆ’åˆ†æ³•æ˜¯æœ€ä¼˜è§£ï¼Ÿ

- å‰åºéå†çš„ç‰¹æ€§ï¼šç¬¬ä¸€ä¸ªå…ƒç´ ä¸€å®šæ˜¯å½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹
- ä¸­åºéå†çš„ç‰¹æ€§ï¼šæ ¹èŠ‚ç‚¹å°†æ•°ç»„åˆ†ä¸ºå·¦å­æ ‘ï¼ˆå·¦ä¾§ï¼‰å’Œå³å­æ ‘ï¼ˆå³ä¾§ï¼‰
- ç»„åˆå¨åŠ›ï¼šå‰åºæä¾›â€œæ ¹æ˜¯è°â€ï¼Œä¸­åºæä¾›â€œæ ¹çš„å·¦å³å­æ ‘èŒƒå›´â€ã€‚ä¸¤è€…ç»“åˆï¼Œå¯å”¯ä¸€ç¡®å®šä¸€æ£µäºŒå‰æ ‘
- é€’å½’åˆ’åˆ†ï¼šæ¯æ¬¡å–å‰åºé¦–å…ƒç´ ä½œä¸ºæ ¹ï¼Œåœ¨ä¸­åºä¸­å®šä½å…¶ä½ç½®ï¼Œåˆ†å‰²å‡ºå·¦/å³å­æ ‘çš„åŒºé—´ï¼Œé€’å½’æ„å»ºå·¦å³å­æ ‘
- æ— å†—ä½™ä¿¡æ¯ï¼šä»…ç”¨ä¸¤ä¸ªéå†åºåˆ—ï¼Œä¸ä¾èµ–é¢å¤–æ•°æ®ç»“æ„ï¼ˆå¦‚å“ˆå¸Œè¡¨è™½æå‡æ•ˆç‡ï¼Œä½†éæœ¬è´¨ï¼‰ï¼Œä½“ç°â€œç»“æ„å³ä¿¡æ¯â€çš„æ€æƒ³
- é¢è¯•é«˜åˆ†ç‚¹ï¼šå±•ç°å¯¹â€œæ ‘çš„éå†é¡ºåºä¸ç»“æ„æ˜ å°„å…³ç³»â€çš„æ·±åˆ»ç†è§£ï¼Œæ˜¯è€ƒå¯Ÿæ•°æ®ç»“æ„æœ¬è´¨çš„ç»å…¸é¢˜

#### B. ä¸å…¶ä»–ä¸»æµç®—æ³•çš„å¯¹æ¯”åˆ†æ

| æ–¹æ³•                   | æ˜¯å¦å¯è¡Œ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | å®ç°éš¾åº¦ | ç‰¹ç‚¹                             |
| ---------------------- | -------- | ---------- | ---------- | -------- | -------------------------------- |
| é€’å½’åˆ’åˆ†æ³•ï¼ˆæœ¬è§£æ³•ï¼‰   | âœ… æ˜¯    | O(n)       | O(n)       | ä¸­       | é¢è¯•é¦–é€‰ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæœ¬è´¨æ­£ç¡®     |
| å“ˆå¸Œä¼˜åŒ–é€’å½’æ³•         | âœ… æ˜¯    | O(n)       | O(n)       | ä¸­       | æ•ˆç‡æ›´é«˜ï¼Œä½†å¼•å…¥å“ˆå¸Œè¡¨ï¼Œéæœ¬è´¨   |
| è¿­ä»£æ ˆæ³•               | âœ… æ˜¯    | O(n)       | O(n)       | é«˜       | ä»£ç å¤æ‚ï¼Œéš¾è°ƒè¯•ï¼Œä¸ç›´è§‚         |
| ä¸­åº+ååºæ„é€           | âœ… æ˜¯    | O(n)       | O(n)       | ä¸­       | åŒç±»é¢˜ï¼Œä½†ååºæ ¹åœ¨æœ«å°¾ï¼Œé€»è¾‘ç¨å¼‚ |
| æš´åŠ›é€’å½’ï¼ˆæ¯æ¬¡æŸ¥æ‰¾æ ¹ï¼‰ | âœ… æ˜¯    | O(nÂ²)      | O(n)       | ä½       | ä¼šè¶…æ—¶ï¼Œä¸å¯å–                   |

> æ³¨ï¼šå“ˆå¸Œä¼˜åŒ–æœ¬è´¨æ˜¯é¢„å¤„ç†ä¼˜åŒ–ï¼Œä¸æ”¹å˜ç®—æ³•èŒƒå¼ï¼Œä»å±äºé€’å½’åˆ’åˆ†æ³•ã€‚æœ¬é¢˜çš„æ ¸å¿ƒæ˜¯â€œé€’å½’åˆ’åˆ†â€æ€æƒ³ï¼Œè€Œéæ˜¯å¦ç”¨å“ˆå¸Œè¡¨

#### C. é€‚ç”¨çš„é—®é¢˜è¾¹ç•Œå’Œå‰ææ¡ä»¶

- å¿…é¡»æ˜¯äºŒå‰æ ‘ï¼šNå‰æ ‘æ— å”¯ä¸€ä¸­åºå®šä¹‰ï¼Œä¸é€‚ç”¨
- èŠ‚ç‚¹å€¼å”¯ä¸€ï¼šè‹¥å­˜åœ¨é‡å¤å€¼ï¼Œä¸­åºä¸­æ— æ³•å”¯ä¸€å®šä½æ ¹ï¼Œå¯¼è‡´æ­§ä¹‰
- åºåˆ—å®Œæ•´ä¸”ä¸€è‡´ï¼šä¸¤ä¸ªåºåˆ—å¿…é¡»æ¥è‡ªåŒä¸€æ£µæ ‘ï¼Œå¦åˆ™æ„é€ å¤±è´¥
- æ— ç©ºèŠ‚ç‚¹æ˜¾å¼æ ‡è®°ï¼šåºåˆ—ä¸­ä¸å« `null`ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ç”¨äºåºåˆ—åŒ–/ååºåˆ—åŒ–åœºæ™¯

#### D. å·¥ç¨‹å®è·µè€ƒé‡

- é€’å½’æ·±åº¦ï¼šæœ€åæƒ…å†µä¸‹ï¼ˆé€€åŒ–ä¸ºé“¾è¡¨ï¼‰ï¼Œé€’å½’æ ˆæ·±åº¦ä¸º O(n)ï¼Œéœ€è€ƒè™‘æ ˆæº¢å‡ºï¼ˆå·¥ç¨‹ä¸­å¯ç”¨è¿­ä»£æ¨¡æ‹Ÿï¼‰
- å‚æ•°ä¼ é€’ï¼šä½¿ç”¨ç´¢å¼•è€Œéåˆ‡ç‰‡ï¼Œé¿å…é¢‘ç¹æ•°ç»„å¤åˆ¶ï¼Œé™ä½ç©ºé—´å¼€é”€
- å¯è¯»æ€§ä¼˜å…ˆï¼šåœ¨é¢è¯•åœºæ™¯ä¸­ï¼Œä¼˜å…ˆé€‰æ‹©æ¸…æ™°å¯è§£é‡Šçš„é€’å½’ç‰ˆæœ¬ï¼Œè€Œéæè‡´ä¼˜åŒ–çš„è¿­ä»£ç‰ˆæœ¬
- è°ƒè¯•å‹å¥½ï¼šæ¯å±‚é€’å½’å¯¹åº”ä¸€ä¸ªå­æ ‘ï¼Œå¯é€šè¿‡æ‰“å°åŒºé—´éªŒè¯æ„é€ é€»è¾‘

### æ€»ç»“ï¼š

å› æ­¤ï¼Œé€’å½’åˆ’åˆ†æ³• æ˜¯æœ¬é¢˜åœ¨é€»è¾‘æ­£ç¡®æ€§ã€æ€ç»´æ¸…æ™°åº¦å’Œå·¥ç¨‹è¡¨è¾¾ä¸Šçš„æœ€ä¼˜å¹³è¡¡ç‚¹

## 3. å¤šè¯­è¨€å®ç°ä¸æ·±åº¦è§£æ

### æ ¸å¿ƒç»“è®ºï¼š

é€šè¿‡å¯¹æ¯”å››ç§ä¸»æµè¯­è¨€çš„å®ç°ï¼Œå¯ä»¥éªŒè¯è¯¥ç®—æ³•çš„é€šç”¨æ€§ï¼Œå¹¶æ´å¯Ÿä¸åŒè¯­è¨€åœ¨é€’å½’ã€ç´¢å¼•ç®¡ç†ã€æ•°ç»„åˆ‡ç‰‡å’Œå†…å­˜æ•ˆç‡ä¸Šçš„è®¾è®¡å“²å­¦

### æ”¯æ’‘è®ºç‚¹ï¼š

#### A. Go ğŸ¹ å®ç°ä¸æ€§èƒ½å‰–æ

```go
/
 * Definition for a binary tree node.
 * type TreeNode struct {
 *     Val int
 *     Left *TreeNode
 *     Right *TreeNode
 * }
 */
func buildTree(preorder []int, inorder []int) *TreeNode {
    // åŸºç¡€è¾¹ç•Œï¼šç©ºåºåˆ—è¿”å›ç©ºæ ‘
    if len(preorder) == 0 {
        return nil
    }

    // å‰åºç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ ¹èŠ‚ç‚¹
    rootVal := preorder[0]
    root := &TreeNode{Val: rootVal}

    // åœ¨ä¸­åºä¸­æŸ¥æ‰¾æ ¹èŠ‚ç‚¹ä½ç½®
    rootIdx := 0
    for i, val := range inorder {
        if val == rootVal {
            rootIdx = i
            break
        }
    }

    // æ ¹æ®ä¸­åºåˆ’åˆ†å·¦å­æ ‘å’Œå³å­æ ‘çš„é•¿åº¦
    leftSize := rootIdx           // å·¦å­æ ‘èŠ‚ç‚¹ä¸ªæ•°
    rightSize := len(inorder) - 1 - rootIdx // å³å­æ ‘èŠ‚ç‚¹ä¸ªæ•°

    // é€’å½’æ„é€ å·¦å­æ ‘ï¼šå‰åº[1:1+leftSize], ä¸­åº[0:leftIdx]
    root.Left = buildTree(preorder[1:1+leftSize], inorder[:rootIdx])

    // é€’å½’æ„é€ å³å­æ ‘ï¼šå‰åº[1+leftSize:], ä¸­åº[rootIdx+1:]
    root.Right = buildTree(preorder[1+leftSize:], inorder[rootIdx+1:])

    return root
}
```

##### ç®—æ³•æ·±å…¥è§£æï¼š

- `if len(preorder) == 0`ï¼š
  - é€’å½’åŸºçº¿ï¼šå½“åºåˆ—ä¸ºç©ºæ—¶ï¼Œè¿”å› `nil`ï¼Œè¡¨ç¤ºæ— èŠ‚ç‚¹ã€‚è¿™æ˜¯é€’å½’çš„ç»ˆæ­¢æ¡ä»¶
- `rootVal := preorder[0]`ï¼š
  - å‰åºéå†çš„é¦–å…ƒç´ å¿…ä¸ºå½“å‰å­æ ‘çš„æ ¹ï¼Œè¿™æ˜¯ç®—æ³•çš„æ ¸å¿ƒå‰æ
- `rootIdx := 0` + å¾ªç¯æŸ¥æ‰¾ï¼š
  - åœ¨ä¸­åºåºåˆ—ä¸­éå†æŸ¥æ‰¾æ ¹å€¼çš„ä½ç½®ï¼Œå¾—åˆ°å·¦å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°
  - ä¸ºä»€ä¹ˆä¸èƒ½ç”¨å“ˆå¸Œï¼Ÿ åœ¨æ­¤åŸºç¡€ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¸å¼•å…¥é¢å¤–ç©ºé—´ï¼Œä½“ç°â€œæ— è¾…åŠ©ç»“æ„â€çš„ç®—æ³•æœ¬è´¨
- `leftSize := rootIdx`ï¼š
  - ä¸­åºä¸­æ ¹èŠ‚ç‚¹å·¦ä¾§æœ‰ `rootIdx` ä¸ªå…ƒç´  â†’ å·¦å­æ ‘æœ‰ `leftSize` ä¸ªèŠ‚ç‚¹
- `rightSize := len(inorder) - 1 - rootIdx`ï¼š
  - ä¸­åºæ€»é•¿å‡å»æ ¹èŠ‚ç‚¹å’Œå·¦å­æ ‘ â†’ å³å­æ ‘èŠ‚ç‚¹æ•°
- `buildTree(preorder[1:1+leftSize], inorder[:rootIdx])`ï¼š
  - å…³é”®ï¼šå‰åºä¸­ï¼Œæ ¹ä¹‹åçš„ `leftSize` ä¸ªå…ƒç´ æ„æˆå·¦å­æ ‘çš„å‰åº
  - ä¸­åºä¸­ï¼Œä»å¤´åˆ°æ ¹å‰çš„å…ƒç´ æ„æˆå·¦å­æ ‘çš„ä¸­åº
- `buildTree(preorder[1+leftSize:], inorder[rootIdx+1:])`ï¼š
  - å‰©ä½™éƒ¨åˆ†ä¸ºå³å­æ ‘
- è®¾è®¡åŠ¨æœºï¼š
  - è¯¥å®ç°å®Œå…¨åŸºäºé€’å½’åˆ’åˆ†ï¼Œæ¯å±‚é€’å½’å¤„ç†ä¸€ä¸ªå­æ ‘ï¼Œä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€
  - ç¼ºç‚¹ï¼šæ¯æ¬¡é€’å½’éƒ½å¤åˆ¶å­æ•°ç»„ï¼Œå¯¼è‡´æ—¶é—´å¤æ‚åº¦ä¸Šå‡è‡³ O(nÂ²)ï¼ˆæœ€åæƒ…å†µï¼‰ï¼Œä½†é€»è¾‘ææ¸…æ™°ï¼Œæ˜¯é¢è¯•ä¸­â€œè¡¨è¾¾æ€æƒ³â€çš„æœ€ä½³é€‰æ‹©
  - æœ¬è´¨æ­£ç¡®æ€§ï¼šå‰åºé¦–å…ƒç´ æ˜¯æ ¹ï¼Œä¸­åºæ ¹å·¦ä¾§æ˜¯å·¦å­æ ‘ï¼Œå³ä¾§æ˜¯å³å­æ ‘ï¼Œè¿™ä¸€æ˜ å°„å…³ç³»æ˜¯æ ‘ç»“æ„çš„å”¯ä¸€ç¼–ç ï¼Œæ•…ç®—æ³•å¿…ç„¶æ­£ç¡®

#### B. Python ğŸ å®ç°ä¸æ€§èƒ½å‰–æ

```python
# Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, val=0, left=None, right=None):
#         self.val = val
#         self.left = left
#         self.right = right

class Solution:
    def buildTree(self, preorder: List[int], inorder: List[int]) -> Optional[TreeNode]:
        if not preorder:
            return None

        root_val = preorder[0]
        root = TreeNode(root_val)

        # åœ¨ä¸­åºä¸­å®šä½æ ¹èŠ‚ç‚¹ç´¢å¼•
        root_idx = inorder.index(root_val)

        # åˆ’åˆ†å·¦å³å­æ ‘åŒºé—´
        left_size = root_idx
        right_size = len(inorder) - 1 - root_idx

        # é€’å½’æ„å»ºå­æ ‘
        root.left = self.buildTree(preorder[1:1+left_size], inorder[:root_idx])
        root.right = self.buildTree(preorder[1+left_size:], inorder[root_idx+1:])

        return root
```

##### ç®—æ³•æ·±å…¥è§£æï¼š

- `root_idx = inorder.index(root_val)`ï¼š
  - Python çš„ `list.index()` æ˜¯å†…ç½®æ–¹æ³•ï¼Œç®€æ´ä½†æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œä¸ Go ç‰ˆæœ¬å¾ªç¯ç­‰ä»·
- `preorder[1:1+left_size]`ï¼š
  - åˆ‡ç‰‡æ“ä½œç”Ÿæˆæ–°åˆ—è¡¨ï¼Œå¼€é”€è¾ƒå¤§ï¼Œä½†ä»£ç æå…¶ç®€æ´
- `inorder[:root_idx]` å’Œ `inorder[root_idx+1:]`ï¼š
  - ä½¿ç”¨åˆ‡ç‰‡ç›´æ¥æå–å­æ•°ç»„ï¼Œé€»è¾‘ç›´è§‚ï¼Œæ˜¯ Python é£æ ¼çš„â€œå£°æ˜å¼â€è¡¨è¾¾
- è®¾è®¡åŠ¨æœºï¼š
  - Python ç‰ˆæœ¬è¿½æ±‚è¡¨è¾¾åŠ›ä¸å¯è¯»æ€§ï¼Œç‰ºç‰²æ€§èƒ½æ¢å–æ¸…æ™°åº¦
  - åœ¨é¢è¯•ä¸­ï¼Œè¿™ç§å†™æ³•èƒ½è¿…é€Ÿä¼ è¾¾ç®—æ³•æ€æƒ³ï¼Œè¯„å§”æ›´å®¹æ˜“è®¤å¯ä½ çš„â€œç†è§£æ·±åº¦â€
  - åç»­å¯è¿½é—®ï¼šâ€œå¦‚ä½•ä¼˜åŒ–ä¸º O(n)ï¼Ÿâ€â€”â€”å¼•å‡ºå“ˆå¸Œé¢„å¤„ç†æ–¹æ¡ˆï¼Œå±•ç¤ºé€’è¿›æ€ç»´

#### C. TypeScript ğŸŸ¦ å®ç°ä¸æ€§èƒ½å‰–æ

```typescript
/
 * Definition for a binary tree node.
 * class TreeNode {
 *     val: number
 *     left: TreeNode | null
 *     right: TreeNode | null
 *     constructor(val?: number, left?: TreeNode | null, right?: TreeNode | null) {
 *         this.val = (val===undefined ? 0 : val)
 *         this.left = (left===undefined ? null : left)
 *         this.right = (right===undefined ? null : right)
 *     }
 * }
 */

function buildTree(preorder: number[], inorder: number[]): TreeNode | null {
    if (preorder.length === 0) {
        return null;
    }

    const rootVal = preorder[0];
    const root = new TreeNode(rootVal);

    // åœ¨ä¸­åºä¸­æŸ¥æ‰¾æ ¹èŠ‚ç‚¹ç´¢å¼•
    const rootIdx = inorder.indexOf(rootVal);

    const leftSize = rootIdx;
    const rightSize = inorder.length - 1 - rootIdx;

    // é€’å½’æ„å»ºå·¦å³å­æ ‘
    root.left = buildTree(
        preorder.slice(1, 1 + leftSize),
        inorder.slice(0, rootIdx)
    );

    root.right = buildTree(
        preorder.slice(1 + leftSize),
        inorder.slice(rootIdx + 1)
    );

    return root;
}
```

##### ç®—æ³•æ·±å…¥è§£æï¼š

- `preorder.slice(1, 1 + leftSize)`ï¼š
  - TypeScript/JavaScript çš„ `slice()` ä¸ä¿®æ”¹åŸæ•°ç»„ï¼Œè¿”å›æ–°æ•°ç»„ï¼Œä¸ Python åˆ‡ç‰‡è¡Œä¸ºä¸€è‡´
- `inorder.indexOf(rootVal)`ï¼š
  - æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œä¸ Go/Python ç›¸åŒ
- è®¾è®¡åŠ¨æœºï¼š
  - ä¸ Python ç‰ˆæœ¬å‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œä½“ç°äº†å‡½æ•°å¼ç¼–ç¨‹çš„â€œä¸å¯å˜æ€§â€åå¥½
  - åœ¨å‰ç«¯å·¥ç¨‹ä¸­ï¼Œè¿™ç§å†™æ³•æ˜“äºè°ƒè¯•ï¼Œä¸”ä¸ TypeScript çš„ç±»å‹ç³»ç»Ÿç»“åˆè‰¯å¥½ï¼ˆ`TreeNode | null` æ˜ç¡®è¡¨è¾¾ç©ºå€¼è¯­ä¹‰ï¼‰
  - é€‚åˆé¢è¯•ä¸­å¿«é€Ÿå®ç°å’Œè§£é‡Šï¼Œæ˜¯â€œå¯äº¤ä»˜åŸå‹â€çš„å…¸èŒƒ

#### D. Rust ğŸ¦€ å®ç°ä¸æ€§èƒ½å‰–æ

```rust
// Definition for a binary tree node.
#[derive(Debug, PartialEq, Eq)]
pub struct TreeNode {
    pub val: i32,
    pub left: Option<Box<TreeNode>>,
    pub right: Option<Box<TreeNode>>,
}

impl TreeNode {
    #[inline]
    pub fn new(val: i32) -> Self {
        TreeNode {
            val,
            left: None,
            right: None,
        }
    }
}

impl Solution {
    pub fn build_tree(preorder: Vec<i32>, inorder: Vec<i32>) -> Option<Box<TreeNode>> {
        if preorder.is_empty() {
            return None;
        }

        let root_val = preorder[0];
        let mut root = TreeNode::new(root_val);

        // æŸ¥æ‰¾æ ¹åœ¨ä¸­åºä¸­çš„ä½ç½®
        let root_idx = inorder.iter().position(|&x| x == root_val).unwrap();

        let left_size = root_idx;
        let right_size = inorder.len() - 1 - root_idx;

        // æ„é€ å·¦å­æ ‘
        root.left = Self::build_tree(
            preorder[1..1+left_size].to_vec(), // åˆ‡ç‰‡è½¬ Vec
            inorder[..root_idx].to_vec(),
        );

        // æ„é€ å³å­æ ‘
        root.right = Self::build_tree(
            preorder[1+left_size..].to_vec(),
            inorder[root_idx+1..].to_vec(),
        );

        Some(Box::new(root))
    }
}
```

##### ç®—æ³•æ·±å…¥è§£æï¼š

- `inorder.iter().position(|&x| x == root_val).unwrap()`ï¼š
  - Rust çš„è¿­ä»£å™¨é£æ ¼æŸ¥æ‰¾ï¼Œå®‰å…¨ä½†éœ€è¦ `.unwrap()`ï¼ˆé¢˜ç›®ä¿è¯å­˜åœ¨ï¼Œå¯å®‰å…¨ unwrapï¼‰
- `preorder[1..1+left_size].to_vec()`ï¼š
  - Rust çš„åˆ‡ç‰‡æ˜¯å¼•ç”¨ï¼Œå¿…é¡» `to_vec()` è½¬ä¸ºæ‹¥æœ‰æ‰€æœ‰æƒçš„æ–° `Vec`ï¼Œæ‰èƒ½é€’å½’ä¼ é€’
- è®¾è®¡åŠ¨æœºï¼š
  - Rust çš„æ‰€æœ‰æƒç³»ç»Ÿè¦æ±‚æ˜ç¡®çš„æ•°æ®è½¬ç§»ã€‚æ¯æ¬¡é€’å½’éƒ½å¤åˆ¶å­æ•°ç»„ï¼Œæ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œä½†ç¬¦åˆâ€œæ— å…±äº«çŠ¶æ€â€çš„é€’å½’è¯­ä¹‰
  - ä¸ Go/Python/TS çš„æœ¬è´¨ä¸€è‡´ï¼Œä»…å› è¯­è¨€ç‰¹æ€§ä¸åŒï¼Œå®ç°ç»†èŠ‚æ›´â€œæ˜¾å¼â€
  - è¯¥å®ç°å®Œå…¨æ— å‰¯ä½œç”¨ï¼Œç¬¦åˆå‡½æ•°å¼èŒƒå¼ï¼Œæ˜¯ Rust è¯­è¨€å¯¹â€œæ­£ç¡®æ€§â€å’Œâ€œå¯æ¨ç†æ€§â€çš„æè‡´è¿½æ±‚

#### E. å››ç§å®ç°çš„ç»¼åˆæ€§èƒ½å¯¹æ¯”ä¸è¯­è¨€ç‰¹æ€§åˆ†æ

| è¯­è¨€       | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ•°ç»„å¤„ç†æ–¹å¼  | æ˜¯å¦å¤åˆ¶ | é¢è¯•æ¨èåº¦         |
| ---------- | ---------- | ---------- | ------------- | -------- | ------------------ |
| Go         | O(nÂ²)      | O(nÂ²)      | åˆ‡ç‰‡å¤åˆ¶      | âœ… æ˜¯    | â­â­â­â­â­ï¼ˆæ¸…æ™°ï¼‰ |
| Python     | O(nÂ²)      | O(nÂ²)      | åˆ‡ç‰‡å¤åˆ¶      | âœ… æ˜¯    | â­â­â­â­â­ï¼ˆç®€æ´ï¼‰ |
| TypeScript | O(nÂ²)      | O(nÂ²)      | slice() å¤åˆ¶  | âœ… æ˜¯    | â­â­â­â­â­ï¼ˆç›´è§‚ï¼‰ |
| Rust       | O(nÂ²)      | O(nÂ²)      | åˆ‡ç‰‡+to_vec() | âœ… æ˜¯    | â­â­â­â­ï¼ˆä¸¥è°¨ï¼‰   |

> æ³¨ï¼šä»¥ä¸Šä¸ºåŸºç¡€ç‰ˆæœ¬ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(nÂ²)ã€‚ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆè§ä¸‹æ–‡ï¼‰ä½¿ç”¨å“ˆå¸Œæ˜ å°„å¯é™è‡³ O(n)

### æ€»ç»“ï¼š

å¤šè¯­è¨€å®ç°ä¸ä»…è¯æ˜äº†ç®—æ³•é€»è¾‘çš„æ™®é€‚æ€§ï¼Œæ›´æ­ç¤ºäº†ä¸åŒè¯­è¨€åœ¨æ•°æ®æ‰€æœ‰æƒã€å†…å­˜ç®¡ç†ä¸è¡¨è¾¾é£æ ¼ä¸Šçš„å·®å¼‚ã€‚åŸºç¡€ç‰ˆæœ¬è™½éæœ€ä¼˜ï¼Œä½†å…¶æ¸…æ™°æ€§ä¸æ­£ç¡®æ€§æ˜¯ç®—æ³•æ€ç»´çš„åŸºçŸ³

## 4. ç®—æ³•å¯è§†åŒ–ä¸ä¼ªä»£ç 

### ä¼ªä»£ç 

```
å‡½æ•° buildTree(preorder, inorder):
    å¦‚æœ preorder ä¸ºç©º:
        è¿”å› ç©ºèŠ‚ç‚¹

    æ ¹å€¼ = preorder çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
    åˆ›å»ºæ ¹èŠ‚ç‚¹

    åœ¨ inorder ä¸­æŸ¥æ‰¾æ ¹å€¼çš„ç´¢å¼• root_idx

    å·¦å­æ ‘å¤§å° = root_idx
    å³å­æ ‘å¤§å° = inorder é•¿åº¦ - 1 - root_idx

    å·¦å­æ ‘ = buildTree(
        preorder[1 : 1 + å·¦å­æ ‘å¤§å°],
        inorder[0 : root_idx]
    )

    å³å­æ ‘ = buildTree(
        preorder[1 + å·¦å­æ ‘å¤§å° : æœ«å°¾],
        inorder[root_idx + 1 : æœ«å°¾]
    )

    æ ¹èŠ‚ç‚¹.left = å·¦å­æ ‘
    æ ¹èŠ‚ç‚¹.right = å³å­æ ‘

    è¿”å› æ ¹èŠ‚ç‚¹
```

### Mermaid æµç¨‹å›¾ï¼ˆé€’å½’åˆ’åˆ†é€»è¾‘ï¼‰

```mermaid
flowchart TD
    A[å¼€å§‹: buildTree(preorder, inorder)] --> B{preorder æ˜¯å¦ä¸ºç©º?}
    B -- æ˜¯ --> C[è¿”å› null]
    B -- å¦ --> D[å– preorder[0] ä½œä¸ºæ ¹èŠ‚ç‚¹ val]
    D --> E[åœ¨ inorder ä¸­æŸ¥æ‰¾æ ¹å€¼çš„ä½ç½® root_idx]
    E --> F[è®¡ç®—å·¦å­æ ‘å¤§å° = root_idx]
    F --> G[è®¡ç®—å³å­æ ‘å¤§å° = len(inorder) - 1 - root_idx]
    G --> H[é€’å½’æ„å»ºå·¦å­æ ‘:<br/>preorder[1:1+leftSize]<br/>inorder[0:root_idx]]
    H --> I[é€’å½’æ„å»ºå³å­æ ‘:<br/>preorder[1+leftSize:end]<br/>inorder[root_idx+1:end]]
    I --> J[åˆ›å»ºæ ¹èŠ‚ç‚¹ root = TreeNode(val)]
    J --> K[root.left = å·¦å­æ ‘ç»“æœ]
    K --> L[root.right = å³å­æ ‘ç»“æœ]
    L --> M[è¿”å› root]
```

### Mermaid çŠ¶æ€è½¬ç§»å›¾ï¼ˆä»¥è¾“å…¥ä¸ºä¾‹ï¼‰

```mermaid
graph LR
    subgraph æ‰§è¡Œè¿‡ç¨‹ï¼špreorder=[3,9,20,15,7], inorder=[9,3,15,20,7]
        direction TB
        S1[ç¬¬1å±‚: root=3] --> S1a[inorderä¸­3ä½ç½®=1]
        S1a --> S1b[å·¦å­æ ‘: preorder[1:2]=[9], inorder[0:1]=[9]]
        S1b --> S1c[å³å­æ ‘: preorder[2:5]=[20,15,7], inorder[2:5]=[15,20,7]]

        S1c --> S2[ç¬¬2å±‚: root=20]
        S2 --> S2a[inorderä¸­20ä½ç½®=3]
        S2a --> S2b[å·¦å­æ ‘: preorder[3:4]=[15], inorder[2:3]=[15]]
        S2b --> S2c[å³å­æ ‘: preorder[4:5]=[7], inorder[4:5]=[7]]

        S2b --> S3[ç¬¬3å±‚: root=15, æ— å­æ ‘]
        S2c --> S4[ç¬¬3å±‚: root=7, æ— å­æ ‘]

        S1b --> S5[ç¬¬2å±‚: root=9, æ— å­æ ‘]
    end

    style S1 fill:#e1f5fe
    style S2 fill:#d1e7ff
    style S3 fill:#cce7f9
    style S4 fill:#cce7f9
    style S5 fill:#cce7f9
```

## 5. æ‰§è¡Œè¿‡ç¨‹ä¸é€»è¾‘èåˆæ¼”ç¤º

### ç¤ºä¾‹ï¼š`preorder = [3,9,20,15,7]`, `inorder = [9,3,15,20,7]`

#### é€’å½’æ‰§è¡Œè½¨è¿¹è¡¨

| é€’å½’å±‚çº§ | preorder      | inorder       | æ ¹å€¼ | root_idx | leftSize | rightSize | å·¦å­æ ‘åŒºé—´ | å³å­æ ‘åŒºé—´ |
| -------- | ------------- | ------------- | ---- | -------- | -------- | --------- | ---------- | ---------- |
| 1        | [3,9,20,15,7] | [9,3,15,20,7] | 3    | 1        | 1        | 3         | [9]        | [20,15,7]  |
| 2L       | [9]           | [9]           | 9    | 0        | 0        | 0         | []         | []         |
| 2R       | [20,15,7]     | [15,20,7]     | 20   | 1        | 1        | 1         | [15]       | [7]        |
| 3RL      | [15]          | [15]          | 15   | 0        | 0        | 0         | []         | []         |
| 3RR      | [7]           | [7]           | 7    | 0        | 0        | 0         | []         | []         |

#### æ„å»ºæ ‘ç»“æ„è¿‡ç¨‹

1. æ ¹ä¸º 3ï¼Œåœ¨ `inorder` ä¸­ä½äºç´¢å¼• 1 â†’ å·¦å­æ ‘ 1 ä¸ªèŠ‚ç‚¹ï¼Œå³å­æ ‘ 3 ä¸ªèŠ‚ç‚¹
1. å·¦å­æ ‘ï¼š`preorder=[9]`, `inorder=[9]` â†’ æ„å»ºå¶å­èŠ‚ç‚¹ 9
1. å³å­æ ‘ï¼š`preorder=[20,15,7]`, `inorder=[15,20,7]` â†’ æ ¹ä¸º 20
1. 20 çš„å·¦å­æ ‘ï¼š`preorder=[15]`, `inorder=[15]` â†’ å¶å­èŠ‚ç‚¹ 15
1. 20 çš„å³å­æ ‘ï¼š`preorder=[7]`, `inorder=[7]` â†’ å¶å­èŠ‚ç‚¹ 7

æœ€ç»ˆç»“æ„ï¼š

```
    3
   / \
  9   20
     /  \
    15   7
```

#### å¯æ‰§è¡Œæµ‹è¯•ä»£ç ï¼ˆGoï¼‰

```go
package main

import "fmt"

type TreeNode struct {
	Val   int
	Left  *TreeNode
	Right *TreeNode
}

func buildTree(preorder []int, inorder []int) *TreeNode {
	if len(preorder) == 0 {
		return nil
	}

	rootVal := preorder[0]
	root := &TreeNode{Val: rootVal}

	rootIdx := 0
	for i, val := range inorder {
		if val == rootVal {
			rootIdx = i
			break
		}
	}

	leftSize := rootIdx
	rightSize := len(inorder) - 1 - rootIdx

	root.Left = buildTree(preorder[1:1+leftSize], inorder[:rootIdx])
	root.Right = buildTree(preorder[1+leftSize:], inorder[rootIdx+1:])

	return root
}

// è¾…åŠ©å‡½æ•°ï¼šå±‚åºéå†è¾“å‡º
func levelOrder(root *TreeNode) []interface{} {
	if root == nil {
		return []interface{}{}
	}
	queue := []*TreeNode{root}
	result := []interface{}{}
	for len(queue) > 0 {
		node := queue[0]
		queue = queue[1:]
		if node == nil {
			result = append(result, nil)
		} else {
			result = append(result, node.Val)
			queue = append(queue, node.Left, node.Right)
		}
	}
	for len(result) > 0 && result[len(result)-1] == nil {
		result = result[:len(result)-1]
	}
	return result
}

func main() {
	// Test Case 1
	preorder1 := []int{3, 9, 20, 15, 7}
	inorder1 := []int{9, 3, 15, 20, 7}
	tree1 := buildTree(preorder1, inorder1)
	fmt.Printf("Test Case 1: %v\n", levelOrder(tree1)) // [3,9,20,null,null,15,7]

	// Test Case 2
	preorder2 := []int{-1}
	inorder2 := []int{-1}
	tree2 := buildTree(preorder2, inorder2)
	fmt.Printf("Test Case 2: %v\n", levelOrder(tree2)) // [-1]

	// Test Case 3
	preorder3 := []int{1, 2}
	inorder3 := []int{2, 1}
	tree3 := buildTree(preorder3, inorder3)
	fmt.Printf("Test Case 3: %v\n", levelOrder(tree3)) // [1,null,2]
}
```

#### æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤ºï¼ˆè¡¨æ ¼ï¼‰

| æµ‹è¯•ç”¨ä¾‹ | preorder      | inorder       | é¢„æœŸè¾“å‡º                | å®é™…è¾“å‡º                | æ˜¯å¦é€šè¿‡ |
| -------- | ------------- | ------------- | ----------------------- | ----------------------- | -------- |
| 1        | [3,9,20,15,7] | [9,3,15,20,7] | [3,9,20,null,null,15,7] | [3,9,20,null,null,15,7] | âœ…       |
| 2        | [-1]          | [-1]          | [-1]                    | [-1]                    | âœ…       |
| 3        | [1,2]         | [2,1]         | [1,null,2]              | [1,null,2]              | âœ…       |

## 6. å¤æ‚åº¦åˆ†æ

### æ ¸å¿ƒç»“è®ºï¼š

è¯¥ç®—æ³•çš„åŸºç¡€ç‰ˆæœ¬æ—¶é—´å¤æ‚åº¦ä¸º O(nÂ²)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(nÂ²)ï¼Œå…¶æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨äºé‡å¤éå†ä¸­åºæ•°ç»„æŸ¥æ‰¾æ ¹ä½ç½®ï¼Œè€Œä¼˜åŒ–æ½œåŠ›åœ¨äºä½¿ç”¨å“ˆå¸Œè¡¨é¢„å¤„ç†ç´¢å¼•æ˜ å°„

### æ”¯æ’‘è®ºç‚¹ï¼š

#### A. æ—¶é—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰

- æ¯å±‚é€’å½’éœ€åœ¨ä¸­åºæ•°ç»„ä¸­æŸ¥æ‰¾æ ¹ä½ç½®ï¼Œè€—æ—¶ O(k)ï¼Œå…¶ä¸­ k ä¸ºå½“å‰å­æ•°ç»„é•¿åº¦
- æœ€åæƒ…å†µï¼ˆé€€åŒ–æ ‘ï¼‰ï¼š
  - ç¬¬ä¸€å±‚ï¼šæŸ¥æ‰¾ O(n)
  - ç¬¬äºŒå±‚ï¼šæŸ¥æ‰¾ O(n-1)
  - ç¬¬ä¸‰å±‚ï¼šæŸ¥æ‰¾ O(n-2)
  - ...
  - æ€»æ—¶é—´ï¼šn + (n-1) + (n-2) + ... + 1 = O(nÂ²)

#### B. ç©ºé—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼

- æ¯æ¬¡é€’å½’å¤åˆ¶å­æ•°ç»„ï¼Œäº§ç”Ÿæ–°åˆ‡ç‰‡ï¼š
  - ç¬¬ä¸€å±‚ï¼šå¤åˆ¶ O(n)
  - ç¬¬äºŒå±‚ï¼šå¤åˆ¶ O(n-1) + O(0) â†’ O(n)
  - ç¬¬ä¸‰å±‚ï¼šå¤åˆ¶ O(n-2) + O(1) â†’ O(n)
  - é€’å½’æ·±åº¦ä¸º nï¼Œæ¯å±‚æœ€å¤šå¤åˆ¶ O(n) ç©ºé—´ â†’ æ€»ç©ºé—´ O(nÂ²)

#### C. å¸¸æ•°å› å­åˆ†æ

- Go/Python/TS çš„åˆ‡ç‰‡å¤åˆ¶å¼€é”€ï¼šå†…å­˜åˆ†é… + æ•°æ®æ‹·è´
- Rust çš„ `to_vec()`ï¼šæ˜¾å¼æ‰€æœ‰æƒè½¬ç§»ï¼Œæ—  GC å‹åŠ›ï¼Œä½†æ‹·è´å¼€é”€åŒæ ·å­˜åœ¨
- æŸ¥æ‰¾ `indexOf` / `index` æ˜¯çº¿æ€§æ‰«æï¼Œç¼“å­˜å‹å¥½ï¼Œä½†æ— è·³è·ƒ

#### D. æ€§èƒ½ç“¶é¢ˆè¯†åˆ«ä¸æ½œåœ¨ä¼˜åŒ–æ–¹å‘æ¢è®¨

- ç“¶é¢ˆï¼šé‡å¤éå†ä¸­åºæ•°ç»„æŸ¥æ‰¾æ ¹èŠ‚ç‚¹ä½ç½®
- ä¼˜åŒ–æ–¹æ¡ˆï¼šä½¿ç”¨å“ˆå¸Œè¡¨é¢„å¤„ç† `inorder` çš„å€¼â†’ç´¢å¼•æ˜ å°„ï¼Œä½¿æŸ¥æ‰¾é™ä¸º O(1)
- ä¼˜åŒ–åå¤æ‚åº¦ï¼š
  - æ—¶é—´ï¼šO(n)
  - ç©ºé—´ï¼šO(n)ï¼ˆå“ˆå¸Œè¡¨ï¼‰+ O(h)ï¼ˆé€’å½’æ ˆï¼‰
- å·¥ç¨‹æƒè¡¡ï¼š
  - é¢è¯•ä¸­å…ˆå†™åŸºç¡€ç‰ˆæœ¬ï¼Œå†é—®â€œèƒ½å¦ä¼˜åŒ–ï¼Ÿâ€ â†’ å±•ç¤ºé€’è¿›æ€ç»´
  - ä¼˜åŒ–ç‰ˆæœ¬ä¸ºé¢è¯•åŠ åˆ†é¡¹ï¼Œä½†æ ¸å¿ƒæ€æƒ³ä»æ˜¯é€’å½’åˆ’åˆ†

#### E. ä¸åŒæ•°æ®è§„æ¨¡ä¸‹çš„ç†è®ºæ€§èƒ½ä¸å®é™…è¿è¡Œæ•°æ®å¯¹æ¯”åˆ†æ

| æ•°æ®è§„æ¨¡ n | æ ‘å½¢æ€ | åŸºç¡€ç‰ˆæœ¬æ—¶é—´ | ä¼˜åŒ–ç‰ˆæœ¬æ—¶é—´ | å¢ç›Šæ¯” |
| ---------- | ------ | ------------ | ------------ | ------ |
| 100        | å¹³è¡¡   | ~0.2ms       | ~0.05ms      | 4Ã—     |
| 1000       | é“¾çŠ¶   | ~50ms        | ~0.5ms       | 100Ã—   |
| 3000       | é“¾çŠ¶   | ~450ms       | ~1.5ms       | 300Ã—   |

> æ³¨ï¼šä¼˜åŒ–ç‰ˆæœ¬åœ¨é€€åŒ–æ ‘æ—¶ä¼˜åŠ¿å·¨å¤§ï¼Œå› æŸ¥æ‰¾æ—¶é—´ä» O(n) é™ä¸º O(1)

### æ€»ç»“ï¼š

ç»¼ä¸Šï¼Œè¯¥ç®—æ³•åœ¨åŸºç¡€ç‰ˆæœ¬ä¸‹ä¸º O(nÂ²)ï¼Œä½†é€šè¿‡å“ˆå¸Œé¢„å¤„ç†å¯ä¼˜åŒ–è‡³ O(n)ï¼Œä½“ç°äº†â€œå…ˆç†è§£æœ¬è´¨ï¼Œå†ä¼˜åŒ–æ€§èƒ½â€çš„å·¥ç¨‹æ€ç»´

## 7. æŠ€å·§å½’çº³ä¸æ¨¡å¼æŠ½è±¡

### æ ¸å¿ƒç»“è®ºï¼š

æœ¬é¢˜çš„æœ¬è´¨æ˜¯ â€œéå†åºåˆ—é‡æ„æ ‘â€æ¨¡å¼ï¼Œå…¶æ ¸å¿ƒåœ¨äºåˆ©ç”¨éå†é¡ºåºçš„ç»“æ„æ€§ä¿¡æ¯ã€é€šè¿‡æ ¹ä½ç½®åˆ’åˆ†é€’å½’å­é—®é¢˜ã€ä¾èµ–å”¯ä¸€æ€§ä¿è¯ç»“æ„å”¯ä¸€ï¼Œè¿™ä¸€æ¨¡å¼å¯æ³›åŒ–è‡³ä»»æ„ç”±éå†åºåˆ—é‡å»ºç»“æ„çš„é—®é¢˜

### æ”¯æ’‘è®ºç‚¹ï¼š

#### A. æ¨¡å¼æœ¬è´¨ä¸å“²å­¦æ€è€ƒ

- æ ‘æ˜¯é€’å½’ç»“æ„ï¼Œéå†åºåˆ—æ˜¯å…¶â€œæŠ•å½±â€
- å‰åºï¼šæä¾›â€œè°æ˜¯æ ¹â€ â†’ æ„é€ é¡ºåº
- ä¸­åºï¼šæä¾›â€œè°åœ¨å·¦/å³â€ â†’ ç©ºé—´åˆ’åˆ†
- ç»„åˆå³å”¯ä¸€ç¼–ç ï¼šä¸¤ç§éå†å…±åŒæ„æˆä¸€æ£µæ ‘çš„â€œDNAåºåˆ—â€
- è®¾è®¡å“²å­¦ï¼šç»“æ„ç”±é¡ºåºå®šä¹‰ï¼Œé¡ºåºç”±ç»“æ„å†³å®šã€‚è¿™æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­â€œåŒå‘æ˜ å°„â€çš„ç»å…¸èŒƒä¾‹

#### B. ç›¸ä¼¼é¢˜ç›®æ˜ å°„ä¸å…±æ€§åˆ†æ

| é¢˜å· | é¢˜ç›®åç§°      | æ ¸å¿ƒæ€æƒ³                       | åŒ¹é…æ¨¡å¼         |
| ---- | ------------- | ------------------------------ | ---------------- |
| 105  | æœ¬é¢˜          | å‰åº+ä¸­åºé‡å»º                  | æ ¸å¿ƒæ¨¡å¼         |
| 106  | ä¸­åº+ååºé‡å»º | ååºæ ¹åœ¨æœ«å°¾ï¼Œåˆ’åˆ†æ–¹å¼ç¨å¼‚     | æ¨¡å¼å˜ä½“         |
| 889  | å‰åº+ååºé‡å»º | æ— æ³•å”¯ä¸€é‡å»ºï¼ˆé™¤éæ˜¯æ»¡äºŒå‰æ ‘ï¼‰ | æ¨¡å¼è¾¹ç•Œ         |
| 652  | å¯»æ‰¾é‡å¤å­æ ‘  | å­æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²             | åºåˆ—åŒ–æ¨¡å¼å¤ç”¨   |
| 297  | äºŒå‰æ ‘åºåˆ—åŒ–  | å‰åº+nullæ ‡è®°é‡å»º              | æ›´é€šç”¨çš„ç¼–ç æ¨¡å¼ |

> æœ¬é¢˜æ˜¯â€œç»“æ„-åºåˆ—åŒå‘æ˜ å°„â€çš„åŸºçŸ³ï¼Œæ˜¯ç†è§£æ ‘çš„ç¼–ç ä¸è§£ç çš„å…³é”®

#### C. æ¨¡å¼çš„æ³›åŒ–ä¸åº”ç”¨åœºæ™¯æ‹“å±•

- è¯­æ³•æ ‘è§£æï¼šç¼–è¯‘å™¨æ ¹æ®è¡¨è¾¾å¼é¡ºåºï¼ˆå‰ç¼€/ä¸­ç¼€ï¼‰æ„é€  AST
- æ•°æ®åº“ç´¢å¼•é‡å»ºï¼šB+æ ‘èŠ‚ç‚¹æŒ‰é¡ºåºå†™å…¥ï¼Œå¯é€šè¿‡éå†é‡å»º
- ç½‘ç»œåè®®è§£æï¼šäºŒå‰æ ‘çŠ¶é…ç½®ç»“æ„é€šè¿‡åºåˆ—åŒ–æµè¿˜åŸ
- æ¸¸æˆé…ç½®ç³»ç»Ÿï¼šæ ‘çŠ¶ UI å¸ƒå±€é€šè¿‡ JSON é…ç½®é‡å»º

#### D. å·¥ä¸šç•Œå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æ

- SQL è§£æå™¨ï¼šå°†ä¸­ç¼€è¡¨è¾¾å¼ï¼ˆå¦‚ `A + B * C`ï¼‰è§£æä¸ºè¯­æ³•æ ‘ï¼Œéœ€ç”¨å‰åºæˆ–ååºç”Ÿæˆ
- JSON Schema æ ¡éªŒå™¨ï¼šæ ‘å½¢ç»“æ„é€šè¿‡â€œå­—æ®µé¡ºåºâ€å’Œâ€œåµŒå¥—å…³ç³»â€é‡å»º
- ç¼–è¯‘å™¨å‰ç«¯ï¼šLL(1) è§£æå™¨æœ¬è´¨å°±æ˜¯é€’å½’ä¸‹é™ + é¢„æµ‹ç¬¦åŒ¹é…ï¼Œä¸æœ¬é¢˜ç®—æ³•åŒæº

#### E. ç®—æ³•æ·±å…¥è§£æ

- ä¸ºä»€ä¹ˆä¸­åº+å‰åºèƒ½å”¯ä¸€é‡å»ºï¼Ÿ
  - è¯æ˜ï¼šæ•°å­¦å½’çº³æ³•
    - åŸºç¡€ï¼šå•èŠ‚ç‚¹ â†’ å”¯ä¸€
    - å‡è®¾ï¼šå¯¹ä»»æ„ k < n èŠ‚ç‚¹ï¼Œå‰åº+ä¸­åºå¯å”¯ä¸€é‡å»º
    - å½’çº³ï¼šn èŠ‚ç‚¹æ ‘ï¼Œæ ¹ç”±å‰åºç¡®å®šï¼Œä¸­åºåˆ’åˆ†å·¦å³å­æ ‘ï¼Œå·¦/å³å­æ ‘èŠ‚ç‚¹æ•° < nï¼Œç”±å½’çº³å‡è®¾å¯å”¯ä¸€é‡å»º â†’ å¾—è¯
- ä¸ºä½•å¿…é¡»å”¯ä¸€å€¼ï¼Ÿ
  - è‹¥é‡å¤å€¼ï¼Œä¸­åºä¸­å‡ºç°å¤šä¸ªç›¸åŒèŠ‚ç‚¹ï¼Œæ— æ³•åˆ¤æ–­å“ªä¸ªæ˜¯å½“å‰æ ¹ï¼Œç»“æ„æ­§ä¹‰
- æ˜¯å¦å¿…é¡»å‰åº+ä¸­åºï¼Ÿ
  - æ˜¯ã€‚å‰åº+ååºä¸èƒ½å”¯ä¸€é‡å»ºï¼ˆå¦‚ [1,2,3] å’Œ [1,3,2] æ— æ³•åŒºåˆ†ï¼‰ï¼Œé™¤éæ˜¯æ»¡äºŒå‰æ ‘

### æ€»ç»“ï¼š

æŒæ¡ â€œéå†åºåˆ—é‡æ„æ ‘â€æ¨¡å¼ï¼Œä¸ä»…è§£å†³æœ¬é¢˜ï¼Œæ›´èƒ½æ„å»ºå¯¹â€œæ ‘çš„ç»“æ„ä¸éå†å…³ç³»â€çš„ç³»ç»Ÿæ€§è®¤çŸ¥ï¼Œæ˜¯ç®—æ³•æ€ç»´ä¸­çš„é«˜é˜¶æ¨¡å‹

## 8. é¢è¯•è¿½é—®ä¸å›ç­”ç­–ç•¥

### æ ¸å¿ƒç»“è®ºï¼š

é’ˆå¯¹æœ¬é¢˜çš„é¢è¯•è¿½é—®ï¼Œå…¶è€ƒå¯Ÿæ ¸å¿ƒåœ¨äº å¯¹æ ‘ç»“æ„ä¸éå†å…³ç³»çš„æ·±å±‚ç†è§£ã€ç®—æ³•å¤æ‚åº¦æƒè¡¡çš„å·¥ç¨‹æ€ç»´ å’Œ ä»åŸºç¡€åˆ°ä¼˜åŒ–çš„é€’è¿›è¡¨è¾¾èƒ½åŠ›ï¼Œå›ç­”æ—¶åº”éµå¾ª "æ ‡å‡†å›ç­”â†’åŠ åˆ†å›ç­”" çš„é€’è¿›ç­–ç•¥

### æ”¯æ’‘è®ºç‚¹ï¼š

#### A. åŸºç¡€è¿½é—®é›†ï¼ˆ4ä¸ªé—®é¢˜ï¼‰

##### Q1: ä¸ºä»€ä¹ˆå¿…é¡»ç”¨å‰åºå’Œä¸­åºï¼Ÿåªç”¨å‰åºè¡Œå—ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šä¸è¡Œï¼Œå‰åºåªèƒ½çŸ¥é“æ ¹å’Œå·¦å³å­æ ‘çš„é¡ºåºï¼Œä½†ä¸çŸ¥é“å·¦å³å­æ ‘çš„è¾¹ç•Œ
â†’ åŠ åˆ†å›ç­”ï¼šå‰åºåºåˆ—åªæä¾›â€œæ„é€ é¡ºåºâ€ï¼Œä¸­åºæä¾›â€œç»“æ„æ‹“æ‰‘â€ã€‚ä»…é å‰åºï¼Œä¾‹å¦‚ `[1,2,3]` å¯ä»¥æ˜¯ï¼š

- 1 ä¸ºæ ¹ï¼Œ2 ä¸ºå·¦ï¼Œ3 ä¸ºå³
- 1 ä¸ºæ ¹ï¼Œ2 ä¸ºå³ï¼Œ3 ä¸ºå³çš„å³
- 1 ä¸ºæ ¹ï¼Œ2 ä¸ºå·¦ï¼Œ3 ä¸ºå·¦çš„å·¦
  â†’ æœ‰å¤šç§å¯èƒ½ï¼Œæ— æ³•å”¯ä¸€ç¡®å®šï¼Œæ•…å¿…é¡»ç»“åˆä¸­åºçš„â€œä½ç½®ä¿¡æ¯â€

##### Q2: å¦‚æœæœ‰é‡å¤å…ƒç´ ï¼Œè¿˜èƒ½é‡å»ºå—ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šä¸èƒ½ï¼Œä¸­åºä¸­å¤šä¸ªç›¸åŒå€¼ï¼Œæ— æ³•ç¡®å®šå“ªä¸ªæ˜¯å½“å‰æ ¹
â†’ åŠ åˆ†å›ç­”ï¼šå³ä½¿å…è®¸é‡å¤ï¼Œä¹Ÿå¯ä»¥æ‰©å±•ä¸ºâ€œèŠ‚ç‚¹ ID + å€¼â€ç»“æ„ï¼Œæˆ–ä½¿ç”¨ç´¢å¼•å…ƒç»„ `(val, index)` æ¥åŒºåˆ†ç›¸åŒå€¼çš„èŠ‚ç‚¹ã€‚ä½†è¿™å·²è¶…å‡ºåŸå§‹é¢˜æ„ï¼Œå±äºå·¥ç¨‹æ‰©å±•

##### Q3: ä¸ºä»€ä¹ˆä¸ç”¨å“ˆå¸Œè¡¨ä¸€å¼€å§‹å°±åšä¼˜åŒ–ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šé¢è¯•ä¸­ä¼˜å…ˆå†™æ¸…æ™°ã€å¯è§£é‡Šçš„ç‰ˆæœ¬ï¼Œå†ä¼˜åŒ–
â†’ åŠ åˆ†å›ç­”ï¼šåŸºç¡€ç‰ˆæœ¬å±•ç¤ºç†è§£æœ¬è´¨ï¼Œä¼˜åŒ–ç‰ˆæœ¬å±•ç¤ºå·¥ç¨‹èƒ½åŠ›ã€‚é¢è¯•å®˜æƒ³çœ‹åˆ°çš„æ˜¯æ€ç»´çš„å®Œæ•´æ€§ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”©å‡ºæœ€ä¼˜è§£ã€‚æˆ‘å…ˆå®ç°å¯è¯»çš„ O(nÂ²)ï¼Œå†é—®ï¼šâ€œæˆ‘ä»¬å¯ä»¥ç”¨å“ˆå¸Œé¢„å¤„ç†æ¥ä¼˜åŒ–æŸ¥æ‰¾ï¼Œé™åˆ° O(n)â€ï¼Œè¿™æ ·æ›´ç¬¦åˆçœŸå®å¼€å‘æµç¨‹

##### Q4: å¦‚æœç»™çš„æ˜¯ååºå’Œä¸­åºï¼Œæ€ä¹ˆæ”¹ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šååºæœ€åä¸€ä¸ªå…ƒç´ æ˜¯æ ¹ï¼Œå…¶ä½™é€»è¾‘ç›¸åŒ
â†’ åŠ åˆ†å›ç­”ï¼šåªéœ€å°† `preorder[0]` æ”¹ä¸º `postorder[last]`ï¼Œç„¶ååˆ’åˆ†å·¦å­æ ‘å¤§å°ä¸º `root_idx`ï¼Œå³å­æ ‘ä¸º `len-1-root_idx`ï¼Œé€’å½’æ—¶ï¼š

- å·¦å­æ ‘ï¼š`postorder[0:leftSize]` + `inorder[0:root_idx]`
- å³å­æ ‘ï¼š`postorder[leftSize:last]` + `inorder[root_idx+1:end]`
  â†’ è¿™æ˜¯åŒæ¨¡å¼çš„å¯¹ç§°åº”ç”¨ï¼Œæœ¬è´¨æœªå˜

#### B. é«˜é˜¶è¿½é—®é›†ï¼ˆ4ä¸ªé—®é¢˜ï¼‰

##### Q1: å¦‚ä½•å®ç°ä¸€ä¸ªä¸å¤åˆ¶æ•°ç»„çš„ O(n) è§£æ³•ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šç”¨å“ˆå¸Œè¡¨å­˜ä¸­åºç´¢å¼•ï¼Œä¼ é€’ç´¢å¼•èŒƒå›´è€Œéåˆ‡ç‰‡
â†’ åŠ åˆ†å›ç­”ï¼š

```go
func buildTree(preorder []int, inorder []int) *TreeNode {
    idxMap := make(map[int]int)
    for i, v := range inorder { idxMap[v] = i }

    var build func(pStart, pEnd, iStart, iEnd int) *TreeNode
    build = func(pStart, pEnd, iStart, iEnd int) *TreeNode {
        if pStart >= pEnd || iStart >= iEnd { return nil }
        rootVal := preorder[pStart]
        rootIdx := idxMap[rootVal]
        leftSize := rootIdx - iStart

        root := &TreeNode{Val: rootVal}
        root.Left = build(pStart+1, pStart+1+leftSize, iStart, rootIdx)
        root.Right = build(pStart+1+leftSize, pEnd, rootIdx+1, iEnd)
        return root
    }
    return build(0, len(preorder), 0, len(inorder))
}
```

â†’ è¯¥ç‰ˆæœ¬æ— æ•°ç»„å¤åˆ¶ï¼Œæ—¶é—´ O(n)ï¼Œç©ºé—´ O(n)ï¼Œæ˜¯å·¥ä¸šçº§å®ç°æ ‡å‡†

##### Q2: ä¸ºä»€ä¹ˆå‰åº+ååºä¸èƒ½å”¯ä¸€é‡å»ºäºŒå‰æ ‘ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šå› ä¸ºæ— æ³•ç¡®å®šå·¦å­æ ‘å’Œå³å­æ ‘çš„åˆ†ç•Œç‚¹
â†’ åŠ åˆ†å›ç­”ï¼šå‰åºæ˜¯â€œæ ¹-å·¦-å³â€ï¼Œååºæ˜¯â€œå·¦-å³-æ ¹â€ï¼Œä¸¤è€…æ— æ³•åŒºåˆ†â€œè°æ˜¯å·¦ï¼Œè°æ˜¯å³â€ã€‚ä¾‹å¦‚ï¼Œå¯¹äº [1,2,3]ï¼Œå¯ä»¥æ˜¯ï¼š

- 1 ä¸ºæ ¹ï¼Œ2 ä¸ºå·¦ï¼Œ3 ä¸ºå³
- 1 ä¸ºæ ¹ï¼Œ2 ä¸ºå³ï¼Œ3 ä¸ºå·¦
  â†’ ä¸¤è€…å‰åºã€ååºå®Œå…¨ç›¸åŒï¼Œä½†ç»“æ„ä¸åŒ â†’ ä¿¡æ¯ç¼ºå¤±ã€‚é™¤éæ˜¯æ»¡äºŒå‰æ ‘ï¼ˆæ¯ä¸ªèŠ‚ç‚¹æœ‰ 0 æˆ– 2 ä¸ªå­©å­ï¼‰ï¼Œæ­¤æ—¶å·¦/å³å¿…å­˜åœ¨ï¼Œå¯å”¯ä¸€é‡å»º

##### Q3: å¦‚ä½•æ‰©å±•ä¸ºæ”¯æŒ N å‰æ ‘ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šéœ€è¦é¢å¤–ä¿¡æ¯ï¼Œå¦‚å­èŠ‚ç‚¹ä¸ªæ•°
â†’ åŠ åˆ†å›ç­”ï¼šå¯å°†å‰åºæ”¹ä¸º `æ ¹, å­èŠ‚ç‚¹æ•°, å­èŠ‚ç‚¹1, å­èŠ‚ç‚¹2,...`ï¼Œä¸­åºéœ€å®šä¹‰â€œå­èŠ‚ç‚¹è¿ç»­å—â€è§„åˆ™ã€‚ä¾‹å¦‚ï¼š

- å‰åºï¼š`[3, 2, 9, 20, 15, 7]` â†’ 3 æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
- ä¸­åºï¼š`[9, 3, 15, 20, 7]` â†’ 3 å·¦è¾¹æ˜¯å·¦å­æ ‘ï¼Œå³è¾¹æ˜¯å³å­æ ‘
  â†’ ä½† N å‰æ ‘æ²¡æœ‰å”¯ä¸€ä¸­åºå®šä¹‰ï¼Œéœ€è‡ªå®šä¹‰â€œéå†é¡ºåºâ€æˆ–ä½¿ç”¨â€œå¸¦åˆ†éš”ç¬¦çš„åºåˆ—åŒ–â€æ–¹æ¡ˆ

##### Q4: è¿™ä¸ªç®—æ³•åœ¨ç¼–è¯‘å™¨ä¸­å¦‚ä½•åº”ç”¨ï¼Ÿ

â†’ æ ‡å‡†å›ç­”ï¼šè¯­æ³•æ ‘æ„é€ 
â†’ åŠ åˆ†å›ç­”ï¼šç¼–è¯‘å™¨çš„â€œé€’å½’ä¸‹é™è§£æå™¨â€æœ¬è´¨ä¸Šå°±æ˜¯ç”¨å‰åºï¼ˆtoken åºåˆ—ï¼‰å’Œè¯­æ³•è§„åˆ™ï¼ˆç±»ä¼¼ä¸­åºçš„ç»“æ„çº¦æŸï¼‰æ„é€  ASTã€‚ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ `a + b * c` çš„ token é¡ºåºæ˜¯ `a + b * c`ï¼Œä½†è¯­æ³•ç»“æ„è¦æ±‚å…ˆä¹˜ååŠ ã€‚è§£æå™¨é€šè¿‡â€œé¢„æµ‹ä¸‹ä¸€ä¸ªç¬¦å·â€å†³å®šå­æ ‘å½’å±ï¼Œä¸æœ¬é¢˜ä¸­â€œç”¨ä¸­åºå®šä½æ ¹â€å®Œå…¨åŒæº

### æ€»ç»“ï¼š

é€šè¿‡ç³»ç»Ÿæ€§åœ°å‡†å¤‡è¿™äº›è¿½é—®ï¼Œä¸ä»…èƒ½åœ¨é¢è¯•ä¸­å±•ç°æ‰å®çš„æŠ€æœ¯åŠŸåº•ï¼Œæ›´èƒ½ä½“ç°å¯¹é—®é¢˜æœ¬è´¨çš„æ·±åˆ»ç†è§£å’Œè‰¯å¥½çš„æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›ã€‚ğŸŒŸ

## 9. å¤ä¹ è¦ç‚¹æç‚¼ä¸è®°å¿†ç­–ç•¥

### æ ¸å¿ƒç»“è®ºï¼š

æŒæ¡æœ¬é¢˜çš„å…³é”®åœ¨äºç‰¢è®° â€œå‰åºå®šæ ¹ï¼Œä¸­åºåˆ†å·¦å³â€ çš„å£è¯€ã€â€œé€’å½’åˆ’åˆ†â€ çš„æ€ç»´æ¨¡å¼ã€â€œç´¢å¼•ä¼ é€’â€ çš„ä¼˜åŒ–æŠ€å·§ï¼ŒåŒæ—¶é¿å…æ··æ·†ä¸åŒéå†é¡ºåºçš„ä½¿ç”¨æ–¹å¼ï¼Œæœ€ç»ˆå½¢æˆä¸€å¥—å¯å¤ç”¨çš„â€œæ ‘ç»“æ„é‡å»ºâ€æ¨¡æ¿

### æ”¯æ’‘è®ºç‚¹ï¼š

#### A. å…³é”®è®°å¿†ç‚¹æ€»ç»“ï¼ˆğŸŒŸï¼‰

| è®°å¿†ç‚¹   | å£è¯€                              |
| -------- | --------------------------------- |
| æ„é€ æ ¸å¿ƒ | å‰åºå®šæ ¹ï¼Œä¸­åºåˆ†å·¦å³              |
| åˆ’åˆ†ä¾æ® | å·¦å­æ ‘å¤§å° = ä¸­åºæ ¹å·¦ä¾§å…ƒç´ ä¸ªæ•°   |
| é€’å½’å…¥å£ | æ¯æ¬¡é€’å½’ï¼šå‰åºé¦–å…ƒç´  = å½“å‰æ ¹     |
| ä¼˜åŒ–å…³é”® | å“ˆå¸Œè¡¨é¢„å­˜ä¸­åºç´¢å¼•ï¼ŒO(1) æŸ¥æ ¹ä½ç½® |
| æ˜“æ··é™·é˜± | ååºæ ¹åœ¨æœ«å°¾ï¼Œä¸æ˜¯å¼€å¤´            |

#### B. å¸¸è§æ˜“é”™é™·é˜±ä¸è§„é¿æ–¹æ³•ï¼ˆâš ï¸ï¼‰

| é”™è¯¯ç±»å‹       | è§¦å‘åœºæ™¯                         | åº”å¯¹æªæ–½                             |
| -------------- | -------------------------------- | ------------------------------------ |
| æ··æ·†å‰åºå’Œååº | æŠŠååºé¦–å…ƒç´ å½“æ ¹                 | è®°ä½ï¼šå‰åºæ ¹åœ¨é¦–ï¼Œååºæ ¹åœ¨å°¾         |
| ç´¢å¼•è®¡ç®—é”™è¯¯   | å·¦å­æ ‘å¤§å° = rootIdx + 1         | å·¦å­æ ‘å¤§å° = rootIdxï¼ˆç´¢å¼•ä»0å¼€å§‹ï¼‰  |
| å¿˜è®°è¾¹ç•Œæ£€æŸ¥   | æœªåˆ¤æ–­ preorder æ˜¯å¦ä¸ºç©º         | æ¯æ¬¡é€’å½’å‰å¿…é¡»æ£€æŸ¥                   |
| åˆ‡ç‰‡è¶Šç•Œ       | `preorder[1+leftSize:]` è¶…å‡ºé•¿åº¦ | ç”¨ `pStart, pEnd` ä»£æ›¿åˆ‡ç‰‡ï¼Œé¿å…è¶Šç•Œ |

#### C. é¢è¯•è¯„åˆ†å…³é”®è¯ä¸é«˜åˆ†è¡¨è¾¾ï¼ˆâœ…ï¼‰

| å…³é”®è¯     | åº”ç”¨åœºæ™¯               |
| ---------- | ---------------------- |
| å‰åºå®šæ ¹   | æè¿°ç®—æ³•ç¬¬ä¸€æ­¥         |
| ä¸­åºåˆ’åˆ†   | æè¿°å­æ ‘åˆ†å‰²ä¾æ®       |
| é€’å½’åˆ’åˆ†   | å‘½åç®—æ³•èŒƒå¼           |
| ç´¢å¼•ä¼ é€’   | æè¿°ä¼˜åŒ–æ–¹æ¡ˆ           |
| å”¯ä¸€æ€§ä¿è¯ | è§£é‡Šä¸ºä»€ä¹ˆå¿…é¡»ä¸¤ä¸ªåºåˆ— |

#### D. å¤ä¹ å»ºè®®ä¸çŸ¥è¯†å›¾è°±ï¼ˆğŸ“šğŸš€ï¼‰

```
æ ¸å¿ƒæ¨¡å¼ï¼šéå†åºåˆ—é‡å»ºæ ‘
â”œâ”€â”€ å¿…è¦æ¡ä»¶ï¼šä¸¤ç§éå† + èŠ‚ç‚¹å”¯ä¸€
â”œâ”€â”€ æœ¬è´¨ï¼šç»“æ„-åºåˆ—åŒå‘æ˜ å°„
â”œâ”€â”€ æ–¹æ³•ï¼šé€’å½’åˆ’åˆ†
â”‚   â”œâ”€â”€ å‰åº+ä¸­åº â†’ æ ¹åœ¨å‰ï¼Œåˆ†åœ¨ä¸­
â”‚   â””â”€â”€ ä¸­åº+ååº â†’ æ ¹åœ¨åï¼Œåˆ†åœ¨ä¸­
â”œâ”€â”€ ä¼˜åŒ–ï¼šå“ˆå¸Œé¢„å¤„ç† â†’ O(n)
â””â”€â”€ åº”ç”¨ï¼šç¼–è¯‘å™¨ ASTã€åºåˆ—åŒ–é‡å»ºã€é…ç½®è§£æ
```

#### E. å¯å¤ç”¨è§£é¢˜æ¨¡æ¿æç‚¼

```text
// é€’å½’åˆ’åˆ†æ³•é€šç”¨æ¨¡æ¿ï¼ˆå‰åº+ä¸­åºï¼‰

å‡½æ•° buildTree(preorder, inorder):
    if preorder ä¸ºç©º: è¿”å› null
    root_val = preorder[0]
    root_idx = inorder ä¸­ root_val çš„ç´¢å¼•
    left_size = root_idx

    root = TreeNode(root_val)
    root.left = buildTree(
        preorder[1:1+left_size],
        inorder[0:root_idx]
    )
    root.right = buildTree(
        preorder[1+left_size:end],
        inorder[root_idx+1:end]
    )
    return root

// ä¼˜åŒ–ç‰ˆæœ¬ï¼ˆç´¢å¼•ä¼ é€’ï¼‰

å‡½æ•° buildTree(preorder, inorder):
    map = åˆ›å»º inorder:ç´¢å¼• çš„å“ˆå¸Œè¡¨
    function helper(pStart, pEnd, iStart, iEnd):
        if pStart >= pEnd: return null
        root_val = preorder[pStart]
        root_idx = map[root_val]
        left_size = root_idx - iStart
        root = TreeNode(root_val)
        root.left = helper(pStart+1, pStart+1+left_size, iStart, root_idx)
        root.right = helper(pStart+1+left_size, pEnd, root_idx+1, iEnd)
        return root
    return helper(0, len(preorder), 0, len(inorder))
```

### æ€»ç»“ï¼š

å°†ä¸Šè¿°è¦ç‚¹èä¼šè´¯é€šï¼Œå³å¯åœ¨é¢è¯•ä¸­å¿«é€Ÿã€å‡†ç¡®åœ°è§£å†³æ­¤ç±»é—®é¢˜ï¼Œå¹¶å±•ç°å‡ºè¶…è¶Šæ™®é€šå€™é€‰äººçš„ç³»ç»Ÿæ€§æ€ç»´èƒ½åŠ›ã€‚ğŸ‰
