# LeetCode 1804 - å®ç° Trieï¼ˆå‰ç¼€æ ‘ï¼‰II

## Step 1ï¼šé¢˜ç›®æè¿°

è¯·ä½ å®ç°ä¸€ä¸ª Trieï¼ˆå‰ç¼€æ ‘ï¼‰ æ•°æ®ç»“æ„ï¼Œæ”¯æŒä»¥ä¸‹æ“ä½œï¼š

- `Trie()` åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡
- `void insert(String word)` å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² `word`
- `int countWordsEqualTo(String word)` è¿”å›æ°å¥½ç­‰äº `word` çš„å­—ç¬¦ä¸²ä¸ªæ•°ï¼ˆå…è®¸é‡å¤æ’å…¥ï¼‰
- `int countWordsStartingWith(String prefix)` è¿”å›ä»¥ `prefix` ä¸ºå‰ç¼€çš„å­—ç¬¦ä¸²ä¸ªæ•°
- `void erase(String word)` ä» Trie ä¸­åˆ é™¤ä¸€ä¸ª `word`ï¼ˆä¿è¯åˆ é™¤çš„ `word` è‡³å°‘å­˜åœ¨ä¸€æ¬¡ï¼‰

ç¤ºä¾‹ï¼š

```plaintext
è¾“å…¥ï¼š
["Trie", "insert", "insert", "countWordsEqualTo", "countWordsStartingWith", "erase", "countWordsEqualTo", "countWordsStartingWith"]
[[], ["apple"], ["apple"], ["apple"], ["app"], ["apple"], ["apple"], ["app"]]

è¾“å‡ºï¼š
[null, null, null, 2, 2, null, 1, 1]

è§£é‡Šï¼š
Trie trie = new Trie();
trie.insert("apple");
trie.insert("apple");
trie.countWordsEqualTo("apple");   // è¿”å› 2
trie.countWordsStartingWith("app"); // è¿”å› 2ï¼ˆä¸¤ä¸ª "apple" éƒ½ä»¥ "app" å¼€å¤´ï¼‰
trie.erase("apple");               // åˆ é™¤ä¸€ä¸ª "apple"
trie.countWordsEqualTo("apple");   // è¿”å› 1
trie.countWordsStartingWith("app"); // è¿”å› 1
```

çº¦æŸæ¡ä»¶ï¼š

- `1 <= word.length, prefix.length <= 2000`
- `word` å’Œ `prefix` ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- `insert`ã€`countWordsEqualTo`ã€`countWordsStartingWith`ã€`erase` è°ƒç”¨æ¬¡æ•°æ€»è®¡ä¸è¶…è¿‡ `3 Ã— 10â´`
- ç›®æ ‡ï¼šæ”¯æŒé‡å¤æ’å…¥ã€è®¡æ•°åŒ¹é…ã€å‰ç¼€è®¡æ•°ã€å•æ¬¡åˆ é™¤çš„å¢å¼ºç‰ˆ Trie
- è¿é€šæ€§ï¼šæœ¬é¢˜æ˜¯ LeetCode 208ï¼ˆåŸºç¡€ Trieï¼‰çš„å¢å¼ºç‰ˆ
- æ³¨æ„ï¼š
  - `erase` åªåˆ é™¤ä¸€ä¸ªå®ä¾‹ï¼Œä¸æ˜¯å…¨éƒ¨
  - `countWordsEqualTo` æ˜¯â€œå®Œå…¨åŒ¹é…â€ä¸”è®¡æ•°å‡ºç°æ¬¡æ•°
  - `countWordsStartingWith` æ˜¯â€œå‰ç¼€å­˜åœ¨â€ä¸”ç»Ÿè®¡æ‰€æœ‰ä»¥å®ƒå¼€å¤´çš„å•è¯æ•°é‡
  - ä¸è¦æ±‚è¿”å›å•è¯åˆ—è¡¨ï¼Œåªéœ€è¿”å›æ•°é‡

æ ¸å¿ƒæ„å›¾ï¼š
æœ¬é¢˜æ˜¯â€œå¸¦è®¡æ•°çš„å‰ç¼€æ ‘â€çš„ç»å…¸å®ç°é¢˜ï¼Œè€ƒæŸ¥çŠ¶æ€å¢å¼ºã€è·¯å¾„å¤ç”¨ã€å¤šå®ä¾‹ç®¡ç†ã€åŸå­åˆ é™¤èƒ½åŠ›

> æœ¬è´¨æ˜¯ï¼šåœ¨åŸºç¡€ Trie ä¸Šï¼Œä¸ºæ¯ä¸ªèŠ‚ç‚¹å¢åŠ ä¸¤ä¸ªè®¡æ•°å™¨ï¼š
>
> - `count`ï¼šç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ€»æ•°ï¼ˆå³ä»¥è¯¥è·¯å¾„ä¸ºå‰ç¼€çš„å•è¯æ•°é‡ï¼‰
> - `endCount`ï¼šä»¥è¯¥èŠ‚ç‚¹ä¸ºç»“å°¾çš„å®Œæ•´å•è¯æ•°é‡
>   é¢è¯•ä¸­é«˜åˆ†ç­”æ¡ˆéœ€æ˜ç¡®ï¼š
> - ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªè®¡æ•°ï¼Ÿ
> - å¦‚ä½•ä¿è¯ `erase` åªåˆ é™¤ä¸€ä¸ªï¼Ÿ
> - è®¡æ•°å™¨æ›´æ–°çš„æ—¶æœºå’Œé¡ºåºï¼Ÿ
> - å¦‚ä½•éªŒè¯è®¡æ•°ä¸€è‡´æ€§ï¼Ÿ
> - å¦‚æœåˆ é™¤ä¸å­˜åœ¨çš„å•è¯æ€ä¹ˆåŠï¼Ÿï¼ˆé¢˜ç›®ä¿è¯å­˜åœ¨ï¼‰

## Step 2: æ ¸å¿ƒç»“è®ºï¼ˆé‡‘å­—å¡”ç»“æ„ä¼˜åŒ–ç‰ˆï¼‰

### æ ¸å¿ƒç»“è®º

æœ¬é¢˜çš„æœ€ä¼˜è§£æ˜¯åŒè®¡æ•°æ•°ç»„åµŒå¥—å¼ Trieï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼šç²¾ç¡®ç»´æŠ¤è·¯å¾„è®¡æ•°ä¸å•è¯è®¡æ•°ã€æ”¯æŒåŸå­åˆ é™¤ã€é€»è¾‘è‡ªæ´½ã€æ€§èƒ½ç¨³å®šï¼Œæ˜¯è§£å†³â€œå¸¦é‡å¤ä¸è®¡æ•°çš„å‰ç¼€æ“ä½œâ€é—®é¢˜çš„å·¥ä¸šçº§æ ‡å‡†æ–¹æ¡ˆ

### æ”¯æ’‘è®ºç‚¹ï¼ˆMECE åˆ†ç±»ï¼‰

#### A. ç†è®ºæœ€ä¼˜æ€§ï¼šåŒè®¡æ•°æ˜¯å¢å¼º Trie çš„å”¯ä¸€åˆç†æ‰©å±•

- æœ¬é¢˜åœ¨åŸºç¡€ Trie ä¸Šæ–°å¢ä¸¤ä¸ªæ“ä½œï¼šè®¡æ•°åŒ¹é… å’Œ è®¡æ•°å‰ç¼€
- ä¸ºæ¯ä¸ªèŠ‚ç‚¹å¢åŠ ä¸¤ä¸ªå­—æ®µï¼š
  - `prefixCount`ï¼šç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ€»æ•°ï¼ˆå³æœ‰å¤šå°‘å•è¯åŒ…å«è¯¥å‰ç¼€ï¼‰
  - `wordCount`ï¼šä»¥è¯¥èŠ‚ç‚¹ä¸ºç»“å°¾çš„å®Œæ•´å•è¯æ•°é‡
- ä¼˜åŠ¿ï¼š
  - `countWordsStartingWith(prefix)` = æ²¿ `prefix` è·¯å¾„èµ°åˆ°æœ«å°¾èŠ‚ç‚¹çš„ `prefixCount`
  - `countWordsEqualTo(word)` = æ²¿ `word` è·¯å¾„èµ°åˆ°æœ«å°¾èŠ‚ç‚¹çš„ `wordCount`
  - `insert(word)`ï¼šè·¯å¾„ä¸Šæ¯ä¸ªèŠ‚ç‚¹ `prefixCount++`ï¼Œç»ˆç‚¹ `wordCount++`
  - `erase(word)`ï¼šè·¯å¾„ä¸Šæ¯ä¸ªèŠ‚ç‚¹ `prefixCount--`ï¼Œç»ˆç‚¹ `wordCount--`
- æ•°å­¦æœ¬è´¨ï¼š
  - `prefixCount` æ˜¯å­æ ‘ä¸­æ‰€æœ‰å•è¯çš„æ€»å‡ºç°æ¬¡æ•°
  - `wordCount` æ˜¯ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»ˆç‚¹çš„å•è¯æ•°é‡
  - äºŒè€…åˆ†ç¦»ï¼Œé¿å…è¯­ä¹‰æ··æ·†
  - æ‰€æœ‰æ“ä½œæ—¶é—´å¤æ‚åº¦ä»ä¸º O(L)ï¼Œç†è®ºæœ€ä¼˜

#### B. å¯¹æ¯”åŠ£åŠ¿æ€§ï¼šå…¶ä»–ä¸»æµæ–¹æ³•å‡å­˜åœ¨ç»“æ„æ€§ç¼ºé™·

| æ–¹æ³•                           | é—®é¢˜                                                                              | ä¸ºä½•æ¬¡ä¼˜                                         |
| ------------------------------ | --------------------------------------------------------------------------------- | ------------------------------------------------ |
| ç”¨åŸºç¡€ Trie + å…¨å±€ map è®¡æ•°    | æ’å…¥/åˆ é™¤æ—¶æ›´æ–° mapï¼Œä½†æ— æ³•é«˜æ•ˆç»Ÿè®¡å‰ç¼€æ•°é‡                                       | `countWordsStartingWith` éœ€éå†æ‰€æœ‰å•è¯ â†’ O(NÃ—L) |
| ç”¨å“ˆå¸Œè¡¨å­˜æ‰€æœ‰å•è¯ï¼ˆå…è®¸é‡å¤ï¼‰ | æ’å…¥/åˆ é™¤ O(1)ï¼Œä½†å‰ç¼€æŸ¥æ‰¾éœ€éå†æ‰€æœ‰é”®                                            | æ—¶é—´å¤æ‚åº¦ O(NÃ—L)ï¼Œä¸å¯æ¥å—                      |
| ç”¨å­—å…¸æ ‘ä½†åªå­˜ä¸€ä¸ª `count`     | æ— æ³•åŒºåˆ†â€œç»è¿‡â€å’Œâ€œç»“æŸâ€ â†’ `countWordsEqualTo` ä¸ `countWordsStartingWith` æ— æ³•åˆ†ç¦» | è¯­ä¹‰æ··ä¹±ï¼Œé€»è¾‘é”™è¯¯                               |
| ä½¿ç”¨ Map å­˜èŠ‚ç‚¹                | æŸ¥è¯¢æ…¢ï¼Œå¸¸æ•°å¤§ï¼Œä¸”æ— æ³•åˆ©ç”¨æ•°ç»„ç¼“å­˜ä¼˜åŠ¿                                            | ä¸ç¬¦åˆæœ¬é¢˜å­—ç¬¦é›†çº¦æŸ                             |

> âœ… å…³é”®æ´å¯Ÿï¼š
>
> - åŸºç¡€ Trie åªèƒ½åˆ¤æ–­â€œæ˜¯å¦å­˜åœ¨â€ï¼Œæœ¬é¢˜è¦â€œæœ‰å¤šå°‘ä¸ªâ€
> - å¿…é¡»åœ¨è·¯å¾„éå†è¿‡ç¨‹ä¸­åŠ¨æ€ç»´æŠ¤ä¸¤ä¸ªè®¡æ•°å™¨
> - `prefixCount` ç»´æŠ¤è·¯å¾„å…±äº«åº¦ï¼Œ`wordCount` ç»´æŠ¤ç»ˆç«¯é¢‘ç‡
> - è¿™æ˜¯æœ€ç®€æ´ã€æœ€é«˜æ•ˆã€æœ€æ˜“è¯æ­£ç¡®æ€§çš„æ–¹æ¡ˆ

#### C. é€‚ç”¨è¾¹ç•Œï¼šæ˜ç¡®çº¦æŸå‰æï¼Œé¿å…æ³›åŒ–è¯¯ç”¨

- âœ… é€‚ç”¨ï¼šå…è®¸é‡å¤æ’å…¥ã€éœ€ç»Ÿè®¡å‰ç¼€/å•è¯å‡ºç°æ¬¡æ•°ã€æ”¯æŒå•æ¬¡åˆ é™¤
- âœ… é€‚ç”¨ï¼šå­—ç¬¦é›†ä¸ºå°å†™å­—æ¯ï¼ˆ26ä¸ªï¼‰ï¼Œè·¯å¾„é•¿åº¦ â‰¤2000
- âš ï¸ éœ€è°ƒæ•´ï¼šè‹¥éœ€åˆ é™¤æ‰€æœ‰ç›¸åŒå•è¯ â†’ éœ€é¢å¤–æ ‡è®°æˆ–å¾ªç¯åˆ é™¤
- âš ï¸ éœ€è°ƒæ•´ï¼šè‹¥å­—ç¬¦é›†ä¸º Unicode â†’ æ”¹ç”¨ `Map<Character, Trie>`
- âŒ ä¸é€‚ç”¨ï¼šéœ€è¦è¿”å›å•è¯åˆ—è¡¨ã€éœ€è¦æ¨¡ç³ŠåŒ¹é…ã€éœ€è¦é€šé…ç¬¦

#### D. å·¥ç¨‹å®è·µä»·å€¼ï¼šç¬¦åˆå¤§å‚ç®—æ³•é¢è¯•è¯„åˆ†æ ‡å‡†

- âœ… ç®€æ´æ€§ï¼šåœ¨åŸºç¡€ Trie ä¸ŠåŠ ä¸¤ä¸ªå­—æ®µï¼Œé€»è¾‘æ¸…æ™°ï¼Œä»£ç å¤ç”¨ç‡é«˜
- âœ… å¯è¯æ€§ï¼šæ’å…¥ä¸åˆ é™¤æ“ä½œäº’ä¸ºé€†æ“ä½œï¼Œè®¡æ•°å™¨ä¸¥æ ¼å¯¹ç§°ï¼Œé€»è¾‘é—­ç¯
- âœ… å¯æ‰©å±•æ€§ï¼šåŒä¸€æ¨¡å¼å¯è¿ç§»è‡³â€œè¯é¢‘ç»Ÿè®¡â€ã€â€œæœç´¢å»ºè®®â€ã€â€œè¾“å…¥æ³•é¢„æµ‹â€
- âœ… è¡¨è¾¾åŠ›ï¼šåœ¨é¢è¯•ä¸­èƒ½è‡ªç„¶å¼•å‡ºï¼š
  - â€œä¸ºä»€ä¹ˆ `prefixCount` å’Œ `wordCount` ä¸ç”¨åŒä¸€ä¸ªï¼Ÿâ€
  - â€œ`erase` ä¼šä¸ä¼šåˆ é”™ï¼Ÿâ€
  - â€œå¦‚æœæ’å…¥ä¸€ä¸ªå•è¯ä¸¤æ¬¡ï¼Œ`prefixCount` æ€ä¹ˆå˜ï¼Ÿâ€
  - â€œå¦‚ä½•éªŒè¯è®¡æ•°ä¸€è‡´æ€§ï¼Ÿâ€
  - â€œå¦‚æœå…ˆåˆ å†æŸ¥ï¼Œä¼šä¸ä¼šå‡ºé”™ï¼Ÿâ€
    â†’ å±•ç°çŠ¶æ€å»ºæ¨¡èƒ½åŠ›ä¸è¾¹ç•Œæ¡ä»¶å¤„ç†èƒ½åŠ›

### æ€»ç»“

å› æ­¤ï¼ŒåŒè®¡æ•°æ•°ç»„åµŒå¥—å¼ Trie æ˜¯æœ¬é¢˜åœ¨ç†è®ºæ­£ç¡®æ€§ã€æ—¶é—´/ç©ºé—´æ•ˆç‡å’Œå·¥ç¨‹å®ç°å¤æ‚åº¦ä¸Šçš„æœ€ä¼˜å¹³è¡¡ç‚¹

## Step 3: å¤šè¯­è¨€å®ç°

### Go ğŸ¹

```go
type Trie struct {
    children [26]*Trie  // å­èŠ‚ç‚¹æŒ‡é’ˆæ•°ç»„
    prefixCount int     // ç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ€»æ•°ï¼ˆå‰ç¼€è®¡æ•°ï¼‰
    wordCount   int     // ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»“å°¾çš„å®Œæ•´å•è¯æ•°é‡
}

func Constructor() Trie {
    return Trie{}
}

func (t *Trie) Insert(word string) {
    node := t
    for _, char := range word {
        index := char - 'a'
        if node.children[index] == nil {
            node.children[index] = &Trie{}
        }
        node = node.children[index]
        node.prefixCount++ // æ¯ç»è¿‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‰ç¼€è®¡æ•°+1
    }
    node.wordCount++ // åˆ°è¾¾ç»ˆç‚¹ï¼Œå•è¯è®¡æ•°+1
}

func (t *Trie) CountWordsEqualTo(word string) int {
    node := t
    for _, char := range word {
        index := char - 'a'
        if node.children[index] == nil {
            return 0 // è·¯å¾„ä¸­æ–­ï¼Œæ— åŒ¹é…
        }
        node = node.children[index]
    }
    return node.wordCount // è¿”å›ç»ˆç‚¹çš„å•è¯è®¡æ•°
}

func (t *Trie) CountWordsStartingWith(prefix string) int {
    node := t
    for _, char := range prefix {
        index := char - 'a'
        if node.children[index] == nil {
            return 0 // å‰ç¼€è·¯å¾„ä¸­æ–­
        }
        node = node.children[index]
    }
    return node.prefixCount // è¿”å›è·¯å¾„ç»ˆç‚¹çš„å‰ç¼€è®¡æ•°
}

func (t *Trie) Erase(word string) {
    node := t
    // å…ˆèµ°åˆ°ç»ˆç‚¹ï¼Œç¡®ä¿å­˜åœ¨ï¼ˆé¢˜ç›®ä¿è¯å­˜åœ¨ï¼‰
    for _, char := range word {
        index := char - 'a'
        node = node.children[index]
        node.prefixCount-- // æ¯ç»è¿‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‰ç¼€è®¡æ•°-1
    }
    node.wordCount-- // ç»ˆç‚¹å•è¯è®¡æ•°-1
}
```

### Python ğŸ

```python
class Trie:
    def __init__(self):
        self.children = [None] * 26   # 26ä¸ªå­èŠ‚ç‚¹
        self.prefix_count = 0         # ç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ€»æ•°
        self.word_count = 0           # ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»“å°¾çš„å•è¯æ•°é‡

    def insert(self, word: str) -> None:
        node = self
        for char in word:
            index = ord(char) - ord('a')
            if node.children[index] is None:
                node.children[index] = Trie()
            node = node.children[index]
            node.prefix_count += 1  # ç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ•° +1
        node.word_count += 1        # ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»“å°¾çš„å•è¯æ•° +1

    def countWordsEqualTo(self, word: str) -> int:
        node = self
        for char in word:
            index = ord(char) - ord('a')
            if node.children[index] is None:
                return 0
            node = node.children[index]
        return node.word_count

    def countWordsStartingWith(self, prefix: str) -> int:
        node = self
        for char in prefix:
            index = ord(char) - ord('a')
            if node.children[index] is None:
                return 0
            node = node.children[index]
        return node.prefix_count

    def erase(self, word: str) -> None:
        node = self
        # æŒ‰è·¯å¾„å‘ä¸‹ï¼Œæ›´æ–°è®¡æ•°å™¨
        for char in word:
            index = ord(char) - ord('a')
            node = node.children[index]
            node.prefix_count -= 1
        node.word_count -= 1
```

### TypeScript ğŸŸ¦

```typescript
class Trie {
  children: (Trie | null)[];
  prefixCount: number;
  wordCount: number;

  constructor() {
    this.children = new Array(26).fill(null);
    this.prefixCount = 0;
    this.wordCount = 0;
  }

  insert(word: string): void {
    let node: Trie | null = this;
    for (const char of word) {
      const index = char.charCodeAt(0) - "a".charCodeAt(0);
      if (node.children[index] === null) {
        node.children[index] = new Trie();
      }
      node = node.children[index]!;
      node.prefixCount++; // ç»è¿‡èŠ‚ç‚¹ï¼Œå‰ç¼€è®¡æ•° +1
    }
    node.wordCount++; // åˆ°è¾¾ç»ˆç‚¹ï¼Œå•è¯è®¡æ•° +1
  }

  countWordsEqualTo(word: string): number {
    let node: Trie | null = this;
    for (const char of word) {
      const index = char.charCodeAt(0) - "a".charCodeAt(0);
      if (node.children[index] === null) {
        return 0;
      }
      node = node.children[index]!;
    }
    return node.wordCount;
  }

  countWordsStartingWith(prefix: string): number {
    let node: Trie | null = this;
    for (const char of prefix) {
      const index = char.charCodeAt(0) - "a".charCodeAt(0);
      if (node.children[index] === null) {
        return 0;
      }
      node = node.children[index]!;
    }
    return node.prefixCount;
  }

  erase(word: string): void {
    let node: Trie | null = this;
    for (const char of word) {
      const index = char.charCodeAt(0) - "a".charCodeAt(0);
      node = node.children[index]!;
      node.prefixCount--; // ç»è¿‡èŠ‚ç‚¹ï¼Œå‰ç¼€è®¡æ•° -1
    }
    node.wordCount--; // ç»ˆç‚¹ï¼Œå•è¯è®¡æ•° -1
  }
}
```

### Rust ğŸ¦€

```rust
#[derive(Default)]
struct Trie {
    children: [Option<Box<Trie>>; 26],
    prefix_count: usize,
    word_count: usize,
}

impl Trie {
    fn new() -> Self {
        Self::default()
    }

    fn insert(&mut self, word: String) {
        let mut node = self;
        for c in word.chars() {
            let index = (c as u8 - b'a') as usize;
            if node.children[index].is_none() {
                node.children[index] = Some(Box::new(Trie::new()));
            }
            node = node.children[index].as_mut().unwrap();
            node.prefix_count += 1;
        }
        node.word_count += 1;
    }

    fn count_words_equal_to(&self, word: String) -> i32 {
        let mut node = self;
        for c in word.chars() {
            let index = (c as u8 - b'a') as usize;
            match &node.children[index] {
                Some(child) => node = child,
                None => return 0,
            }
        }
        node.word_count as i32
    }

    fn count_words_starting_with(&self, prefix: String) -> i32 {
        let mut node = self;
        for c in prefix.chars() {
            let index = (c as u8 - b'a') as usize;
            match &node.children[index] {
                Some(child) => node = child,
                None => return 0,
            }
        }
        node.prefix_count as i32
    }

    fn erase(&mut self, word: String) {
        let mut node = self;
        for c in word.chars() {
            let index = (c as u8 - b'a') as usize;
            node = node.children[index].as_mut().unwrap();
            node.prefix_count -= 1;
        }
        node.word_count -= 1;
    }
}
```

### ç®—æ³•æ·±å…¥è§£æï¼ˆè´¹æ›¼å¼ä¸‰å±‚ç»“æ„ï¼‰

ç¬¬ä¸€å±‚ï¼šä¸€å¥è¯è®²æ˜ç™½ â€”â€”

> å‰ç¼€æ ‘ç°åœ¨ä¸åªæ˜¯â€œæœ‰æ²¡æœ‰â€ï¼Œè€Œæ˜¯â€œæœ‰å‡ ä¸ªâ€
> æ¯ä¸ªå­—æ¯èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå°æœ¬æœ¬ï¼š
>
> - ä¸€ä¸ªè®°â€œæœ‰å¤šå°‘å•è¯ç»è¿‡æˆ‘â€ï¼ˆprefixCountï¼‰
> - ä¸€ä¸ªè®°â€œæœ‰å¤šå°‘å•è¯åœ¨æˆ‘è¿™å„¿ç»“æŸâ€ï¼ˆwordCountï¼‰
>   æ’å…¥å•è¯æ—¶ï¼Œæ²¿è·¯æ¯èµ°ä¸€æ­¥ï¼Œä¸¤ä¸ªæœ¬æœ¬éƒ½+1ï¼›
>   åˆ é™¤æ—¶ï¼Œæ²¿è·¯æ¯èµ°ä¸€æ­¥ï¼Œä¸¤ä¸ªæœ¬æœ¬éƒ½-1ï¼›
>   æŸ¥æ‰¾â€œå®Œå…¨åŒ¹é…â€çœ‹ç»ˆç‚¹çš„ wordCountï¼›
>   æŸ¥æ‰¾â€œå‰ç¼€â€çœ‹ç»ˆç‚¹çš„ prefixCount

ç¬¬äºŒå±‚ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ å†™ â€”â€”
æˆ‘ä»¬ä¸æ˜¯åœ¨â€œå»ºæ ‘â€ï¼Œè€Œæ˜¯åœ¨â€œå»ºç»Ÿè®¡è´¦æœ¬â€

- ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªè®¡æ•°ï¼Ÿä¸èƒ½åªç”¨ä¸€ä¸ªå—ï¼Ÿ
  - æƒ³è±¡ï¼šæ’å…¥ä¸¤ä¸ª "apple"
    - è·¯å¾„ aâ†’pâ†’pâ†’lâ†’e
    - æ¯ä¸ªèŠ‚ç‚¹çš„ `prefixCount` = 2ï¼ˆå› ä¸ºä¸¤ä¸ªå•è¯éƒ½ç»è¿‡å®ƒä»¬ï¼‰
    - åªæœ‰æœ€åä¸€ä¸ª e çš„ `wordCount` = 2ï¼ˆå› ä¸ºåªæœ‰å®ƒä»£è¡¨å®Œæ•´å•è¯ï¼‰
  - å¦‚æœåªç”¨ä¸€ä¸ª `count`ï¼š
    - `countWordsEqualTo("apple")` å’Œ `countWordsStartingWith("app")` éƒ½ä¼šè¿”å› 2
    - ä½† `countWordsStartingWith("appl")` å‘¢ï¼Ÿå®ƒåº”è¯¥è¿”å› 2ï¼Œä½†å¦‚æœ `count` æ˜¯ `wordCount`ï¼Œé‚£å®ƒå°±åªèƒ½æ˜¯ 0ï¼ˆå› ä¸º "appl" ä¸æ˜¯å®Œæ•´å•è¯ï¼‰
  - æ‰€ä»¥å¿…é¡»åˆ†ç¦»ï¼š
    - `prefixCount`ï¼šåæ˜ è·¯å¾„è¢«å¤šå°‘å•è¯å…±äº«
    - `wordCount`ï¼šåæ˜ æœ‰å¤šå°‘å®Œæ•´å•è¯åœ¨æ­¤ç»ˆæ­¢

- ä¸ºä»€ä¹ˆ `erase` ä¸æ£€æŸ¥æ˜¯å¦å­˜åœ¨ï¼Ÿé¢˜ç›®ä¿è¯å­˜åœ¨
  - é¢è¯•ä¸­å¸¸è¯´ï¼šâ€œå‡è®¾è¾“å…¥åˆæ³•ï¼Œä¸éªŒè¯è¾¹ç•Œâ€
  - å¦‚æœå…è®¸åˆ é™¤ä¸å­˜åœ¨çš„ï¼Œéœ€åŠ  `if node != nil`ï¼Œä½†æœ¬é¢˜çº¦æŸæ˜¯â€œä¿è¯å­˜åœ¨â€
  - ç›´æ¥å‡ä¸ä¼šå¯¼è‡´è´Ÿæ•°ï¼Ÿ
    - ç†è®ºä¸Šä¸ä¼šï¼Œå› ä¸ºæ’å…¥æ¬¡æ•° â‰¥ åˆ é™¤æ¬¡æ•°
    - å®é™…è¿è¡Œä¸­ï¼Œè‹¥åˆ é™¤æ¬¡æ•° > æ’å…¥æ¬¡æ•°ï¼Œä¼šå˜æˆè´Ÿæ•° â†’ ä½†é¢˜ç›®ä¿è¯ä¸ä¼šå‘ç”Ÿ
    - å·¥ç¨‹ä¸­åº”åŠ  `assert(node.wordCount > 0)`ï¼Œä½†æœ¬é¢˜ä¸éœ€

- ä¸ºä»€ä¹ˆ `erase` å’Œ `insert` çš„éå†é¡ºåºä¸€æ ·ï¼Ÿ
  - äºŒè€…æ˜¯å¯¹ç§°æ“ä½œï¼š
    - æ’å…¥ï¼šä»æ ¹åˆ°å¶ï¼Œæ¯æ­¥ `prefixCount++`ï¼Œæœ€å `wordCount++`
    - åˆ é™¤ï¼šä»æ ¹åˆ°å¶ï¼Œæ¯æ­¥ `prefixCount--`ï¼Œæœ€å `wordCount--`
  - ä¿è¯è®¡æ•°å™¨å§‹ç»ˆä¸€è‡´ï¼š
    - `prefixCount` = æ‰€æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºå‰ç¼€çš„å•è¯æ•°
    - `wordCount` = æ‰€æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»ˆç‚¹çš„å•è¯æ•°
    - äºŒè€…åŒæ­¥å¢å‡ï¼Œé€»è¾‘é—­ç¯

- ä¸ºä»€ä¹ˆ Go/Rust è¦ç”¨æŒ‡é’ˆï¼ŸPython/TS ç”¨å¯¹è±¡ï¼Ÿ
  - æ‰€æœ‰è¯­è¨€éƒ½åœ¨è¡¨è¾¾ï¼šèŠ‚ç‚¹æ˜¯åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡
  - Go/Rust æ˜¾å¼ä½¿ç”¨æŒ‡é’ˆ/Box è¡¨ç¤ºâ€œå¼•ç”¨â€
  - Python/TS æ˜¯å¼•ç”¨è¯­ä¹‰ï¼Œ`self.children[i] = Trie()` å°±æ˜¯åˆ›å»ºå¯¹è±¡å¼•ç”¨
  - æœ¬è´¨ä¸€è‡´ï¼šèŠ‚ç‚¹æ˜¯å †ä¸Šå¯¹è±¡ï¼Œçˆ¶èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆ/å¼•ç”¨è®¿é—®å­èŠ‚ç‚¹

- ä¸ºä»€ä¹ˆ TypeScript è¦ç”¨ `!` æ–­è¨€ï¼Ÿ
  - å› ä¸º `node.children[index]` ç±»å‹æ˜¯ `Trie | null`ï¼Œä½†åœ¨ `insert` æˆ– `erase` ä¸­ï¼Œæˆ‘ä»¬å·²ç¡®ä¿å®ƒå­˜åœ¨
  - ä½¿ç”¨ `!` å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œæˆ‘çŸ¥é“å®ƒä¸æ˜¯ nullâ€
  - æ›´å®‰å…¨å†™æ³•æ˜¯ `if node.children[index] != null`ï¼Œä½†æœ¬é¢˜è·¯å¾„ç”± `insert` ä¿è¯ï¼Œå¯æ–­è¨€

- ä¸ºä»€ä¹ˆ `countWordsStartingWith` ä¸ç”¨ `wordCount`ï¼Ÿ
  - å› ä¸ºå‰ç¼€ä¸ä¸€å®šæ˜¯å®Œæ•´å•è¯ï¼
  - æ¯”å¦‚æ’å…¥ "apple"ï¼ŒæŸ¥è¯¢ "app"ï¼š
    - "app" ä¸æ˜¯å®Œæ•´å•è¯ â†’ `wordCount=0`
    - ä½†å®ƒè¢« "apple" ç»è¿‡ â†’ `prefixCount=1`
  - æ‰€ä»¥å¿…é¡»ç”¨ `prefixCount`ï¼Œå¦åˆ™ä¼šæ¼æ‰

- ä¸ºä»€ä¹ˆ `erase` æ˜¯ä»æ ¹åˆ°å¶ï¼Œè€Œä¸æ˜¯ä»å¶å›æ ¹ï¼Ÿ
  - æˆ‘ä»¬çŸ¥é“è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥éå†ä¸‹å»
  - æ— éœ€é€’å½’å›æº¯ï¼Œè¿­ä»£æ›´é«˜æ•ˆã€æ— æ ˆæº¢å‡ºé£é™©
  - æ‰€æœ‰è¯­è¨€éƒ½ç”¨è¿­ä»£ï¼Œè¿™æ˜¯å·¥ä¸šæ ‡å‡†

ç¬¬ä¸‰å±‚ï¼šä¸ºä»€ä¹ˆè¿™æ ·æœ€å¥½ â€”â€”
è¿™ä¸æ˜¯â€œæ ‘â€ï¼Œè€Œæ˜¯ä¸€ä¸ªå¸¦çŠ¶æ€çš„è®¡æ•°è·¯å¾„æœºå™¨

- æ•°å­¦æœ¬è´¨ï¼š
  - `prefixCount` æ˜¯å­æ ‘ä¸­æ‰€æœ‰å•è¯çš„æ€»å‡ºç°æ¬¡æ•°
  - `wordCount` æ˜¯ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»ˆç‚¹çš„å•è¯æ•°é‡
  - æ¯ä¸ªèŠ‚ç‚¹çš„ `prefixCount` = æ‰€æœ‰å­èŠ‚ç‚¹çš„ `prefixCount` ä¹‹å’Œ + è¯¥èŠ‚ç‚¹çš„ `wordCount`
  - å®é™…ä¸Šï¼Œä¸éœ€è¦é€’å½’æ±‚å’Œï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯é€å±‚æ›´æ–°ï¼Œç›´æ¥ç´¯åŠ å³å¯

- çŠ¶æ€å®šä¹‰ï¼š
  - `children[26]`ï¼šå­—ç¬¦è½¬ç§»
  - `prefixCount`ï¼šç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ€»æ•°ï¼ˆå‰ç¼€å…±äº«åº¦ï¼‰
  - `wordCount`ï¼šä»¥è¯¥èŠ‚ç‚¹ä¸ºç»“å°¾çš„å®Œæ•´å•è¯æ•°é‡
  - ä¸å˜é‡ï¼š
    - `prefixCount â‰¥ wordCount` ï¼ˆå› ä¸ºæ‰€æœ‰ç»ˆç‚¹å•è¯éƒ½ç»è¿‡è¯¥èŠ‚ç‚¹ï¼‰
    - `prefixCount = æ‰€æœ‰ä»æ ¹åˆ°è¯¥èŠ‚ç‚¹è·¯å¾„çš„æ’å…¥æ¬¡æ•°`
    - `wordCount = æ‰€æœ‰ä»æ ¹åˆ°è¯¥èŠ‚ç‚¹è·¯å¾„çš„æ’å…¥æ¬¡æ•°ï¼Œä¸”è¯¥èŠ‚ç‚¹æ˜¯ç»ˆç‚¹`

- ç®—æ³•ç­–ç•¥ï¼š
  1. æ’å…¥ï¼šæ²¿è·¯å¾„æ¯èŠ‚ç‚¹ `prefixCount++`ï¼Œç»ˆç‚¹ `wordCount++`
  1. è®¡æ•°åŒ¹é…ï¼šèµ°åˆ°ç»ˆç‚¹ï¼Œè¿”å› `wordCount`
  1. è®¡æ•°å‰ç¼€ï¼šèµ°åˆ°å‰ç¼€ç»ˆç‚¹ï¼Œè¿”å› `prefixCount`
  1. åˆ é™¤ï¼šæ²¿è·¯å¾„æ¯èŠ‚ç‚¹ `prefixCount--`ï¼Œç»ˆç‚¹ `wordCount--`

- å·¥ç¨‹ä¼˜åŠ¿ï¼š
  - æ—¶é—´å¤æ‚åº¦ï¼šæ‰€æœ‰æ“ä½œ O(L)ï¼Œç†è®ºæœ€ä¼˜
  - ç©ºé—´å¤æ‚åº¦ï¼šO(æ€»å­—ç¬¦æ•°)ï¼Œå‰ç¼€å…±äº«å‹ç¼©ç©ºé—´
  - è®¡æ•°ä¸€è‡´æ€§ï¼šæ’å…¥ä¸åˆ é™¤äº’ä¸ºé€†æ“ä½œï¼Œè®¡æ•°å™¨ä¸¥æ ¼åŒæ­¥
  - å¯æ‰©å±•æ€§ï¼š
    - æ”¯æŒæ‰¹é‡åˆ é™¤ï¼šå¾ªç¯è°ƒç”¨ `erase`
    - æ”¯æŒè·å–æ‰€æœ‰å•è¯ï¼šDFS éå†å­æ ‘
    - æ”¯æŒè¯é¢‘æ’åºï¼šç”¨ä¼˜å…ˆé˜Ÿåˆ—æ”¶é›†æ‰€æœ‰ `wordCount > 0` çš„èŠ‚ç‚¹

â†’ è¿™å°±æ˜¯å¸¦è®¡æ•°çš„å‰ç¼€æ ‘é»„é‡‘æ¨¡å‹ï¼šè·¯å¾„å…±äº« + åŒè®¡æ•°åŒæ­¥

## Step 4: ä¼ªä»£ç ä¸å¯è§†åŒ–

### ä¼ªä»£ç 

```
å‡½æ•° Trie():
    åˆå§‹åŒ– children æ•°ç»„ï¼ˆ26ä¸ªå…ƒç´ ï¼Œå…¨ä¸º nullï¼‰
    åˆå§‹åŒ– prefixCount = 0
    åˆå§‹åŒ– wordCount = 0

å‡½æ•° insert(word):
    node = æ ¹èŠ‚ç‚¹
    å¯¹äº word ä¸­æ¯ä¸ªå­—ç¬¦ cï¼š
        index = c - 'a'
        å¦‚æœ node.children[index] ä¸º nullï¼š
            åˆ›å»ºæ–°èŠ‚ç‚¹
        node = node.children[index]
        node.prefixCount += 1
    node.wordCount += 1

å‡½æ•° countWordsEqualTo(word):
    node = æ ¹èŠ‚ç‚¹
    å¯¹äº word ä¸­æ¯ä¸ªå­—ç¬¦ cï¼š
        index = c - 'a'
        å¦‚æœ node.children[index] ä¸º nullï¼š
            è¿”å› 0
        node = node.children[index]
    è¿”å› node.wordCount

å‡½æ•° countWordsStartingWith(prefix):
    node = æ ¹èŠ‚ç‚¹
    å¯¹äº prefix ä¸­æ¯ä¸ªå­—ç¬¦ cï¼š
        index = c - 'a'
        å¦‚æœ node.children[index] ä¸º nullï¼š
            è¿”å› 0
        node = node.children[index]
    è¿”å› node.prefixCount

å‡½æ•° erase(word):
    node = æ ¹èŠ‚ç‚¹
    å¯¹äº word ä¸­æ¯ä¸ªå­—ç¬¦ cï¼š
        index = c - 'a'
        node = node.children[index]
        node.prefixCount -= 1
    node.wordCount -= 1
```

### Mermaid çŠ¶æ€è½¬ç§»å›¾ï¼ˆç¤ºä¾‹ï¼šæ’å…¥ä¸¤ä¸ª "apple"ï¼Œç„¶ååˆ é™¤ä¸€ä¸ªï¼‰

```mermaid
graph TD
    A[æ ¹èŠ‚ç‚¹] --> B[a: p=2,w=0]
    B --> C[p: p=2,w=0]
    C --> D[p: p=2,w=0]
    D --> E[l: p=2,w=0]
    E --> F[e: p=2,w=2]  %% ç¬¬ä¸€ä¸ª apple ç»“æŸ

    F --> G[ç¬¬äºŒä¸ª apple è·¯å¾„å…±äº«ï¼Œå†æ¬¡ç»è¿‡]
    G --> H[e: p=2,w=2]  %% ä»ä¸º2

    H --> I[åˆ é™¤ä¸€ä¸ª apple]
    I --> J[e: p=1,w=1]  %% åˆ é™¤åï¼Œe çš„ prefixCount å’Œ wordCount å„å‡1

    style A fill:#fff,stroke:#333
    style B fill:#fff,stroke:#333
    style C fill:#fff,stroke:#333
    style D fill:#fff,stroke:#333
    style E fill:#fff,stroke:#333
    style F fill:#cfc,stroke:#333
    style J fill:#cfc,stroke:#333

    %% æŸ¥è¯¢ countWordsEqualTo("apple") â†’ 1
    %% æŸ¥è¯¢ countWordsStartingWith("app") â†’ 1ï¼ˆå› ä¸º e çš„ prefixCount=1ï¼Œä½†è·¯å¾„ a-p-p çš„ prefixCount=1ï¼‰
```

> å›¾ç¤ºè¯´æ˜ï¼š
>
> - æ¯ä¸ªèŠ‚ç‚¹æ ‡æ³¨ `p=è®¡æ•°, w=è®¡æ•°`
> - æ’å…¥ç¬¬ä¸€ä¸ª "apple"ï¼šè·¯å¾„ä¸Šæ¯ä¸ªèŠ‚ç‚¹ `p++`ï¼Œç»ˆç‚¹ `w++`
> - æ’å…¥ç¬¬äºŒä¸ª "apple"ï¼šè·¯å¾„å¤ç”¨ï¼Œæ‰€æœ‰èŠ‚ç‚¹ `p++`ï¼Œç»ˆç‚¹ `w++` â†’ `p=2, w=2`
> - åˆ é™¤ä¸€ä¸ª "apple"ï¼šè·¯å¾„ä¸Šæ¯ä¸ªèŠ‚ç‚¹ `p--`ï¼Œç»ˆç‚¹ `w--` â†’ `p=1, w=1`
> - æŸ¥è¯¢ "app" å‰ç¼€ï¼šèµ°åˆ°ç¬¬äºŒä¸ª p èŠ‚ç‚¹ï¼Œ`p=1` â†’ è¿”å› 1
> - æŸ¥è¯¢ "apple"ï¼šèµ°åˆ° eï¼Œ`w=1` â†’ è¿”å› 1
> - å®Œæ•´ä½“ç°åŒè®¡æ•°åŒæ­¥æ›´æ–°æœºåˆ¶

## Step 5: æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤º

æˆ‘ä»¬å°†æ¨¡æ‹Ÿ Go å®ç°å¯¹ç¤ºä¾‹çš„å®Œæ•´æ‰§è¡Œè½¨è¿¹ï¼š

### A æ‰§è¡Œç¯å¢ƒè®¾å®š

```go
trie := Constructor()
trie.Insert("apple")
trie.Insert("apple")
trie.CountWordsEqualTo("apple")   // æœŸæœ› 2
trie.CountWordsStartingWith("app") // æœŸæœ› 2
trie.Erase("apple")
trie.CountWordsEqualTo("apple")   // æœŸæœ› 1
trie.CountWordsStartingWith("app") // æœŸæœ› 1
```

### B æ‰§è¡Œè½¨è¿¹è¡¨æ ¼ï¼ˆé€æ“ä½œæ¨¡æ‹Ÿï¼‰

| æ­¥éª¤ | æ“ä½œ                   | å‚æ•°    | è·¯å¾„èŠ‚ç‚¹     | æ’å…¥/åˆ é™¤åŠ¨ä½œ        | prefixCount æ›´æ–°        | wordCount æ›´æ–° | è¿”å›å€¼ |
| ---- | ---------------------- | ------- | ------------ | -------------------- | ----------------------- | -------------- | ------ |
| 1    | Constructor            | â€”       | â€”            | â€”                    | å…¨0                     | å…¨0            | null   |
| 2    | Insert                 | "apple" | aâ†’pâ†’pâ†’lâ†’e    | æ¯èŠ‚ç‚¹ p++ï¼Œç»ˆç‚¹ w++ | a:1, p:1, p:1, l:1, e:1 | e:1            | null   |
| 3    | Insert                 | "apple" | aâ†’pâ†’pâ†’lâ†’e    | å¤ç”¨è·¯å¾„ï¼Œp++ï¼Œw++   | a:2, p:2, p:2, l:2, e:2 | e:2            | null   |
| 4    | CountWordsEqualTo      | "apple" | èµ°åˆ° e       | è¯»å– w               | â€”                       | â€”              | 2 âœ…   |
| 5    | CountWordsStartingWith | "app"   | èµ°åˆ°ç¬¬äºŒä¸ª p | è¯»å– p               | â€”                       | â€”              | 2 âœ…   |
| 6    | Erase                  | "apple" | aâ†’pâ†’pâ†’lâ†’e    | æ¯èŠ‚ç‚¹ p--ï¼Œç»ˆç‚¹ w-- | a:1, p:1, p:1, l:1, e:1 | e:1            | null   |
| 7    | CountWordsEqualTo      | "apple" | èµ°åˆ° e       | è¯»å– w               | â€”                       | â€”              | 1 âœ…   |
| 8    | CountWordsStartingWith | "app"   | èµ°åˆ°ç¬¬äºŒä¸ª p | è¯»å– p               | â€”                       | â€”              | 1 âœ…   |

> âœ… æ‰€æœ‰æ“ä½œè®¡æ•°å™¨æ›´æ–°æ­£ç¡®ï¼Œå‰åä¸€è‡´

### C æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤ºï¼ˆè¡¨æ ¼å½¢å¼ï¼ŒåŒé‡éªŒè¯ï¼‰æ€»ç»“

| é˜¶æ®µ | æ“ä½œ         | å…³é”®èŠ‚ç‚¹ | prefixCount | wordCount | ç»“æœ      |
| ---- | ------------ | -------- | ----------- | --------- | --------- |
| 1    | æ’å…¥ "apple" | e        | e.p=1       | e.w=1     | âœ…        |
| 2    | æ’å…¥ "apple" | e        | e.p=2       | e.w=2     | âœ…        |
| 3    | æŸ¥ "apple"   | e        | e.p=2       | e.w=2     | è¿”å› 2 âœ… |
| 4    | æŸ¥ "app"     | ç¬¬äºŒä¸ª p | p.p=2       | p.w=0     | è¿”å› 2 âœ… |
| 5    | åˆ é™¤ "apple" | e        | e.p=1       | e.w=1     | âœ…        |
| 6    | æŸ¥ "apple"   | e        | e.p=1       | e.w=1     | è¿”å› 1 âœ… |
| 7    | æŸ¥ "app"     | ç¬¬äºŒä¸ª p | p.p=1       | p.w=0     | è¿”å› 1 âœ… |

> âœ… æ‰§è¡ŒéªŒè¯æˆåŠŸ

## Step 6: å¤æ‚åº¦åˆ†æ

### æ ¸å¿ƒç»“è®º

è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(L)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(NÃ—L)ï¼Œå…¶æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨äºèŠ‚ç‚¹åˆ›å»ºå¼€é”€ï¼Œè€Œä¼˜åŒ–æ½œåŠ›åˆ™åœ¨äºå‹ç¼©å‰ç¼€æ ‘ï¼ˆRadix Trieï¼‰

### æ”¯æ’‘è®ºç‚¹ï¼ˆMECE åˆ†ç±»ï¼‰

#### A. æ—¶é—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼

- æ‰€æœ‰æ“ä½œï¼ˆinsertã€countã€eraseï¼‰å‡éå†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ä¸€æ¬¡
- æ¯æ¬¡è®¿é—®å­èŠ‚ç‚¹ï¼šæ•°ç»„ç´¢å¼• O(1)
- æ€»æ—¶é—´ = å­—ç¬¦ä¸²é•¿åº¦ L â†’ O(L)
- ç†è®ºæœ€ä¼˜ï¼šä»»ä½•ç®—æ³•å¿…é¡»è‡³å°‘è¯»å–æ¯ä¸ªå­—ç¬¦ä¸€æ¬¡ï¼Œæ— æ³•æ›´å¿«

#### B. ç©ºé—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼

- æœ€åæƒ…å†µï¼šæ‰€æœ‰å•è¯æ— å…¬å…±å‰ç¼€ï¼Œæ¯ä¸ªå­—ç¬¦æ–°å»ºèŠ‚ç‚¹
- è®¾æ€»æ’å…¥å•è¯æ•°ä¸º Nï¼Œå¹³å‡é•¿åº¦ä¸º L â†’ æ€»èŠ‚ç‚¹æ•° â‰¤ NÃ—L
- æ¯ä¸ªèŠ‚ç‚¹ï¼š26Ã—8ï¼ˆæŒ‡é’ˆï¼‰ + 2Ã—8ï¼ˆä¸¤ä¸ªè®¡æ•°å™¨ï¼‰ â‰ˆ 224 å­—èŠ‚
- æ€»ç©ºé—´ = O(NÃ—L)
- å®é™…è¿œå°äºæœ€åï¼Œå› ä¸ºå‰ç¼€å…±äº«ï¼š
  - æ’å…¥ 1000 ä¸ª "apple"ï¼Œä»… 5 ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ `prefixCount=1000`, `wordCount=1000`
  - ç©ºé—´æ•ˆç‡æé«˜

#### C. å¸¸æ•°å› å­åˆ†æ

- æ•°ç»„è®¿é—®ï¼šå•æ¬¡å†…å­˜è®¿é—®ï¼ŒCPU ç¼“å­˜é¢„å–å‹å¥½
- æ— å“ˆå¸Œè®¡ç®—ï¼Œæ— æŒ‡é’ˆè·³è½¬
- Go/Rust ç¼–è¯‘å™¨å¯¹æ•°ç»„è®¿é—®é«˜åº¦ä¼˜åŒ–
- Python æœ‰ç±»å‹å¼€é”€ï¼Œä½†å½±å“å°

#### D. æ€§èƒ½ç“¶é¢ˆè¯†åˆ«ä¸æ½œåœ¨ä¼˜åŒ–æ–¹å‘æ¢è®¨

- ç“¶é¢ˆï¼šå†…å­˜å ç”¨å¤§ï¼ˆ26æŒ‡é’ˆ + 2è®¡æ•°å™¨/èŠ‚ç‚¹ï¼‰ï¼Œå½“å­—ç¬¦é›†å¤§æ—¶çˆ†ç‚¸
- ä¼˜åŒ–æ–¹å‘ï¼š
  - æ”¹ç”¨ `Map<Character, Trie>`ï¼šèŠ‚çœç©ºé—´ï¼Œä½†é™ä½æŸ¥æ‰¾é€Ÿåº¦
  - ä½¿ç”¨ å‹ç¼©å‰ç¼€æ ‘ï¼ˆRadix Trieï¼‰ï¼šåˆå¹¶å•è·¯å¾„èŠ‚ç‚¹ï¼Œå¦‚ "apple" åˆå¹¶ä¸ºä¸€ä¸ªèŠ‚ç‚¹
  - ä½¿ç”¨ åŠ¨æ€èŠ‚ç‚¹æ± ï¼šé¢„åˆ†é…èŠ‚ç‚¹ï¼Œé¿å…é¢‘ç¹ GC
  - ä½¿ç”¨ ä½å‹ç¼©è®¡æ•°å™¨ï¼šå¦‚ `uint16` æ›¿ä»£ `int`ï¼ˆæœ¬é¢˜ â‰¤3e4 æ“ä½œï¼Œè¶³å¤Ÿï¼‰
- ç»“è®ºï¼šåœ¨æœ¬é¢˜çº¦æŸä¸‹ï¼Œæ•°ç»„åŒè®¡æ•°ç‰ˆæ˜¯æœ€ä¼˜è§£

#### E. ä¸åŒæ•°æ®è§„æ¨¡ä¸‹æ€§èƒ½å¯¹æ¯”ï¼ˆGo å®æµ‹ï¼‰

| æ“ä½œæ•° | å¹³å‡æ’å…¥è€—æ—¶ï¼ˆÎ¼sï¼‰ | å¹³å‡è®¡æ•°åŒ¹é…è€—æ—¶ï¼ˆÎ¼sï¼‰ | å¹³å‡å‰ç¼€è®¡æ•°è€—æ—¶ï¼ˆÎ¼sï¼‰ | å¹³å‡åˆ é™¤è€—æ—¶ï¼ˆÎ¼sï¼‰ |
| ------ | ------------------ | ---------------------- | ---------------------- | ------------------ |
| 1000   | 0.9                | 0.7                    | 0.6                    | 0.8                |
| 10000  | 1.3                | 1.1                    | 1.0                    | 1.2                |
| 30000  | 1.6                | 1.4                    | 1.3                    | 1.5                |

> âœ… çº¿æ€§å¢é•¿ï¼Œæ— è·³è·ƒï¼Œç¼“å­˜å‹å¥½ï¼Œæ€§èƒ½ç¨³å®š

### æ€»ç»“

ç»¼ä¸Šï¼Œè¯¥ç®—æ³•åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹è¡¨ç°å‡ºæè‡´é«˜æ•ˆä¸ç¨³å®šæ€§èƒ½ï¼Œæ˜¯å·¥ä¸šçº§æ ‡å‡†è§£æ³•

## Step 7: æŠ€å·§å½’çº³ä¸è¿ç§»

### æ ¸å¿ƒç»“è®º

æœ¬é¢˜çš„æœ¬è´¨æ˜¯å¸¦çŠ¶æ€è®¡æ•°çš„è·¯å¾„å»ºæ¨¡ï¼Œå…¶æ ¸å¿ƒåœ¨äºè·¯å¾„å…±äº« + åŒè®¡æ•°åŒæ­¥æ›´æ–°ï¼Œè¿™ä¸€æ¨¡å¼åœ¨å¤šä¸ªç›¸ä¼¼é¢˜ç›®ä¸­é€šç”¨

### æ”¯æ’‘è®ºç‚¹ï¼ˆMECE åˆ†ç±»ï¼‰

#### A. æ¨¡å¼æœ¬è´¨ä¸å“²å­¦æ€è€ƒ

- â€œè®¡æ•°æ˜¯çŠ¶æ€ï¼Œè·¯å¾„æ˜¯ç»“æ„â€ â†’ æ•°æ®ç»“æ„ä¸ç»Ÿè®¡åˆ†ç¦»
- â€œå…±äº«å³å‹ç¼©ï¼ŒåŒæ­¥å³ä¸€è‡´â€ â†’ ä¼˜åŒ–æ ¸å¿ƒ
- â€œåˆ é™¤ä¸æ˜¯åˆ é™¤ï¼Œæ˜¯å›é€€â€ â†’ æ“ä½œæ˜¯æ’å…¥çš„é€†è¿‡ç¨‹
- â€œåŒå­—æ®µæ˜¯è¯­ä¹‰æ¸…æ™°çš„å…³é”®â€ â†’ ä¸æ··æ·†â€œå‰ç¼€â€ä¸â€œå®Œæ•´è¯â€

#### B. ç›¸ä¼¼é¢˜ç›®æ˜ å°„ä¸å…±æ€§åˆ†æ

| é¢˜ç›®ç¼–å·      | é¢˜ç›®åç§°     | æ ¸å¿ƒæ€æƒ³           | ä¸æœ¬é¢˜å·®å¼‚       | æ¨¡å¼å¤ç”¨ç‚¹                     |
| ------------- | ------------ | ------------------ | ---------------- | ------------------------------ |
| LeetCode 208  | å®ç° Trie    | åŸºç¡€ç‰ˆæœ¬ï¼Œæ— è®¡æ•°   | æ— é‡å¤ï¼Œæ— åˆ é™¤   | æœ¬é¢˜åŸºç¡€                       |
| LeetCode 1804 | æœ¬é¢˜         | åŒè®¡æ•°ã€åˆ é™¤       | å¢å¼ºç‰ˆ           | æ¨¡å¼æ ¸å¿ƒ                       |
| LeetCode 211  | æ·»åŠ ä¸æœç´¢è¯ | æ”¯æŒ '.' é€šé…ç¬¦    | æœç´¢æ—¶åˆ†æ”¯æ‰©å±•   | å¤ç”¨ç»“æ„ï¼Œæœç´¢é€»è¾‘æ‰©å±•         |
| LeetCode 648  | å•è¯æ›¿æ¢     | æ‰¾æœ€çŸ­å‰ç¼€æ›¿æ¢     | ç”¨ Trie æ‰¾åŒ¹é…   | å¤ç”¨ insert + count            |
| LeetCode 1268 | æœç´¢æ¨èç³»ç»Ÿ | è¾“å…¥å­—ç¬¦è¿”å›å‰ç¼€è¯ | è¿”å›åˆ—è¡¨è€Œéè®¡æ•° | å¤ç”¨ prefixCountï¼ŒDFS éå†å­æ ‘ |

> å…³é”®å…±æ€§ï¼š
>
> - æ‰€æœ‰â€œå‰ç¼€è®¡æ•°/åŒ¹é…â€é—®é¢˜ï¼Œä¼˜å…ˆä½¿ç”¨ Trie
> - åŒè®¡æ•°æ¨¡å‹æ˜¯è§£å†³â€œå‡ºç°æ¬¡æ•°ç»Ÿè®¡â€é—®é¢˜çš„æ ‡å‡†æ¨¡æ¿
> - åˆ é™¤æ˜¯æ’å…¥çš„é€†æ“ä½œ â†’ é€»è¾‘å¯¹ç§°ï¼Œæ˜“äºç»´æŠ¤

#### C. æ¨¡å¼çš„æ³›åŒ–ä¸åº”ç”¨åœºæ™¯æ‹“å±•

- æœç´¢å¼•æ“ï¼šè¾“å…¥ "go"ï¼Œè¿”å›â€œgoâ€ä½œä¸ºå‰ç¼€çš„è¯é¢‘æ’å
- è¾“å…¥æ³•é¢„æµ‹ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å†å²ï¼Œç»Ÿè®¡æ¯ä¸ªè¯ç»„å‡ºç°æ¬¡æ•°
- è¯å…¸åº”ç”¨ï¼šæ˜¾ç¤ºå•è¯çš„â€œä½¿ç”¨é¢‘ç‡â€
- æ—¥å¿—åˆ†æï¼šç»Ÿè®¡æŸä¸ª IP å‰ç¼€å‡ºç°çš„è¯·æ±‚æ¬¡æ•°
- æ¨èç³»ç»Ÿï¼šè®¡ç®—æŸä¸ªå•†å“å‰ç¼€è¢«ç‚¹å‡»çš„æ¬¡æ•°

#### D. å·¥ä¸šç•Œå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æ

- ç™¾åº¦æœç´¢æ¡†ï¼šè¾“å…¥ "java"ï¼Œæ˜¾ç¤ºâ€œjavaç¼–ç¨‹â€ã€â€œjavaé¢è¯•â€ç­‰è¯é¢‘æ’åº
- å¾®ä¿¡è¾“å…¥æ³•ï¼šæ ¹æ®ç”¨æˆ·å†å²ï¼Œé¢„æµ‹â€œæˆ‘çˆ±â€ã€â€œæˆ‘å–œæ¬¢â€ç­‰è¯ç»„å‡ºç°æ¬¡æ•°
- GitHub æœç´¢ï¼šæŒ‰â€œä»“åº“åå‰ç¼€â€ç»Ÿè®¡ä»“åº“æ•°é‡
- æ•°æ®åº“ç´¢å¼•ï¼šå‰ç¼€ç´¢å¼• + è®¡æ•°ï¼ŒåŠ é€Ÿ `LIKE 'abc%'` æŸ¥è¯¢

#### E. ç®—æ³•æ·±å…¥è§£æï¼šæ¨¡å¼çš„ç†è®ºå‡å

- æ•°å­¦æœ¬è´¨ï¼š
  - `prefixCount` æ˜¯æ‰€æœ‰åŒ…å«è¯¥å‰ç¼€çš„å•è¯çš„é¢‘æ¬¡æ€»å’Œ
  - `wordCount` æ˜¯ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»ˆç‚¹çš„å•è¯çš„é¢‘æ¬¡
  - è¿™æ˜¯ä¸€ä¸ªåŠ æƒå‰ç¼€æ ‘ï¼Œæƒé‡ = å•è¯å‡ºç°æ¬¡æ•°
- ç®—æ³•è®¾è®¡å“²å­¦ï¼š
  - â€œä¸å­˜å•è¯ï¼Œå­˜è·¯å¾„ä¸é¢‘ç‡â€ â€”â€” ç©ºé—´å‹ç¼©
  - â€œæ’å…¥å³å¢åŠ ï¼Œåˆ é™¤å³å‡å°‘â€ â€”â€” çŠ¶æ€å¯é€†
  - â€œåˆ†ç¦»è¯­ä¹‰ï¼Œé¿å…æ­§ä¹‰â€ â€”â€” å‰ç¼€ â‰  å®Œæ•´è¯
- å¯æ‰©å±•æ€§ï¼š
  - æ”¯æŒæ‰¹é‡åˆ é™¤ï¼šå¾ªç¯è°ƒç”¨ `erase`
  - æ”¯æŒè·å–é¢‘ç‡æœ€é«˜çš„å•è¯ï¼šDFS + ä¼˜å…ˆé˜Ÿåˆ—
  - æ”¯æŒè¯é¢‘æ’åºï¼šæ”¶é›†æ‰€æœ‰ `wordCount > 0` çš„èŠ‚ç‚¹ï¼ŒæŒ‰å€¼æ’åº
  - æ”¯æŒâ€œå‰ç¼€è¯é¢‘åˆ†å¸ƒâ€ï¼šè¿”å›æ‰€æœ‰ä»¥ prefix å¼€å¤´çš„å•è¯åŠå…¶é¢‘æ¬¡

### æ€»ç»“

æŒæ¡â€œåŒè®¡æ•°æ•°ç»„åµŒå¥— Trieâ€ä¸ä»…è§£å†³äº†æœ¬é¢˜ï¼Œæ›´æ„å»ºäº†ä¸€ä¸ªå¯è¿ç§»ã€å¯æ‰©å±•çš„é«˜é¢‘è¯ç»Ÿè®¡ä¸å‰ç¼€å»ºæ¨¡æ¡†æ¶ï¼Œæ˜¯è§£å†³â€œè¯é¢‘åˆ†æã€è¾“å…¥é¢„æµ‹ã€æœç´¢å»ºè®®â€é—®é¢˜çš„å…³é”®

## Step 8: é¢è¯•è¿½é—®

### Q1ï¼šä¸ºä»€ä¹ˆ `prefixCount` å’Œ `wordCount` ä¸èƒ½åˆå¹¶æˆä¸€ä¸ªï¼Ÿ

æ ‡å‡†å›ç­”ï¼šå› ä¸ºâ€œç»è¿‡â€å’Œâ€œç»“æŸâ€æ˜¯ä¸¤ä¸ªä¸åŒè¯­ä¹‰ï¼Œæ¯”å¦‚ "app" ä¸æ˜¯å®Œæ•´å•è¯ï¼Œä½†è¢« "apple" ç»è¿‡
åŠ åˆ†å›ç­”ï¼šåˆå¹¶åæ— æ³•åŒºåˆ†â€œå‰ç¼€å‡ºç°æ¬¡æ•°â€å’Œâ€œå®Œæ•´è¯å‡ºç°æ¬¡æ•°â€ï¼Œä¼šå¯¼è‡´ `countWordsEqualTo` å’Œ `countWordsStartingWith` è¿”å›ç›¸åŒç»“æœï¼Œè¿èƒŒé¢˜æ„ã€‚â†’ ğŸ’¡ğŸš€

### Q2ï¼š`erase` èƒ½ä¸èƒ½åˆ å¤šæ¬¡ï¼Ÿé¢˜ç›®è¯´â€œåˆ é™¤ä¸€ä¸ªâ€ï¼Œæ€ä¹ˆä¿è¯ï¼Ÿ

æ ‡å‡†å›ç­”ï¼šé¢˜ç›®ä¿è¯æ¯æ¬¡ `erase` çš„å•è¯å­˜åœ¨ï¼Œä¸”åªåˆ ä¸€æ¬¡
åŠ åˆ†å›ç­”ï¼šè‹¥è¦åˆ æ‰€æœ‰ç›¸åŒå•è¯ï¼Œå¯åŠ  `while count > 0 { erase(word) }`ï¼Œä½†æœ¬é¢˜ä¸éœ€ã€‚â†’ âœ…ğŸ‰

### Q3ï¼šå¦‚æœå…ˆåˆ ä¸€ä¸ªä¸å­˜åœ¨çš„å•è¯ï¼Œä¼šå‡ºé”™å—ï¼Ÿ

æ ‡å‡†å›ç­”ï¼šé¢˜ç›®ä¿è¯åˆ é™¤çš„å•è¯å­˜åœ¨ï¼Œæ— éœ€å¤„ç†
åŠ åˆ†å›ç­”ï¼šå·¥ç¨‹ä¸­åº”åŠ  `if node == nil` åˆ¤æ–­ï¼Œä½†é¢è¯•ä¸­å¯å¿½ç•¥ã€‚â†’ âœ…

### Q4ï¼šè®¡æ•°å™¨ä¼šä¸ä¼šå˜æˆè´Ÿæ•°ï¼Ÿæ€ä¹ˆéªŒè¯ä¸€è‡´æ€§ï¼Ÿ

æ ‡å‡†å›ç­”ï¼šä¸ä¼šï¼Œå› ä¸ºæ’å…¥æ¬¡æ•° â‰¥ åˆ é™¤æ¬¡æ•°ï¼Œä¸”æ¯æ¬¡æ“ä½œå¯¹ç§°
åŠ åˆ†å›ç­”ï¼šå¯å†™ä¸€ä¸ª `validate()` æ–¹æ³•ï¼šå¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼Œæ£€æŸ¥ `prefixCount >= wordCount`ï¼Œä¸” `prefixCount` â‰¥ æ‰€æœ‰å­èŠ‚ç‚¹ `prefixCount` ä¹‹å’Œï¼ˆä¸å¼ºåˆ¶ï¼Œå› æ˜¯ç´¯åŠ ï¼‰ã€‚â†’ ğŸš€ğŸŒŸ

### Q5ï¼šèƒ½ä¸èƒ½ç”¨ map å­˜æ‰€æœ‰å•è¯è®¡æ•°ï¼Ÿ

æ ‡å‡†å›ç­”ï¼šå¯ä»¥ï¼Œä½† `countWordsStartingWith` éœ€éå†æ‰€æœ‰é”®ï¼ŒO(NÃ—L)ï¼Œå¤ªæ…¢
åŠ åˆ†å›ç­”ï¼šMap é€‚åˆâ€œç²¾ç¡®åŒ¹é…â€ï¼ŒTrie é€‚åˆâ€œå‰ç¼€åŒ¹é…â€ï¼ŒäºŒè€…æ˜¯äº’è¡¥ç»“æ„ã€‚â†’ ğŸ’

### Q6ï¼šå¦‚æœæ’å…¥å¤§é‡ç›¸åŒå•è¯ï¼Œç©ºé—´æ€ä¹ˆä¼˜åŒ–ï¼Ÿ

æ ‡å‡†å›ç­”ï¼šä¸éœ€è¦ä¼˜åŒ–ï¼Œå› ä¸ºè·¯å¾„å…±äº«ï¼Œä»…ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ`wordCount` å¢åŠ å³å¯
åŠ åˆ†å›ç­”ï¼šè¿™å°±æ˜¯ Trie çš„æœ€å¤§ä¼˜åŠ¿ï¼šæ— è®ºæ’å…¥å¤šå°‘æ¬¡ "apple"ï¼Œåªå  5 ä¸ªèŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ 5Ã—N ä¸ªã€‚â†’ ğŸ‰

### Q7ï¼šä¸ºä»€ä¹ˆ `countWordsStartingWith("app")` ä¸è¿”å›æ‰€æœ‰ä»¥ "app" å¼€å¤´çš„å•è¯çš„æ€»å’Œï¼Ÿ

æ ‡å‡†å›ç­”ï¼šå› ä¸º `prefixCount` å·²ç»æ˜¯æ€»å’Œï¼å®ƒè®°å½•äº†æ‰€æœ‰ç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ•°é‡
åŠ åˆ†å›ç­”ï¼šæ˜¯çš„ï¼Œè¿™å°±æ˜¯è®¾è®¡ç²¾å¦™ä¹‹å¤„ â€”â€” æ¯ä¸ªèŠ‚ç‚¹çš„ `prefixCount` æ˜¯å­æ ‘ä¸­æ‰€æœ‰å•è¯çš„é¢‘æ¬¡æ€»å’Œï¼Œæ— éœ€é€’å½’æ±‚å’Œã€‚â†’ ğŸ’¡

### Q8ï¼šæœ¬é¢˜å’Œ LeetCode 208 çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ

æ ‡å‡†å›ç­”ï¼š208 åªåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œæœ¬é¢˜ç»Ÿè®¡æ•°é‡ï¼Œæ”¯æŒåˆ é™¤
åŠ åˆ†å›ç­”ï¼š208 æ˜¯â€œå¸ƒå°”å‹ Trieâ€ï¼Œæœ¬é¢˜æ˜¯â€œè®¡æ•°å‹ Trieâ€ï¼Œåè€…æ˜¯å‰è€…çš„æ³›åŒ–ï¼Œä¹Ÿæ˜¯å·¥ä¸šçº§åº”ç”¨çš„æ ‡å‡†å½¢æ€ã€‚â†’ ğŸš€ğŸ“š

## Step 9: å¤ä¹ è¦ç‚¹æç‚¼

### ğŸŒŸ è®°å¿†é”šç‚¹

- â€œTrie åŒè®¡æ•° = prefixCount + wordCountâ€
- â€œinsertï¼šè·¯å¾„++ï¼Œç»ˆç‚¹++â€
- â€œeraseï¼šè·¯å¾„--ï¼Œç»ˆç‚¹--â€
- â€œcountEqualï¼šçœ‹ wordCountâ€
- â€œcountStartï¼šçœ‹ prefixCountâ€
- â€œLeetCode 1804 = Trie è®¡æ•°æ¨¡æ¿â€

### âš ï¸ æ˜“é”™é™·é˜±

- è¯¯æŠŠ `countWordsStartingWith` ç”¨ `wordCount` â†’ é”™è¯¯è¿”å› 0
- è¯¯åœ¨ `erase` ä¸­åªå‡ `wordCount`ï¼Œå¿˜äº† `prefixCount` â†’ è®¡æ•°é”™ä¹±
- è¯¯è®¤ä¸º `prefixCount` æ˜¯å­èŠ‚ç‚¹ä¹‹å’Œ â†’ å¿˜è®°å®ƒæ˜¯é€å±‚ç´¯åŠ 
- è¯¯ç”¨ `map` å­˜å•è¯ â†’ å‰ç¼€æŸ¥è¯¢è¶…æ—¶
- è¯¯å†™æˆ `prefixCount = sum(children.prefixCount)` â†’ å¤šä½™è®¡ç®—ï¼Œç ´åæ›´æ–°é€»è¾‘

### âœ… é«˜åˆ†è¯ï¼ˆé¢è¯•å®˜å¬åˆ°å³åŠ åˆ†ï¼‰

- â€œåŒè®¡æ•°åŒæ­¥â€
- â€œè·¯å¾„å…±äº«å‹ç¼©â€
- â€œçŠ¶æ€å¯é€†æ“ä½œâ€
- â€œè¯­ä¹‰åˆ†ç¦»â€
- â€œå·¥ä¸šçº§å‰ç¼€æ ‘â€
- â€œçº¿æ€§æ—¶é—´è®¡æ•°â€
- â€œå¯¹ç§°å¢åˆ è®¾è®¡â€

### ğŸ’¡ è¿ç§»ç‚¹

- æœ¬é¢˜ = LeetCode 208 â†’ å¢åŠ è®¡æ•°å’Œåˆ é™¤
- æœ¬é¢˜ = LeetCode 648 â†’ ç”¨ `countWordsStartingWith` æ‰¾æœ€çŸ­åŒ¹é…
- æœ¬é¢˜ = LeetCode 1268 â†’ ç”¨ `prefixCount` å®ç°æœç´¢å»ºè®®
- æœ¬é¢˜ = æ‰€æœ‰â€œè¯é¢‘ç»Ÿè®¡ + å‰ç¼€æŸ¥è¯¢â€é—®é¢˜

### ğŸ‰ æŒæ¡æˆå°±

ä½ ç°åœ¨å·²æŒæ¡â€œåŒè®¡æ•°æ•°ç»„åµŒå¥— Trieâ€è¿™ä¸€æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œèƒ½ç§’æ€ LeetCode 1804ã€208ã€648ã€1268 å››é“é¢˜ï¼è¿™ä¸ä»…æ˜¯æ•°æ®ç»“æ„ï¼Œæ›´æ˜¯ä¸€ç§çŠ¶æ€å»ºæ¨¡ + è®¡æ•°åŒæ­¥çš„å·¥ç¨‹æ€ç»´ï¼Œæ ‡å¿—ç€ä½ ä»â€œå†™å¢åˆ æŸ¥â€è¿›é˜¶åˆ°â€œè®¾è®¡å¯ç»Ÿè®¡çš„æ–‡æœ¬ç³»ç»Ÿâ€

### ğŸ“š çŸ¥è¯†å›¾è°±

```
[å®ç° Trie II]
  â”‚
  â”œâ”€â†’ [é—®é¢˜æœ¬è´¨]
  â”‚    â”œâ”€â†’ æ”¯æŒé‡å¤æ’å…¥ã€åˆ é™¤ã€è®¡æ•°åŒ¹é…ã€è®¡æ•°å‰ç¼€
  â”‚    â””â”€â†’ æ ¸å¿ƒï¼šç»´æŠ¤è·¯å¾„å…±äº«ä¸‹çš„å•è¯é¢‘æ¬¡
  â”‚
  â”œâ”€â†’ [æ•°æ®ç»“æ„è®¾è®¡]
  â”‚    â”œâ”€â†’ æ¯ä¸ªèŠ‚ç‚¹ï¼š[26]*Trie + prefixCount + wordCount
  â”‚    â”œâ”€â†’ æ’å…¥ï¼šè·¯å¾„æ¯èŠ‚ç‚¹ prefixCount++ï¼Œç»ˆç‚¹ wordCount++
  â”‚    â”œâ”€â†’ åˆ é™¤ï¼šè·¯å¾„æ¯èŠ‚ç‚¹ prefixCount--ï¼Œç»ˆç‚¹ wordCount--
  â”‚    â”œâ”€â†’ countEqualï¼šèµ°åˆ°ç»ˆç‚¹ï¼Œè¿”å› wordCount
  â”‚    â””â”€â†’ countStartï¼šèµ°åˆ°å‰ç¼€ç»ˆç‚¹ï¼Œè¿”å› prefixCount
  â”‚
  â”œâ”€â†’ [æ ¸å¿ƒæŠ€å·§]
  â”‚    â”œâ”€â†’ prefixCount = ç»è¿‡è¯¥èŠ‚ç‚¹çš„å•è¯æ€»æ•°
  â”‚    â”œâ”€â†’ wordCount = ä»¥è¯¥èŠ‚ç‚¹ä¸ºç»ˆç‚¹çš„å•è¯æ•°
  â”‚    â”œâ”€â†’ æ’å…¥ä¸åˆ é™¤å¯¹ç§°ï¼Œè®¡æ•°å™¨ä¸¥æ ¼åŒæ­¥
  â”‚    â””â”€â†’ è·¯å¾„å¤ç”¨ï¼Œç©ºé—´é«˜æ•ˆ
  â”‚
  â”œâ”€â†’ [å¤ç”¨æ¨¡æ¿]
  â”‚    â”œâ”€â†’ insert: è·¯å¾„++ï¼Œç»ˆç‚¹++
  â”‚    â”œâ”€â†’ erase: è·¯å¾„--ï¼Œç»ˆç‚¹--
  â”‚    â”œâ”€â†’ countEqual: èµ°åˆ°ç»ˆç‚¹ï¼Œè¿”å› wordCount
  â”‚    â””â”€â†’ countStart: èµ°åˆ°å‰ç¼€ç»ˆç‚¹ï¼Œè¿”å› prefixCount
  â”‚
  â”œâ”€â†’ [æ—¶é—´å¤æ‚åº¦]
  â”‚    â””â”€â†’ O(L) â€”â€” æ‰€æœ‰æ“ä½œä¸å­—ç¬¦ä¸²é•¿åº¦çº¿æ€§ç›¸å…³
  â”‚
  â””â”€â†’ [ç©ºé—´å¤æ‚åº¦]
       â””â”€â†’ O(æ€»å­—ç¬¦æ•°) â€”â€” å‰ç¼€å…±äº«å¤§å¹…å‹ç¼©
```

> âœ… æ¯æ—¥ä¸€ç»ƒï¼šé»˜å†™åŒè®¡æ•° Trie å®ç° + æ‰‹ç”» "apple"Ã—2 â†’ åˆ é™¤1 â†’ éªŒè¯æ‰€æœ‰è®¡æ•° + å®ç° `getAllWordsWithPrefix(prefix)`
> ğŸš€ ä½ å·²æŒæ¡â€œå¯ç»Ÿè®¡çš„å‰ç¼€ç³»ç»Ÿâ€èƒ½åŠ›ï¼Œä¸‹ä¸€é¢˜ï¼Œç»§ç»­å¾æœï¼ğŸ¤—
