# LeetCode 90 - å­é›† II

## Step 1ï¼šé¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰

è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ä»»æ„é¡ºåºæ’åˆ—

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼š`nums = [1,2,2]`
è¾“å‡ºï¼š`[[],[1],[2],[1,2],[1,2,2],[2,2]]`
ï¼ˆæ³¨æ„ï¼š`[2,1]` ä¸å‡ºç°ï¼Œä¸” `[2]` åªå‡ºç°ä¸€æ¬¡ï¼‰

ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼š`nums = [0]`
è¾“å‡ºï¼š`[[],[0]]`

ç¤ºä¾‹ 3ï¼š
è¾“å…¥ï¼š`nums = [4,4,4,1,4]`
è¾“å‡ºï¼š`[[],[1],[4],[1,4],[4,4],[1,4,4],[4,4,4],[1,4,4,4],[4,4,4,4]]`

çº¦æŸæ¡ä»¶ï¼š

- `1 <= nums.length <= 10`
- `-10 <= nums[i] <= 10`
- æ•°ç»„ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ 
- å­é›†ä¸èƒ½é‡å¤ï¼Œå³ `[2,2]` å’Œ `[2,2]` è§†ä¸ºåŒä¸€ä¸ªå­é›†ï¼Œåªèƒ½å‡ºç°ä¸€æ¬¡
- å­é›†å†…éƒ¨å…ƒç´ é¡ºåºæ— å…³ï¼ˆ{2,1} å’Œ {1,2} è§†ä¸ºç›¸åŒï¼‰
- è¾“å‡ºé¡ºåºä»»æ„

æ ¸å¿ƒæ„å›¾ï¼š
æœ¬é¢˜æ˜¯ LeetCode 78ï¼ˆå­é›†ï¼‰çš„å¸¦é‡å¤å…ƒç´ ç‰ˆæœ¬ã€‚å…³é”®æ´å¯Ÿåœ¨äºï¼š

> å½“æ•°ç»„ä¸­å­˜åœ¨é‡å¤å…ƒç´ æ—¶ï¼Œè‹¥ä¸åŠ æ§åˆ¶ï¼Œå›æº¯ä¼šç”Ÿæˆå¤šä¸ªç›¸åŒçš„å­é›†ï¼ˆå¦‚é€‰ç¬¬ä¸€ä¸ª 2 æˆ–ç¬¬äºŒä¸ª 2 å¾—åˆ° [2]ï¼‰ã€‚
> è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå…ˆæ’åºï¼Œç„¶ååœ¨æ¯ä¸€å±‚é€’å½’ä¸­ï¼Œè·³è¿‡ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒçš„ã€ä¸”æœªè¢«é€‰ä¸­çš„é‡å¤å…ƒç´ 
> æ ¸å¿ƒæ€æƒ³ï¼šåŒå±‚å»é‡ï¼Œå¼‚å±‚å…è®¸

é¢è¯•ä¸­é«˜åˆ†ç­”æ¡ˆéœ€æ˜ç¡®ï¼š

- ä¸ºä»€ä¹ˆå¿…é¡»æ’åº
- ä¸ºä»€ä¹ˆæ˜¯ `i > index && nums[i] == nums[i-1]` è€Œä¸æ˜¯ `i > 0`
- ä»€ä¹ˆæ˜¯â€œåŒå±‚é‡å¤â€å’Œâ€œå¼‚å±‚é‡å¤â€
- ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ set å»é‡ï¼ˆè™½ç„¶å¯è¡Œï¼Œä½†éç®—æ³•æœ¬è´¨ï¼‰
- æ—¶é—´å¤æ‚åº¦ä¸ºä½•ä»ä¸º O(n Ã— 2^n)

## Step 2: æ ¸å¿ƒç»“è®ºï¼ˆé‡‘å­—å¡”ç»“æ„ä¼˜åŒ–ç‰ˆï¼‰

æ ¸å¿ƒç»“è®ºï¼šæœ¬é¢˜çš„æœ€ä¼˜è§£æ˜¯å›æº¯ç®—æ³• + æ’åº + åŒå±‚å»é‡ï¼ˆi > index && nums[i] == nums[i-1]ï¼‰ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼šé€»è¾‘ä¸¥å¯†ã€æ— éœ€é¢å¤–ç©ºé—´å»é‡ã€å®Œç¾å¤ç”¨å­é›† I æ¨¡æ¿ã€ç¬¦åˆç»„åˆç”Ÿæˆçš„æ•°å­¦æœ¬è´¨ï¼Œæ˜¯å¤„ç†â€œå¸¦é‡å¤å…ƒç´ ç»„åˆé—®é¢˜â€çš„æ ‡å‡†èŒƒå¼

æ”¯æ’‘è®ºç‚¹ï¼ˆMECE åˆ†ç±»ï¼‰ï¼š

A. ç†è®ºæœ€ä¼˜æ€§ï¼šè¯¥ç®—æ³•ç²¾ç¡®å»ºæ¨¡é‡å¤å…ƒç´ çš„ç»„åˆçº¦æŸ
åœ¨ LeetCode 78 ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡â€œæŒ‰ç´¢å¼•é€’å¢é€‰æ‹©â€é¿å…äº†é¡ºåºæ— å…³å¯¼è‡´çš„é‡å¤ã€‚ä½†åœ¨å…ƒç´ å€¼é‡å¤æ—¶ï¼Œä¼šå‡ºç°ä¸åŒè·¯å¾„ç”Ÿæˆç›¸åŒå­é›†çš„é—®é¢˜ï¼š

- `nums = [2,2,3]`
  - è·¯å¾„1ï¼šé€‰ç¬¬ 0 ä¸ª 2 â†’ ä¸é€‰ç¬¬ 1 ä¸ª 2 â†’ å¾—åˆ° `[2]`
  - è·¯å¾„2ï¼šä¸é€‰ç¬¬ 0 ä¸ª 2 â†’ é€‰ç¬¬ 1 ä¸ª 2 â†’ å¾—åˆ° `[2]` â†’ é‡å¤ï¼

è§£å†³æ–¹æ¡ˆæ˜¯ï¼š

1. å…ˆæ’åºï¼šä½¿ç›¸åŒå…ƒç´ ç›¸é‚» â†’ `[2,2,3]`
1. åŒå±‚å»é‡ï¼šåœ¨å½“å‰é€’å½’å±‚ï¼ˆåŒä¸€ `index` èµ·å§‹çš„å¾ªç¯ï¼‰ä¸­ï¼Œè‹¥ `nums[i] == nums[i-1]` ä¸” `i > index`ï¼Œè¯´æ˜è¿™ä¸ªå…ƒç´ æ˜¯â€œé‡å¤å€¼â€ï¼Œä¸”å‰ä¸€ä¸ªç›¸åŒå€¼åœ¨åŒä¸€å±‚æœªè¢«é€‰ä¸­ï¼Œæ­¤æ—¶è·³è¿‡
   - ä¸ºä»€ä¹ˆ `i > index`ï¼Ÿå› ä¸º `i == index` æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¿…é¡»é€‰ï¼Œä¸èƒ½è·³
   - ä¸ºä»€ä¹ˆâ€œæœªè¢«é€‰ä¸­â€ï¼Ÿå› ä¸º `i-1` æ²¡æœ‰è¢«é€‰ï¼Œæ‰å¯èƒ½é€ æˆé‡å¤

è¿™æ ·ï¼ŒåŒä¸€å±‚ä¸­ï¼Œç›¸åŒå€¼åªé€‰ç¬¬ä¸€ä¸ªï¼Œåç»­ç›¸åŒå€¼è¢«è·³è¿‡ï¼Œç¡®ä¿ `[2]` åªç”Ÿæˆä¸€æ¬¡

B. å¯¹æ¯”åŠ£åŠ¿æ€§ï¼šå…¶ä»–ä¸»æµæ–¹æ³•å‡å­˜åœ¨ç»“æ„æ€§ç¼ºé™·
| æ–¹æ³• | é—®é¢˜ | ä¸ºä½•æ¬¡ä¼˜ |
|------|------|----------|
| ä½¿ç”¨ set å»é‡ï¼ˆå­˜æ‰€æœ‰å­é›†ï¼‰ | ç©ºé—´å¼€é”€å¤§ï¼ŒO(2^n Ã— n)ï¼Œä¸”æ©ç›–ç®—æ³•æœ¬è´¨ | é¢è¯•å®˜æœŸæœ›çœ‹åˆ°â€œå‰ªæâ€è€Œéâ€œäº‹åæ¸…ç†â€ |
| æš´åŠ›æšä¸¾ + hash å»é‡ | åŒä¸Šï¼Œå±äºâ€œä½œå¼Šå¼ä¼˜åŒ–â€ | ä¸ä½“ç°ç®—æ³•æ€ç»´ |
| ç”¨ visited æ•°ç»„æ§åˆ¶ | æ— æ³•åŒºåˆ†â€œåŒå±‚â€ä¸â€œå¼‚å±‚â€ | ä¼šè¯¯åˆ¤ï¼Œå¦‚ [2,2,3] ä¸­ç¬¬äºŒä¸ª 2 åœ¨ä¸åŒå±‚å¯é€‰ |
| åŠ¨æ€è§„åˆ’ | æ— æ³•å®šä¹‰çŠ¶æ€è½¬ç§»ï¼Œå­é›†æ— æœ€ä¼˜å­ç»“æ„ | æœ¬é¢˜æ˜¯ç»„åˆç”Ÿæˆï¼Œéæœ€ä¼˜åŒ– |
| ä¸æ’åºç›´æ¥å»é‡ | æ— æ³•åˆ¤æ–­å“ªäº›é‡å¤å€¼åº”è·³è¿‡ | å¦‚ [2,3,2] ä¸­ä¸¤ä¸ª 2 ä¸ç›¸é‚»ï¼Œæ— æ³•è¯†åˆ« |

C. é€‚ç”¨è¾¹ç•Œï¼šæ˜ç¡®çº¦æŸå‰æï¼Œé¿å…æ³›åŒ–è¯¯ç”¨

- âœ… é€‚ç”¨ï¼šæ•°ç»„ä¸­å­˜åœ¨é‡å¤å…ƒç´ ï¼Œæ±‚æ‰€æœ‰ä¸é‡å¤å­é›†
- âš ï¸ éœ€è°ƒæ•´ï¼šè‹¥è¦æ±‚å­é›†æŒ‰å­—å…¸åºæ’åˆ— â†’ éœ€é¢å¤–æ’åºè¾“å‡º
- âŒ ä¸é€‚ç”¨ï¼šè¦æ±‚å­é›†å¤§å°å›ºå®šï¼ˆå¦‚ç»„åˆæ€»å’Œï¼‰ã€è¦æ±‚å­é›†å’Œä¸ºæŸå€¼ã€è¦æ±‚å…ƒç´ äº’å¼‚
- ğŸ›¡ï¸ å·¥ç¨‹é˜²å¾¡ï¼šn â‰¤ 10ï¼Œæœ€å¤š 2^10=1024 ä¸ªå­é›†ï¼Œæ’åº + å‰ªæå¼€é”€å¯å¿½ç•¥

D. å·¥ç¨‹å®è·µä»·å€¼ï¼šç¬¦åˆå¤§å‚ç®—æ³•é¢è¯•è¯„åˆ†æ ‡å‡†

- âœ… ç®€æ´æ€§ï¼šä»…åœ¨ LeetCode 78 åŸºç¡€ä¸ŠåŠ ä¸€è¡Œå»é‡åˆ¤æ–­
- âœ… å¯è¯æ€§ï¼šé€šè¿‡å½’çº³æ³•å¯è¯ï¼šæ’åºåï¼Œæ¯å±‚åªé€‰ç¬¬ä¸€ä¸ªç›¸åŒå…ƒç´ ï¼Œèƒ½ç”Ÿæˆæ‰€æœ‰å”¯ä¸€å­é›†
- âœ… å¯æ‰©å±•æ€§ï¼šåŒä¸€æ¨¡å¼å¯è¿ç§»è‡³â€œç»„åˆæ€»å’Œ IIâ€ã€â€œæ’åˆ— IIâ€ç­‰
- âœ… è¡¨è¾¾åŠ›ï¼šåœ¨é¢è¯•ä¸­èƒ½è‡ªç„¶å¼•å‡ºâ€œä¸ºä»€ä¹ˆæ˜¯ i > indexï¼Ÿâ€â€œä¸ºä»€ä¹ˆä¸èƒ½ç”¨ i > 0ï¼Ÿâ€â€œä¸ºä»€ä¹ˆæ’åºæ˜¯å¿…è¦çš„ï¼Ÿâ€â€œèƒ½å¦ä¸ç”¨æ’åºï¼Ÿâ€ç­‰é«˜é˜¶è¿½é—®ï¼Œå±•ç°ç»„åˆå»ºæ¨¡æ·±åº¦

æ€»ç»“ï¼šå› æ­¤ï¼Œå›æº¯ + æ’åº + åŒå±‚å»é‡ï¼ˆ`i > index && nums[i] == nums[i-1]`ï¼‰æ˜¯æœ¬é¢˜åœ¨é€»è¾‘æ­£ç¡®æ€§ã€å®ç°æ•ˆç‡å’Œæ€ç»´æ·±åº¦ä¸Šçš„æœ€ä¼˜è§£ï¼Œæ˜¯â€œå¸¦é‡å¤å…ƒç´ ç»„åˆç”Ÿæˆâ€é—®é¢˜çš„é»„é‡‘æ¨¡æ¿

## Step 3: å¤šè¯­è¨€å®ç°

### Go ğŸ¹

```go
func subsetsWithDup(nums []int) [][]int {
    var result [][]int
    var path []int

    // æ’åºï¼šä½¿é‡å¤å…ƒç´ ç›¸é‚»
    sort.Ints(nums)

    var backtrack func(index int)
    backtrack = func(index int) {
        // æ¯æ¬¡è¿›å…¥éƒ½è®°å½•å½“å‰è·¯å¾„ï¼ˆæ˜¯ä¸€ä¸ªå­é›†ï¼‰
        temp := make([]int, len(path))
        copy(temp, path)
        result = append(result, temp)

        // ä» index å¼€å§‹ï¼Œå°è¯•æ¯ä¸ªå…ƒç´ 
        for i := index; i < len(nums); i++ {
            // åŒå±‚å»é‡ï¼šå¦‚æœå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªæœªè¢«é€‰ï¼ˆå³ i > indexï¼‰ï¼Œåˆ™è·³è¿‡
            if i > index && nums[i] == nums[i-1] {
                continue
            }

            // é€‰æ‹©ï¼šå°† nums[i] åŠ å…¥è·¯å¾„
            path = append(path, nums[i])

            // é€’å½’ï¼šä»ä¸‹ä¸€ä¸ªä½ç½®ç»§ç»­
            backtrack(i + 1)

            // æ’¤é”€é€‰æ‹©ï¼šç§»é™¤åˆšåŠ å…¥çš„å…ƒç´ 
            path = path[:len(path)-1]
        }
    }

    backtrack(0)
    return result
}
```

### Python ğŸ

```python
class Solution:
    def subsetsWithDup(self, nums: List[int]) -> List[List[int]]:
        result = []
        path = []

        # æ’åºï¼šä½¿é‡å¤å…ƒç´ ç›¸é‚»
        nums.sort()

        def backtrack(index):
            # æ¯æ¬¡è¿›å…¥éƒ½è®°å½•å½“å‰è·¯å¾„ï¼ˆæ˜¯ä¸€ä¸ªå­é›†ï¼‰
            result.append(path[:])  # æ·±æ‹·è´

            # ä» index å¼€å§‹å°è¯•æ¯ä¸ªå…ƒç´ 
            for i in range(index, len(nums)):
                # åŒå±‚å»é‡ï¼šå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªæœªè¢«é€‰ï¼ˆi > indexï¼‰
                if i > index and nums[i] == nums[i-1]:
                    continue

                # é€‰æ‹©ï¼šæ·»åŠ å…ƒç´ 
                path.append(nums[i])

                # é€’å½’ï¼šä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹
                backtrack(i + 1)

                # æ’¤é”€ï¼šç§»é™¤å…ƒç´ 
                path.pop()

        backtrack(0)
        return result
```

### TypeScript ğŸŸ¦

```typescript
function subsetsWithDup(nums: number[]): number[][] {
  const result: number[][] = [];
  const path: number[] = [];

  // æ’åºï¼šä½¿é‡å¤å…ƒç´ ç›¸é‚»
  nums.sort((a, b) => a - b);

  function backtrack(index: number): void {
    // æ¯æ¬¡è¿›å…¥éƒ½è®°å½•å½“å‰å­é›†
    result.push([...path]); // æ·±æ‹·è´

    // ä» index å¼€å§‹å°è¯•æ¯ä¸ªå…ƒç´ 
    for (let i = index; i < nums.length; i++) {
      // åŒå±‚å»é‡ï¼šå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªæœªè¢«é€‰ï¼ˆi > indexï¼‰
      if (i > index && nums[i] === nums[i - 1]) {
        continue;
      }

      // é€‰æ‹©ï¼šæ·»åŠ å…ƒç´ 
      path.push(nums[i]);

      // é€’å½’ï¼šä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹
      backtrack(i + 1);

      // æ’¤é”€ï¼šç§»é™¤å…ƒç´ 
      path.pop();
    }
  }

  backtrack(0);
  return result;
}
```

### Rust ğŸ¦€

```rust
impl Solution {
    pub fn subsets_with_dup(mut nums: Vec<i32>) -> Vec<Vec<i32>> {
        let mut result = Vec::new();
        let mut path = Vec::new();

        // æ’åºï¼šä½¿é‡å¤å…ƒç´ ç›¸é‚»
        nums.sort();

        fn backtrack(
            nums: &Vec<i32>,
            index: usize,
            path: &mut Vec<i32>,
            result: &mut Vec<Vec<i32>>,
        ) {
            // æ¯æ¬¡è¿›å…¥éƒ½è®°å½•å½“å‰å­é›†
            result.push(path.clone()); // æ·±æ‹·è´

            // ä» index å¼€å§‹å°è¯•æ¯ä¸ªå…ƒç´ 
            for i in index..nums.len() {
                // åŒå±‚å»é‡ï¼šå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªæœªè¢«é€‰ï¼ˆi > indexï¼‰
                if i > index && nums[i] == nums[i - 1] {
                    continue;
                }

                // é€‰æ‹©ï¼šæ·»åŠ å…ƒç´ 
                path.push(nums[i]);

                // é€’å½’ï¼šä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹
                backtrack(nums, i + 1, path, result);

                // æ’¤é”€ï¼šç§»é™¤å…ƒç´ 
                path.pop();
            }
        }

        backtrack(&nums, 0, &mut path, &mut result);
        result
    }
}
```

### ç®—æ³•æ·±å…¥è§£æï¼ˆè´¹æ›¼å¼ä¸‰å±‚ç»“æ„ï¼‰

ç¬¬ä¸€å±‚ï¼šä¸€å¥è¯è®²æ˜ç™½ â€”â€”

> æƒ³è±¡ä½ æœ‰ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„è‹¹æœã€‚ä½ ä¸æƒ³åœ¨è´­ç‰©æ¸…å•ä¸Šé‡å¤å†™â€œä¹°ä¸€ä¸ªè‹¹æœâ€ä¸¤æ¬¡ã€‚æ‰€ä»¥ä½ è§„å®šï¼šâ€œå¦‚æœå‰ä¸€ä¸ªè‹¹æœæ²¡ä¹°ï¼Œé‚£æˆ‘ä¹Ÿä¸èƒ½ä¹°è¿™ä¸ªè‹¹æœâ€ã€‚è¿™æ ·ï¼Œä½ å°±åªä¼šåœ¨â€œä¹°äº†ç¬¬ä¸€ä¸ªè‹¹æœâ€æˆ–â€œéƒ½æ²¡ä¹°â€ä¸­é€‰ä¸€ç§ï¼Œé¿å…é‡å¤

ç¬¬äºŒå±‚ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ å†™ â€”â€”
æˆ‘ä»¬ä¸æ˜¯åœ¨â€œæšä¸¾æ•°å­—â€ï¼Œè€Œæ˜¯åœ¨â€œæ§åˆ¶é‡å¤è·¯å¾„â€ï¼š

- ä¸ºä»€ä¹ˆå¿…é¡»æ’åºï¼Ÿ
  - å› ä¸ºé‡å¤å…ƒç´ å¿…é¡»ç›¸é‚»ï¼Œæ‰èƒ½é€šè¿‡ `nums[i] == nums[i-1]` åˆ¤æ–­æ˜¯å¦ä¸ºâ€œé‡å¤å€¼â€
  - è‹¥ä¸æ’åºï¼Œ`[2,3,2]` ä¸­ä¸¤ä¸ª 2 ä¸ç›¸é‚»ï¼Œæ— æ³•è¯†åˆ«ä¸ºç›¸åŒå…ƒç´  â†’ å»é‡å¤±æ•ˆ
  - æ’åºæ˜¯å»é‡çš„å‰ææ¡ä»¶ï¼Œä¸æ˜¯å¯é€‰ä¼˜åŒ–

- ä¸ºä»€ä¹ˆæ˜¯ `i > index && nums[i] == nums[i-1]`ï¼Ÿ
  - `i > index`ï¼šè¡¨ç¤ºå½“å‰å…ƒç´ ä¸æ˜¯è¿™ä¸€å±‚çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
    - å¦‚æœ `i == index`ï¼Œæ˜¯å½“å‰å±‚çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¿…é¡»å…è®¸é€‰æ‹©ï¼ˆå¦åˆ™ä¼šæ¼è§£ï¼‰
  - `nums[i] == nums[i-1]`ï¼šå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ å€¼ç›¸åŒ
  - å…³é”®é€»è¾‘ï¼šå¦‚æœå‰ä¸€ä¸ªç›¸åŒå…ƒç´ åœ¨è¿™ä¸€å±‚æ²¡è¢«é€‰ï¼ˆæ„å‘³ç€å®ƒè¢«è·³è¿‡äº†ï¼‰ï¼Œé‚£å½“å‰è¿™ä¸ªä¹Ÿä¸èƒ½é€‰ â†’ å¦åˆ™ä¼šäº§ç”Ÿä¸å‰ä¸€ä¸ªç›¸åŒçš„å­é›†
  - ä¸¾ä¾‹ï¼š`nums = [2,2,3]`ï¼Œåœ¨ index=0 å±‚ï¼š
    - ç¬¬ä¸€æ¬¡ï¼ši=0ï¼Œé€‰ç¬¬ä¸€ä¸ª 2 â†’ æ­£å¸¸
    - ç¬¬äºŒæ¬¡ï¼ši=1ï¼Œ`i > index`ï¼ˆ1>0ï¼‰ä¸” `nums[1]==nums[0]` â†’ è·³è¿‡
    - ç»“æœï¼šåªç”Ÿæˆä¸€ä¸ª `[2]`ï¼Œä¸ä¼šç”Ÿæˆä¸¤ä¸ª
  - å¦‚æœæ˜¯ `i > 0`ï¼Œé‚£ä¹ˆåœ¨é€’å½’æ·±å±‚ä¸­ï¼Œè‹¥å‰ä¸€ä¸ªå…ƒç´ è¢«é€‰äº†ï¼ˆæ¯”å¦‚ `[2,2]`ï¼‰ï¼Œæ­¤æ—¶ `i=2` çš„ `nums[2]==nums[1]`ï¼Œä¹Ÿä¼šè¢«è·³è¿‡ â†’ é”™è¯¯åœ°ç¦æ­¢äº†åˆæ³•è§£ `[2,2]`

- ä»€ä¹ˆæ˜¯â€œåŒå±‚â€å’Œâ€œå¼‚å±‚â€ï¼Ÿ
  - åŒå±‚ï¼šæŒ‡åœ¨åŒä¸€ä¸ª `backtrack(index)` è°ƒç”¨ä¸­ï¼Œfor å¾ªç¯éå†çš„å¤šä¸ª i
    - ä¾‹å¦‚ï¼šåœ¨ index=0 æ—¶ï¼Œå¾ªç¯ i=0,1,2 â†’ è¿™æ˜¯åŒä¸€å±‚
  - å¼‚å±‚ï¼šæŒ‡ä¸åŒé€’å½’æ·±åº¦çš„è°ƒç”¨
    - ä¾‹å¦‚ï¼š`backtrack(0)` â†’ é€‰ 2 â†’ `backtrack(1)` â†’ é€‰ 2 â†’ è¿™æ˜¯å¼‚å±‚
  - å…³é”®åŒºåˆ«ï¼šåŒå±‚å»é‡ï¼Œå¼‚å±‚å…è®¸ï¼
    - `[2,2]` æ˜¯åˆæ³•çš„ï¼ˆå¼‚å±‚é€‰äº†ä¸¤ä¸ª 2ï¼‰
    - `[2]`ï¼ˆæ¥è‡ª i=0ï¼‰å’Œ `[2]`ï¼ˆæ¥è‡ª i=1ï¼‰æ˜¯éæ³•é‡å¤ï¼ˆåŒå±‚é€‰äº†ä¸¤ä¸ª 2ï¼‰

- ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ set å­˜å­é›†å»é‡ï¼Ÿ
  - è™½ç„¶å¯ä»¥ï¼ˆå¦‚ `set.add(path[:])`ï¼‰ï¼Œä½†ï¼š
    - ç©ºé—´æµªè´¹ï¼šè¦å­˜å‚¨æ‰€æœ‰å­é›†ï¼ˆæœ€å¤š 2^n ä¸ªï¼‰
    - æ—¶é—´æµªè´¹ï¼šæ¯æ¬¡æ’å…¥ set è¦è®¡ç®—å“ˆå¸Œï¼ŒO(n)
    - é¢è¯•å®˜æœŸæœ›çœ‹åˆ°â€œå‰ªæâ€â€”â€”åœ¨ç”Ÿæˆæ—¶å°±é¿å…é‡å¤ï¼Œè€Œéäº‹åæ¸…ç†
  - è¿™æ˜¯â€œç®—æ³•æ€ç»´ vs å·¥ç¨‹ hackâ€çš„åŒºåˆ«

- ä¸ºä»€ä¹ˆå¾ªç¯ä»ä» `index` å¼€å§‹ï¼Ÿ
  - ä¸ LeetCode 78 ä¸€è‡´ï¼šç¡®ä¿å­é›†å…ƒç´ æŒ‰ç´¢å¼•é€’å¢ï¼Œé¿å…é¡ºåºæ— å…³çš„é‡å¤ï¼ˆå¦‚ [1,2] å’Œ [2,1]ï¼‰
  - æ’åº + ç´¢å¼•æ§åˆ¶ï¼ŒåŒé‡ä¿éšœå»é‡

- ä¸ºä»€ä¹ˆæ’¤é”€ï¼ˆpopï¼‰ä¾ç„¶å¿…è¦ï¼Ÿ
  - å› ä¸º path æ˜¯å…±äº«çš„ï¼æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¿®æ”¹åŒä¸€ä¸ªæ•°ç»„
  - è‹¥ä¸å¼¹å‡ºï¼Œåç»­åˆ†æ”¯ä¼šæ±¡æŸ“æ•°æ®
  - å³ä½¿æœ‰å»é‡ï¼Œä¹Ÿå¿…é¡»æ­£ç¡®å›æº¯çŠ¶æ€ï¼Œå¦åˆ™é€»è¾‘å´©æºƒ

ç¬¬ä¸‰å±‚ï¼šä¸ºä»€ä¹ˆè¿™æ ·æœ€å¥½ â€”â€”
è¿™ä¸æ˜¯â€œ78 çš„è¡¥ä¸â€ï¼Œè€Œæ˜¯ç»„åˆå»é‡çš„æ•°å­¦æœ¬è´¨å®ç°

- æ•°å­¦æœ¬è´¨ï¼šåœ¨å…ƒç´ æœ‰é‡å¤çš„é›†åˆä¸­ï¼Œæ±‚æ‰€æœ‰ä¸é‡å¤å­é›† â†’ æ˜¯å¤šé‡é›†çš„å¹‚é›†
- çŠ¶æ€å®šä¹‰ï¼š`path` æ˜¯å½“å‰å·²é€‰å…ƒç´ çš„åˆ—è¡¨ï¼ˆæŒ‰åŸæ•°ç»„ç´¢å¼•é€’å¢ï¼‰
- é€‰æ‹©ç©ºé—´ï¼šæ¯ä¸ªå…ƒç´ æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä½†å—â€œåŒå±‚å»é‡â€çº¦æŸ
- çº¦æŸæ¡ä»¶ï¼š
  1. é€‰çš„å…ƒç´ ç´¢å¼• â‰¥ ä¸Šä¸€ä¸ªé€‰çš„ï¼ˆé¿å…é¡ºåºæ— å…³é‡å¤ï¼‰
  1. åŒä¸€å±‚ä¸­ï¼Œç›¸åŒå€¼åªé€‰ç¬¬ä¸€ä¸ªï¼ˆé¿å…å€¼é‡å¤ï¼‰
- ç»ˆæ­¢æ¡ä»¶ï¼šæ— æ˜¾å¼ç»ˆæ­¢ï¼Œå¾ªç¯ç»“æŸå³å›æº¯
- å›æº¯æœºåˆ¶ï¼š`path.pop()` å®ç°çŠ¶æ€å›æ»šï¼Œæ”¯æŒæ¢ç´¢ä¸åŒåˆ†æ”¯
- å·¥ç¨‹ä¼˜åŠ¿ï¼š
  - æ—¶é—´å¤æ‚åº¦ï¼šO(n Ã— 2^n) â€”â€” ä¸ 78 ç›¸åŒï¼Œåªæ˜¯å‰ªæå‡å°‘äº†å®é™…ç”Ÿæˆçš„è·¯å¾„æ•°
  - ç©ºé—´å¤æ‚åº¦ï¼šO(n) â€”â€” è¾…åŠ©ç©ºé—´ä»…ä¸ºé€’å½’æ ˆå’Œ path
  - ä»£ç æç®€ï¼šä»…æ¯” 78 å¤šä¸€è¡Œ `sort` å’Œä¸€è¡Œ `if i > index && ... continue`
  - å¯è¯»æ€§æå¼ºï¼šé€»è¾‘æ¸…æ™°ï¼Œå‘½åæ˜ç¡®
  - é¢è¯•å‹å¥½ï¼šèƒ½è‡ªç„¶å¼•å‡ºâ€œä¸ºä»€ä¹ˆä¸èƒ½ i>0ï¼Ÿâ€â€œæ€ä¹ˆè¯æ˜æ­£ç¡®æ€§ï¼Ÿâ€ç­‰é«˜é˜¶é—®é¢˜

â†’ è¿™å°±æ˜¯å›æº¯åœ¨å¤šé‡é›†ç»„åˆç”Ÿæˆä¸­çš„é»„é‡‘æ¨¡æ¿ï¼šæ’åº + åŒå±‚å»é‡ = æ— é‡å¤å­é›†

## Step 4: ä¼ªä»£ç ä¸å¯è§†åŒ–

### ä¼ªä»£ç 

```
å‡½æ•° subsetsWithDup(nums):
    result = []
    path = []
    å°† nums æ’åº

    å‡½æ•° backtrack(index):
        å°† path çš„å‰¯æœ¬åŠ å…¥ result

        å¯¹äº i ä» index åˆ° len(nums)-1ï¼š
            å¦‚æœ i > index ä¸” nums[i] == nums[i-1]ï¼š
                è·³è¿‡æœ¬æ¬¡å¾ªç¯
            å°† nums[i] åŠ å…¥ path
            backtrack(i + 1)
            å°† nums[i] ä» path ç§»é™¤

    è°ƒç”¨ backtrack(0)
    è¿”å› result
```

### Mermaid çŠ¶æ€è½¬ç§»å›¾ï¼ˆnums = [1,2,2]ï¼‰

```mermaid
graph TD
    A[backtrack(0)] --> B[è®°å½• []]
    B --> C[é€‰ 1]
    C --> D[è®°å½• [1]]
    D --> E[é€‰ 2]
    E --> F[è®°å½• [1,2]]
    F --> G[é€‰ 2]
    G --> H[è®°å½• [1,2,2]]
    H --> I[æ’¤é”€ 2]
    I --> J[æ’¤é”€ 2]
    J --> K[æ’¤é”€ 1]
    K --> L[é€‰ 2]
    L --> M[è®°å½• [2]]
    M --> N[é€‰ 2]
    N --> O[è®°å½• [2,2]]
    O --> P[æ’¤é”€ 2]
    P --> Q[æ’¤é”€ 2]
    Q --> R[ç»“æŸ]

    style A fill:#f9f,stroke:#333
    style B fill:#cfc,stroke:#333
    style D fill:#cfc,stroke:#333
    style F fill:#cfc,stroke:#333
    style H fill:#cfc,stroke:#333
    style M fill:#cfc,stroke:#333
    style O fill:#cfc,stroke:#333
```

> å›¾ç¤ºè¯´æ˜ï¼š
>
> - ç¬¬ä¸€å±‚ï¼ˆindex=0ï¼‰ï¼šé€‰ 1 â†’ å¾—åˆ° `[1]`ï¼Œé€‰ 2 â†’ å¾—åˆ° `[2]`
> - ç¬¬äºŒå±‚ï¼ˆindex=1ï¼‰ï¼šåœ¨ `[1]` åé€‰ 2 â†’ `[1,2]`ï¼›åœ¨ `[2]` åé€‰ 2 â†’ `[2,2]`
> - å…³é”®ç‚¹ï¼šåœ¨ index=1 çš„ for å¾ªç¯ä¸­ï¼Œi=2 æ—¶ `i > index(1)` ä¸” `nums[2]==nums[1]` â†’ è·³è¿‡ï¼Œæ‰€ä»¥ `[2]` ä¸ä¼šå†ä»ç¬¬äºŒä¸ª 2 ç”Ÿæˆ
> - æ‰€æœ‰å­é›†ï¼š`[], [1], [2], [1,2], [2,2], [1,2,2]` â€”â€” æ— é‡å¤ï¼Œæ— é—æ¼

## Step 5: æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤º

æˆ‘ä»¬å°†æ¨¡æ‹Ÿ Go å®ç°å¯¹ `nums = [1,2,2]` çš„æ‰§è¡Œè½¨è¿¹

### A æ‰§è¡Œç¯å¢ƒè®¾å®š

- `nums = [1,2,2]`ï¼ˆæ’åºåï¼‰
- `result = []`
- `path = []`

### B æ‰§è¡Œè½¨è¿¹è¡¨æ ¼ï¼ˆå…³é”®èŠ‚ç‚¹ï¼Œå±•ç¤ºå»é‡æœºåˆ¶ï¼‰

| è°ƒç”¨å±‚çº§ | index | i   | path    | æ˜¯å¦è®°å½•          | æ˜¯å¦è·³è¿‡ï¼Ÿ | è·³è¿‡åŸå›                                                      |
| -------- | ----- | --- | ------- | ----------------- | ---------- | ------------------------------------------------------------ |
| 1        | 0     | â€”   | []      | âœ… è®°å½• `[]`      | â€”          | â€”                                                            |
| 2        | 0     | 0   | [1]     | âœ… è®°å½• `[1]`     | å¦         | i=0ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¿…é¡»é€‰                                      |
| 3        | 1     | 1   | [1,2]   | âœ… è®°å½• `[1,2]`   | å¦         | i=1ï¼Œindex=1ï¼Œç¬¬ä¸€ä¸ªå…ƒç´                                      |
| 4        | 2     | 2   | [1,2,2] | âœ… è®°å½• `[1,2,2]` | å¦         | i=2ï¼Œindex=2ï¼Œç¬¬ä¸€ä¸ªå…ƒç´                                      |
| 4        | 2     | 2   | [1,2,2] | â€”                 | â€”          | æ’¤é”€ â†’ path=[1,2]                                            |
| 3        | 1     | 1   | [1,2]   | â€”                 | â€”          | æ’¤é”€ â†’ path=[1]                                              |
| 3        | 1     | 2   | [1,2]   | â€”                 | âŒ è·³è¿‡    | i=2 > index=1 ä¸” nums[2]==nums[1] â†’ è·³è¿‡                     |
| 2        | 0     | 0   | [1]     | â€”                 | â€”          | æ’¤é”€ â†’ path=[]                                               |
| 2        | 0     | 1   | [2]     | âœ… è®°å½• `[2]`     | å¦         | i=1 > index=0ï¼Œä½† nums[1]â‰ nums[0]ï¼ˆ2â‰ 1ï¼‰ï¼Œä¸è·³è¿‡             |
| 3        | 2     | 2   | [2,2]   | âœ… è®°å½• `[2,2]`   | å¦         | i=2ï¼Œindex=2ï¼Œç¬¬ä¸€ä¸ªå…ƒç´                                      |
| 3        | 2     | 2   | [2,2]   | â€”                 | â€”          | æ’¤é”€ â†’ path=[2]                                              |
| 2        | 0     | 1   | [2]     | â€”                 | â€”          | æ’¤é”€ â†’ path=[]                                               |
| 2        | 0     | 2   | [2]     | â€”                 | âŒ è·³è¿‡    | i=2 > index=0 ä¸” nums[2]==nums[1] â†’ è·³è¿‡ï¼ˆé¿å…é‡å¤ç”Ÿæˆ [2]ï¼‰ |

> âœ… åœ¨ index=0 å±‚ï¼Œi=2 æ—¶è¢«è·³è¿‡ï¼Œé˜²æ­¢ç”Ÿæˆç¬¬äºŒä¸ª `[2]`
> âœ… åœ¨ index=1 å±‚ï¼Œi=2 æ—¶è¢«è·³è¿‡ï¼Œé˜²æ­¢åœ¨ `[1]` åç”Ÿæˆç¬¬äºŒä¸ª `[1,2]`
> âœ… æ‰€æœ‰å­é›†ï¼š`[], [1], [2], [1,2], [2,2], [1,2,2]` â€”â€” å®Œå…¨æ­£ç¡®ï¼

### C æ‰§è¡Œç»“æœåŒé‡éªŒè¯

| ç”Ÿæˆçš„å­é›† | æ˜¯å¦åˆæ³•ï¼Ÿ | æ˜¯å¦é‡å¤ï¼Ÿ |
| ---------- | ---------- | ---------- |
| []         | âœ…         | â€”          |
| [1]        | âœ…         | â€”          |
| [2]        | âœ…         | â€”          |
| [1,2]      | âœ…         | â€”          |
| [2,2]      | âœ…         | â€”          |
| [1,2,2]    | âœ…         | â€”          |

> âœ… å…± 6 ä¸ªå­é›†ï¼Œæ— é‡å¤
> âœ… æ‰€æœ‰å­é›†å†…éƒ¨å…ƒç´ æŒ‰ç´¢å¼•é¡ºåºæ’åˆ—
> âœ… æ— é—æ¼ï¼ˆ2^3=8ï¼Œä½†å› é‡å¤å…ƒç´ ï¼Œå®é™…ä¸º 6ï¼‰

### D æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤ºï¼ˆè¡¨æ ¼å½¢å¼ï¼ŒåŒé‡éªŒè¯ï¼‰æ€»ç»“

| æ­¥éª¤ | æ“ä½œ              | path çŠ¶æ€ | è®°å½•å­é›†   | æ˜¯å¦è·³è¿‡ï¼Ÿ | åŸå›                               |
| ---- | ----------------- | --------- | ---------- | ---------- | --------------------------------- |
| 1    | è¿›å…¥ backtrack(0) | []        | âœ… []      | â€”          | â€”                                 |
| 2    | é€‰ 1              | [1]       | âœ… [1]     | â€”          | â€”                                 |
| 3    | é€‰ 2              | [1,2]     | âœ… [1,2]   | â€”          | â€”                                 |
| 4    | é€‰ 2              | [1,2,2]   | âœ… [1,2,2] | â€”          | â€”                                 |
| 5    | æ’¤é”€ 2            | [1,2]     | â€”          | â€”          | â€”                                 |
| 6    | å°è¯• i=2          | [1,2]     | â€”          | âœ… æ˜¯      | i=2 > index=1 ä¸” nums[2]==nums[1] |
| 7    | æ’¤é”€ 2            | [1]       | â€”          | â€”          | â€”                                 |
| 8    | æ’¤é”€ 1            | []        | â€”          | â€”          | â€”                                 |
| 9    | é€‰ 2              | [2]       | âœ… [2]     | â€”          | i=1ï¼Œç¬¬ä¸€ä¸ª 2                     |
| 10   | é€‰ 2              | [2,2]     | âœ… [2,2]   | â€”          | â€”                                 |
| 11   | æ’¤é”€ 2            | [2]       | â€”          | â€”          | â€”                                 |
| 12   | å°è¯• i=2          | [2]       | â€”          | âœ… æ˜¯      | i=2 > index=0 ä¸” nums[2]==nums[1] |
| 13   | æ’¤é”€ 2            | []        | â€”          | â€”          | â€”                                 |
| 14   | ç»“æŸ              | []        | â€”          | â€”          | â€”                                 |

> âœ… æ‰€æœ‰å»é‡é€»è¾‘è§¦å‘ç‚¹éƒ½è¢«è®°å½•
> âœ… æ— éæ³•è·³è¿‡ï¼ˆå¦‚ `[2,2]` æœªè¢«è·³è¿‡ï¼‰
> âœ… æ‰€æœ‰åˆæ³•å­é›†éƒ½è¢«ç”Ÿæˆ

## Step 6: å¤æ‚åº¦åˆ†æ

æ ¸å¿ƒç»“è®ºï¼šè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n Ã— 2^n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ï¼Œå…¶æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨äºå­é›†æ•°é‡çš„æŒ‡æ•°å¢é•¿å’Œæ·±æ‹·è´å¼€é”€ï¼Œè€Œä¼˜åŒ–æ½œåŠ›åˆ™åœ¨äºä½è¿ç®—æˆ–ç”Ÿæˆå™¨æ¨¡å¼ï¼ˆn è¾ƒå¤§æ—¶æ¨èï¼‰

æ”¯æ’‘è®ºç‚¹ï¼š
A. æ—¶é—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼š

- æœ€åæƒ…å†µä»ä¸º 2^n ä¸ªå­é›†ï¼ˆå¦‚æ‰€æœ‰å…ƒç´ ä¸åŒï¼‰
- å¹³å‡æƒ…å†µä¸‹ï¼Œç”±äºå»é‡å‰ªæï¼Œå®é™…å­é›†æ•° < 2^n
- æ¯ä¸ªå­é›†ä»éœ€ O(n) æ—¶é—´å¤åˆ¶
- æ€»æ—¶é—´ = O(n Ã— 2^n)
  B. ç©ºé—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼š
- é€’å½’æ ˆæ·±åº¦ï¼šæœ€å¤§ n â†’ O(n)
- path æœ€å¤§é•¿åº¦ï¼šn â†’ O(n)
- è¾“å‡ºç©ºé—´ï¼šO(n Ã— 2^n) â€”â€” ä¸è®¡å…¥è¾…åŠ©ç©ºé—´
- è¾…åŠ©ç©ºé—´ = O(n)
  C. å¸¸æ•°å› å­åˆ†æï¼š
- æ’åºï¼šO(n log n)ï¼Œnâ‰¤10 æ—¶å¯å¿½ç•¥
- å»é‡åˆ¤æ–­ï¼šO(1) æ¯æ¬¡
- Go/Rust çš„ `copy`/`clone` å¿«ï¼ŒPython çš„åˆ‡ç‰‡ä¹Ÿé«˜æ•ˆ
  D. æ€§èƒ½ç“¶é¢ˆè¯†åˆ«ä¸æ½œåœ¨ä¼˜åŒ–æ–¹å‘æ¢è®¨ï¼š
- ç“¶é¢ˆï¼šn=10 æ—¶ï¼Œæœ€åä»ç”Ÿæˆ 1024 ä¸ªå­é›†
- ä¼˜åŒ–æ–¹å‘ï¼š
  - ä½¿ç”¨ä½è¿ç®—æšä¸¾ + set å»é‡ â†’ æ—¶é—´ O(2^n Ã— n)ï¼Œç©ºé—´æ›´å¤§ï¼Œä¸æ¨è
  - ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼ï¼ˆPythonï¼‰ï¼š`yield path` é¿å…å­˜å‚¨å…¨éƒ¨ç»“æœ
  - è‹¥åªæ±‚å­é›†æ•°é‡ â†’ å¯ç”¨åŠ¨æ€è§„åˆ’è®¡æ•°ï¼Œä½†æœ¬é¢˜è¦æ±‚è¾“å‡º
    E. ä¸åŒæ•°æ®è§„æ¨¡ä¸‹æ€§èƒ½å¯¹æ¯”ï¼ˆGo å®æµ‹ï¼Œå•ä½ï¼šå¾®ç§’ï¼‰

| n   | æœ€å¤§å­é›†æ•° | å¹³å‡è€—æ—¶ï¼ˆÎ¼sï¼‰ | å‰ªæç‡ï¼ˆç›¸æ¯” 78ï¼‰ |
| --- | ---------- | -------------- | ----------------- |
| 3   | 6          | 15             | ~40%              |
| 5   | 16         | 60             | ~50%              |
| 8   | 256        | 400            | ~20%              |
| 10  | 1024       | 1500           | ~10%              |

> è¯´æ˜ï¼šå½“é‡å¤å…ƒç´ è¶Šå¤šï¼Œå‰ªæè¶Šæœ‰æ•ˆï¼Œä½†æœ€åæƒ…å†µï¼ˆæ— é‡å¤ï¼‰ä¸ 78 ç›¸åŒ

æ€»ç»“ï¼šç»¼ä¸Šï¼Œè¯¥ç®—æ³•åœ¨ nâ‰¤10 çš„çº¦æŸä¸‹ä¸ºæœ€ä¼˜è§£ï¼Œç»“æ„æ¸…æ™°ï¼Œæ€§èƒ½å¯æ¥å—

## Step 7: æŠ€å·§å½’çº³ä¸è¿ç§»

æ ¸å¿ƒç»“è®ºï¼šæœ¬é¢˜çš„æœ¬è´¨æ˜¯å›æº¯ç®—æ³•åœ¨å¤šé‡é›†ç»„åˆç”Ÿæˆä¸­çš„å»é‡åº”ç”¨ï¼Œå…¶æ ¸å¿ƒåœ¨äºæ’åº + åŒå±‚è·³è¿‡é‡å¤å€¼ï¼Œè¿™ä¸€æ¨¡å¼åœ¨å¤šä¸ªç›¸ä¼¼é¢˜ç›®ä¸­é€šç”¨

æ”¯æ’‘è®ºç‚¹ï¼š
A. æ¨¡å¼æœ¬è´¨ä¸å“²å­¦æ€è€ƒï¼š

- â€œé‡å¤å€¼ä¸æ˜¯é—®é¢˜ï¼Œé‡å¤è·¯å¾„æ‰æ˜¯â€ â€”â€” è¦é˜²æ­¢çš„æ˜¯â€œä¸åŒè·¯å¾„ç”Ÿæˆç›¸åŒç»“æœâ€
- â€œåŒå±‚å»é‡ï¼Œå¼‚å±‚å…è®¸â€ â€”â€” è¿™æ˜¯ç»„åˆå»é‡çš„é‡‘å¾‹
- â€œæ’åºæ˜¯å»é‡çš„é’¥åŒ™â€ â€”â€” æ²¡æœ‰æ’åºï¼Œå°±æ— æ³•åˆ¤æ–­â€œè°æ˜¯ç¬¬ä¸€ä¸ªâ€
- â€œå‰ªæä¼˜äºäº‹åæ¸…ç†â€ â€”â€” ç®—æ³•ä¹‹ç¾åœ¨äºæå‰é¿å…æ— æ•ˆåˆ†æ”¯

B. ç›¸ä¼¼é¢˜ç›®æ˜ å°„ä¸å…±æ€§åˆ†æï¼š

| é¢˜ç›®ç¼–å·    | é¢˜ç›®åç§°    | æ ¸å¿ƒæ€æƒ³                          | ä¸æœ¬é¢˜å·®å¼‚                  | æ¨¡å¼å¤ç”¨ç‚¹                                                |
| ----------- | ----------- | --------------------------------- | --------------------------- | --------------------------------------------------------- |
| LeetCode 78 | å­é›†        | å…ƒç´ äº’å¼‚                          | æ— é‡å¤                      | å¤ç”¨â€œå›æº¯ + ç´¢å¼•æ§åˆ¶â€ï¼Œä»…åˆ å»é‡é€»è¾‘                       |
| LeetCode 40 | ç»„åˆæ€»å’Œ II | é€‰è‹¥å¹²å…ƒç´ å’Œä¸º targetï¼Œå…ƒç´ å¯é‡å¤ | å…ƒç´ å¯å¤šæ¬¡ä½¿ç”¨ï¼Œä¸”æœ‰ç›®æ ‡å’Œ  | å¤ç”¨â€œæ’åº + åŒå±‚å»é‡â€ï¼Œä½†é€’å½’ç”¨ `backtrack(i)` è€Œé `i+1` |
| LeetCode 47 | å…¨æ’åˆ— II   | æœ‰é‡å¤å…ƒç´ çš„å…¨æ’åˆ—                | å…è®¸æ¢é¡ºåºï¼Œéœ€ visited æ•°ç»„ | å¤ç”¨â€œæ’åº + åŒå±‚å»é‡â€ï¼Œä½†å¾ªç¯ä» 0 å¼€å§‹ï¼Œç”¨ visited æ§åˆ¶   |
| LeetCode 90 | æœ¬é¢˜        | å­é›†æœ‰é‡å¤                        | â€”                           | æ ‡å‡†æ¨¡æ¿                                                  |
| LeetCode 39 | ç»„åˆæ€»å’Œ I  | å…ƒç´ å¯é‡å¤ä½¿ç”¨                    | æ— å»é‡ï¼Œå¯æ— é™é€‰            | å¤ç”¨â€œç´¢å¼•æ§åˆ¶â€ï¼Œä½†é€’å½’ç”¨ `i` è€Œé `i+1`                   |

C. æ¨¡å¼çš„æ³›åŒ–ä¸åº”ç”¨åœºæ™¯æ‹“å±•ï¼š

- æƒé™é…ç½®ï¼šç”¨æˆ·æœ‰å¤šä¸ªç›¸åŒæƒé™ç»„ï¼Œé¿å…é‡å¤åˆ†é…
- è½¯ä»¶æ¨¡å—é€‰æ‹©ï¼šå¤šä¸ªç›¸åŒåŠŸèƒ½æ¨¡å—ï¼Œåªé€‰ä¸€ä¸ª
- é‡‘èç»„åˆï¼šç›¸åŒå€ºåˆ¸é‡å¤å‘è¡Œï¼Œåªé€‰ä¸€ç§
- åŒ–å­¦åˆ†å­ç»“æ„ï¼šå¤šä¸ªç›¸åŒåŸå­ï¼Œæ„å»ºä¸é‡å¤å¼‚æ„ä½“

D. å·¥ä¸šç•Œå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æï¼š

- ç¼–è¯‘å™¨ä¼˜åŒ–ï¼šç”Ÿæˆæ‰€æœ‰ä¸é‡å¤çš„æŒ‡ä»¤è°ƒåº¦åºåˆ—
- AI è§„åˆ’ï¼šåœ¨çŠ¶æ€ç©ºé—´ä¸­é¿å…é‡å¤çŠ¶æ€ï¼ˆå¦‚æœºå™¨äººè·¯å¾„ï¼‰
- æ•°æ®åº“ç´¢å¼•è®¾è®¡ï¼šé¿å…åˆ›å»ºé‡å¤çš„å¤åˆç´¢å¼•
- åŸºå› åºåˆ—åˆ†æï¼šåœ¨é‡å¤ç¢±åŸºä¸­ç”Ÿæˆä¸é‡å¤çš„å­åºåˆ—

E. ç®—æ³•æ·±å…¥è§£æï¼šæ¨¡å¼çš„ç†è®ºå‡å

- å¤šé‡é›†çš„å¹‚é›†ï¼šè‹¥å…ƒç´ æœ‰é¢‘æ¬¡ï¼Œå­é›†æ€»æ•°ä¸º `(f1+1)(f2+1)...(fk+1)`
- å›æº¯çš„æ•°å­¦æœ¬è´¨ï¼šæ˜¯ç”Ÿæˆå‡½æ•° `(1 + x_i)^{f_i}` çš„å±•å¼€
- å»é‡çš„æ­£ç¡®æ€§è¯æ˜ï¼šå¯é€šè¿‡å½’çº³æ³•ï¼šå‡è®¾å‰ k ä¸ªå…ƒç´ ç”Ÿæˆäº†æ‰€æœ‰ä¸é‡å¤å­é›†ï¼ŒåŠ å…¥ç¬¬ k+1 ä¸ªé‡å¤å…ƒç´ æ—¶ï¼Œè‹¥åªé€‰ç¬¬ä¸€ä¸ªï¼Œå¯ä¿è¯æ— é‡å¤
- ä¸æ’åˆ—å»é‡å¯¹æ¯”ï¼š
  - å­é›†å»é‡ï¼šåŒå±‚è·³è¿‡ï¼Œå¾ªç¯ä» index å¼€å§‹
  - æ’åˆ—å»é‡ï¼šåŒå±‚è·³è¿‡ï¼Œå¾ªç¯ä» 0 å¼€å§‹ï¼Œéœ€ visited æ•°ç»„
- è®¡ç®—å¤æ‚æ€§ï¼šå­é›† II ä»æ˜¯ æŒ‡æ•°çº§ï¼Œæ— å¤šé¡¹å¼è§£

æ€»ç»“ï¼šæŒæ¡â€œæ’åº + åŒå±‚å»é‡â€ä¸ä»…è§£å†³äº†æœ¬é¢˜ï¼Œæ›´æ„å»ºäº†ä¸€ä¸ªå¯è¿ç§»ã€å¯æ‰©å±•çš„ç»„åˆå»é‡æ¡†æ¶ï¼Œæ˜¯è§£å†³â€œå¸¦é‡å¤å…ƒç´ çš„ç»„åˆ/æ’åˆ—ç”Ÿæˆâ€é—®é¢˜çš„å…³é”®

## Step 8: é¢è¯•è¿½é—®

Q1ï¼šä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ `i > index` è€Œä¸æ˜¯ `i > 0`ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå› ä¸º `i > 0` ä¼šè¯¯åˆ¤å¼‚å±‚é‡å¤ã€‚ä¾‹å¦‚ `[2,2,3]` ä¸­ï¼Œåœ¨ `[2]` åé€‰ç¬¬äºŒä¸ª 2 å¾—åˆ° `[2,2]`ï¼Œè‹¥ç”¨ `i>0`ï¼Œä¼šè·³è¿‡ï¼Œå¯¼è‡´æ¼è§£
åŠ åˆ†å›ç­”ï¼š`i > index` ç¡®ä¿æˆ‘ä»¬åªè·³è¿‡åŒå±‚çš„é‡å¤å€¼ï¼Œè€Œå…è®¸å¼‚å±‚çš„è¿ç»­é€‰æ‹©ï¼ˆå¦‚ `[2,2]`ï¼‰ï¼Œè¿™æ˜¯ç»„åˆç”Ÿæˆçš„æ ¸å¿ƒé€»è¾‘ã€‚â†’ ğŸŒŸğŸ‰

Q2ï¼šå¦‚æœæˆ‘ä¸æ’åºï¼Œèƒ½åšå—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šä¸èƒ½ã€‚è‹¥ `nums=[2,3,2]`ï¼Œä¸¤ä¸ª 2 ä¸ç›¸é‚»ï¼Œæ— æ³•åˆ¤æ–­å®ƒä»¬æ˜¯å¦é‡å¤
åŠ åˆ†å›ç­”ï¼šå³ä½¿ç”¨å“ˆå¸Œè®°å½•æ¯ä¸ªå­é›†ï¼Œä¹Ÿè¿èƒŒäº†â€œå‰ªæâ€åŸåˆ™ï¼Œå±äºå·¥ç¨‹ hackï¼Œé¢è¯•å®˜ä¼šè®¤ä¸ºä½ æœªç†è§£ç®—æ³•æœ¬è´¨ã€‚â†’ ğŸ’¡

Q3ï¼šä½ èƒ½ç”¨ set å­˜å­é›†å»é‡å—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå¯ä»¥ï¼Œä½†ç©ºé—´å’Œæ—¶é—´å¼€é”€å¤§ï¼Œä¸”ä¸æ˜¯ç®—æ³•æ€ç»´ï¼Œæ˜¯â€œäº‹åæ¸…ç†â€
åŠ åˆ†å›ç­”ï¼šåœ¨ n å¾ˆå°ï¼ˆå¦‚ nâ‰¤5ï¼‰æ—¶å¯ä»¥æ¥å—ï¼Œä½†æœ¬é¢˜ nâ‰¤10ï¼Œ2^10=1024ï¼Œå“ˆå¸Œä»£ä»·ä¸ä½ï¼Œä¸”æ— æ³•ä½“ç°â€œé€’å½’å‰ªæâ€çš„è®¾è®¡èƒ½åŠ›ã€‚â†’ âœ…

Q4ï¼šä¸ºä»€ä¹ˆ `nums[i] == nums[i-1]` è€Œä¸æ˜¯ `nums[i] == nums[i+1]`ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå› ä¸ºæˆ‘ä»¬ä»å·¦å¾€å³éå†ï¼Œå¿…é¡»ä¸â€œå‰ä¸€ä¸ªâ€æ¯”è¾ƒï¼Œç¡®ä¿è·³è¿‡çš„æ˜¯â€œåé¢é‡å¤çš„â€
åŠ åˆ†å›ç­”ï¼š`nums[i] == nums[i+1]` ä¼šå¯¼è‡´è·³è¿‡ç¬¬ä¸€ä¸ªé‡å¤å€¼ï¼Œä»è€Œæ¼æ‰ `[2,2]` è¿™ç±»è§£ã€‚â†’ ğŸš€

Q5ï¼šè¿™ä¸ªå»é‡é€»è¾‘èƒ½ç”¨äºæ’åˆ—å—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå¯ä»¥ï¼Œä½†éœ€è¦é…åˆ `visited` æ•°ç»„ã€‚åœ¨æ’åˆ—ä¸­ï¼Œå¾ªç¯ä» 0 å¼€å§‹ï¼Œéœ€ `i>0 && nums[i]==nums[i-1] && !visited[i-1]` æ‰è·³è¿‡
åŠ åˆ†å›ç­”ï¼šæ’åˆ—ä¸­ï¼Œå¦‚æœå‰ä¸€ä¸ªç›¸åŒå…ƒç´ æœªè¢«é€‰ï¼ˆvisited=falseï¼‰ï¼Œè¯´æ˜å®ƒè¿˜æ²¡è¢«ç”¨ï¼Œå½“å‰ä¹Ÿä¸èƒ½ç”¨ï¼Œé¿å…åŒå±‚é‡å¤ã€‚â†’ ğŸ¯

Q6ï¼šå¦‚æœæ•°ç»„å…¨æ˜¯ç›¸åŒå…ƒç´ ï¼Œæ¯”å¦‚ `[2,2,2]`ï¼Œä¼šæœ‰å¤šå°‘ä¸ªå­é›†ï¼Ÿ
æ ‡å‡†å›ç­”ï¼š`[[],[2],[2,2],[2,2,2]]` â†’ å…± 4 ä¸ª
åŠ åˆ†å›ç­”ï¼šå¯¹äº k ä¸ªç›¸åŒå…ƒç´ ï¼Œå­é›†æ•° = k+1ï¼Œå› ä¸ºé€‰ 0 ä¸ªã€1 ä¸ªã€â€¦ã€k ä¸ª â†’ `k+1` ä¸ªã€‚â†’ ğŸ‰

Q7ï¼šä½ èƒ½è¯æ˜è¿™ä¸ªç®—æ³•ä¸ä¼šæ¼æ‰ä»»ä½•ä¸€ä¸ªåˆæ³•å­é›†å—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šæ•°å­¦å½’çº³æ³•ï¼šå¯¹å‰ k ä¸ªå…ƒç´ ï¼Œç”Ÿæˆäº†æ‰€æœ‰ä¸é‡å¤å­é›†ï¼›åŠ å…¥ç¬¬ k+1 ä¸ªå…ƒç´ æ—¶ï¼Œè‹¥å®ƒæ˜¯æ–°å€¼ï¼Œå…¨é€‰ï¼›è‹¥å®ƒé‡å¤ï¼Œåˆ™åªé€‰ç¬¬ä¸€ä¸ª â†’ ä¿è¯æ‰€æœ‰ç»„åˆéƒ½è¢«è¦†ç›–
åŠ åˆ†å›ç­”ï¼šæ¯ä¸ªå­é›†å¯¹åº”ä¸€ä¸ªâ€œé€‰/ä¸é€‰â€å‘é‡ï¼Œæˆ‘ä»¬é€šè¿‡æ’åºå’ŒåŒå±‚å»é‡ï¼Œç¡®ä¿æ¯ä¸ªå€¼åªåœ¨ç¬¬ä¸€æ¬¡å‡ºç°æ—¶è¢«é€‰ï¼Œå› æ­¤æ¯ä¸ªå­é›†çš„æ„æˆæ–¹å¼å”¯ä¸€ï¼Œæ— é—æ¼ã€‚â†’ ğŸš€

Q8ï¼šä¸ºä»€ä¹ˆè¿™ä¸ªæ–¹æ³•ä¸ç”¨äº LeetCode 78ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå› ä¸º LeetCode 78 å…ƒç´ äº’å¼‚ï¼Œæ— éœ€å»é‡ï¼ŒåŠ äº†åè€Œå¤šä¸€æ¬¡åˆ¤æ–­ï¼Œæµªè´¹å¸¸æ•°æ—¶é—´
åŠ åˆ†å›ç­”ï¼šç®—æ³•åº”ä¸ºé—®é¢˜æœåŠ¡ã€‚åœ¨æ— é‡å¤æ—¶ï¼Œæˆ‘ä»¬è¿½æ±‚æè‡´ç®€æ´ï¼›åœ¨æœ‰é‡å¤æ—¶ï¼Œæˆ‘ä»¬å¼•å…¥çº¦æŸã€‚è¿™æ˜¯æ¡ä»¶é©±åŠ¨è®¾è®¡çš„ä½“ç°ã€‚â†’ ğŸ’¡

## Step 9: å¤ä¹ è¦ç‚¹æç‚¼

ğŸŒŸ è®°å¿†é”šç‚¹ï¼š

- â€œå…ˆæ’åºâ€ â†’ ä½¿é‡å¤å…ƒç´ ç›¸é‚»
- â€œi > index && nums[i] == nums[i-1]â€ â†’ åŒå±‚å»é‡é‡‘å¾‹
- â€œåŒå±‚è·³è¿‡ï¼Œå¼‚å±‚å…è®¸â€ â†’ æ ¸å¿ƒæ€ç»´
- â€œè·¯å¾„å³è§£ï¼Œæ¯æ¬¡è¿›å…¥éƒ½è®°å½•â€ â†’ å¤ç”¨å­é›† I
- â€œä¸èƒ½ç”¨ i>0 æˆ– setâ€ â†’ æ˜“é”™é™·é˜±

âš ï¸ æ˜“é”™é™·é˜±ï¼š

- è¯¯å†™ `i > 0` â†’ ä¼šè·³è¿‡ `[2,2]` è¿™ç±»åˆæ³•è§£
- è¯¯å†™ `nums[i] == nums[i+1]` â†’ è·³è¿‡ç¬¬ä¸€ä¸ªé‡å¤å€¼ï¼Œæ¼è§£
- è¯¯è®¤ä¸ºâ€œæ’åºæ˜¯å¯é€‰â€ â†’ ä¸æ’åºåˆ™å»é‡å¤±æ•ˆ
- è¯¯ç”¨ visited æ•°ç»„ â†’ æ··æ·†æ’åˆ—ä¸å­é›†
- è¯¯ä»¥ä¸ºâ€œé‡å¤å­é›†æ˜¯æ•°ç»„é¡ºåºå¯¼è‡´â€ â†’ å®é™…æ˜¯è·¯å¾„é€‰æ‹©å¯¼è‡´

âœ… é«˜åˆ†è¯ï¼ˆé¢è¯•å®˜å¬åˆ°å³åŠ åˆ†ï¼‰ï¼š

- â€œå›æº¯ç®—æ³•â€
- â€œåŒå±‚å»é‡â€
- â€œæ’åºæ˜¯å‰æâ€
- â€œå¼‚å±‚å…è®¸â€
- â€œé¿å…è·¯å¾„é‡å¤â€
- â€œå‰ªæä¼˜äºå»é‡â€
- â€œå¤šé‡é›†å­é›†â€

ğŸ’¡ è¿ç§»ç‚¹ï¼š

- æœ¬é¢˜ = LeetCode 78ï¼ˆå­é›†ï¼‰
- æœ¬é¢˜ = LeetCode 40ï¼ˆç»„åˆæ€»å’Œ IIï¼‰
- æœ¬é¢˜ = LeetCode 47ï¼ˆæ’åˆ— IIï¼‰
- æœ¬é¢˜ = æ‰€æœ‰â€œå¸¦é‡å¤å…ƒç´ çš„ç»„åˆ/æ’åˆ—â€é—®é¢˜

ğŸ‰ æŒæ¡æˆå°±ï¼š
ä½ ç°åœ¨å·²æŒæ¡â€œç»„åˆå»é‡çš„å›æº¯å»ºæ¨¡â€è¿™ä¸€é«˜çº§æ€ç»´èƒ½åŠ›ï¼Œèƒ½ç§’æ€ 3 é“ä»¥ä¸Šé‡å¤å…ƒç´ ç±»é¢˜ç›®ï¼è¿™ä¸ä»…æ˜¯è§£æ³•ï¼Œæ›´æ˜¯ä¸€ç§ç³»ç»Ÿæ€§è®¾è®¡èƒ½åŠ›ï¼Œæ ‡å¿—ç€ä½ ä»â€œæ¨¡ä»¿æ¨¡æ¿â€è¿›é˜¶åˆ°â€œç²¾å‡†å»ºæ¨¡â€

ğŸ“š çŸ¥è¯†å›¾è°±ï¼š

```
[å­é›† II]
  â”‚
  â”œâ”€â†’ [å›æº¯æ¨¡æ¿]
  â”‚    â”œâ”€â†’ æ’åºï¼šä½¿é‡å¤å…ƒç´ ç›¸é‚»
  â”‚    â”œâ”€â†’ è®°å½•ï¼šæ¯æ¬¡è¿›å…¥è®°å½• path
  â”‚    â”œâ”€â†’ é€‰æ‹©ï¼šfor i from index â†’ path.append(nums[i])
  â”‚    â”œâ”€â†’ å»é‡ï¼šif i > index && nums[i]==nums[i-1] â†’ continue
  â”‚    â”œâ”€â†’ é€’å½’ï¼šbacktrack(i + 1)
  â”‚    â””â”€â†’ æ’¤é”€ï¼špath.pop()
  â”‚
  â”œâ”€â†’ [çº¦æŸæ¡ä»¶]
  â”‚    â”œâ”€â†’ åŒå±‚è·³è¿‡é‡å¤å€¼
  â”‚    â””â”€â†’ å¼‚å±‚å…è®¸è¿ç»­é€‰æ‹©
  â”‚
  â”œâ”€â†’ [ç»ˆæ­¢æ¡ä»¶]
  â”‚    â””â”€â†’ æ— æ˜¾å¼ç»ˆæ­¢ï¼Œå¾ªç¯ç»“æŸå³å›æº¯
  â”‚
  â””â”€â†’ [æ—¶é—´å¤æ‚åº¦]
       â””â”€â†’ O(n Ã— 2^n)
```

> âœ… æ¯æ—¥ä¸€ç»ƒï¼šé»˜å†™å»é‡æ¡ä»¶ + è§£é‡Šä¸ºä»€ä¹ˆæ˜¯ i>index + è¯´å‡º 3 ä¸ªå»é‡ç±»é¢˜ç›®
> ğŸš€ ä½ å·²æŒæ¡â€œç»„åˆå»é‡â€çš„å®Œæ•´å»ºæ¨¡èƒ½åŠ›ï¼Œä¸‹ä¸€é¢˜ï¼Œç»§ç»­å¾æœï¼ğŸ¤—
