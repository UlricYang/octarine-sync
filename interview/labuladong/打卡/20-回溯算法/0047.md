# LeetCode 47 - å…¨æ’åˆ— II

## Step 1ï¼šé¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„æ•´æ•°æ•°ç»„ `nums`ï¼Œè¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—

ä½ å¿…é¡»æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆ

ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼š`nums = [1,1,2]`
è¾“å‡ºï¼š`[[1,1,2],[1,2,1],[2,1,1]]`

ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼š`nums = [1,2,3]`
è¾“å‡ºï¼š`[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]`

ç¤ºä¾‹ 3ï¼š
è¾“å…¥ï¼š`nums = [1,1,1]`
è¾“å‡ºï¼š`[[1,1,1]]`

çº¦æŸæ¡ä»¶ï¼š

- `1 <= nums.length <= 8`
- `-10 <= nums[i] <= 10`
- å…è®¸è¾“å…¥æ•°ç»„åŒ…å«é‡å¤å…ƒç´ 
- è¾“å‡ºä¸­ä¸èƒ½åŒ…å«é‡å¤çš„æ’åˆ—ï¼ˆå³ `[1,1,2]` åªå‡ºç°ä¸€æ¬¡ï¼‰
- æ’åˆ—é¡ºåºæœ‰å…³ï¼ˆå³ `[1,2,1]` ä¸ `[2,1,1]` æ˜¯ä¸åŒæ’åˆ—ï¼‰
- è¾“å‡ºé¡ºåºä»»æ„

æ ¸å¿ƒæ„å›¾ï¼š
æœ¬é¢˜æ˜¯ LeetCode 46ï¼ˆå…¨æ’åˆ—ï¼‰çš„å¸¦é‡å¤å…ƒç´ å¢å¼ºç‰ˆï¼Œè€ƒæŸ¥å›æº¯ç®—æ³•åœ¨æœ‰é‡å¤å…ƒç´ ä¸‹çš„å»é‡ç­–ç•¥

> æœ¬è´¨æ˜¯ï¼šåœ¨åŒ…å«é‡å¤å…ƒç´ çš„æ•°ç»„ä¸­ï¼Œç”Ÿæˆæ‰€æœ‰ä¸é‡å¤çš„æ’åˆ—ï¼Œå³â€œå»é‡çš„å…¨æ’åˆ—â€ã€‚
> å…³é”®æŒ‘æˆ˜åœ¨äºï¼šç›¸åŒæ•°å­—åœ¨ä¸åŒä½ç½®å¯èƒ½äº§ç”Ÿç›¸åŒæ’åˆ—ï¼ˆå¦‚ä¸¤ä¸ª 1 äº¤æ¢ä½ç½®ï¼Œæ’åˆ—ä¸å˜ï¼‰
> ä¸ LeetCode 46 çš„åŒºåˆ«ï¼š
>
> - LeetCode 46ï¼šå…ƒç´ äº’å¼‚ â†’ ç›´æ¥å›æº¯å³å¯
> - LeetCode 47ï¼šå…ƒç´ å¯é‡å¤ â†’ å¿…é¡»ä¸»åŠ¨å»é‡ï¼Œå¦åˆ™ä¼šç”Ÿæˆ `n!` ä¸ªæ’åˆ—ï¼ˆå«å¤§é‡é‡å¤ï¼‰

é¢è¯•ä¸­é«˜åˆ†ç­”æ¡ˆéœ€æ˜ç¡®ï¼š

- ä¸ºä»€ä¹ˆä¸èƒ½åƒ LeetCode 46 é‚£æ ·ç›´æ¥å›æº¯ï¼Ÿ
- ä¸ºä»€ä¹ˆå¿…é¡»æ’åºï¼Ÿ
- ä¸ºä»€ä¹ˆç”¨ `!used[i-1]` è€Œä¸æ˜¯ `used[i-1]`ï¼Ÿ
- ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ set å»é‡ï¼Ÿ
- ä»€ä¹ˆæ˜¯â€œåŒå±‚å»é‡â€å’Œâ€œåŒæå»é‡â€ï¼Ÿå¦‚ä½•åŒºåˆ†ï¼Ÿ

## Step 2: æ ¸å¿ƒç»“è®ºï¼ˆé‡‘å­—å¡”ç»“æ„ä¼˜åŒ–ç‰ˆï¼‰

æ ¸å¿ƒç»“è®ºï¼šæœ¬é¢˜çš„æœ€ä¼˜è§£æ˜¯å›æº¯ç®—æ³• + æ’åº + åŒå±‚å»é‡ï¼ˆä½¿ç”¨ !used[i-1] å‰ªæï¼‰ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼šé€»è¾‘ä¸¥å¯†ã€æ•ˆç‡æé«˜ã€é¿å…å†—ä½™é€’å½’ã€å®Œå…¨å¤ç”¨å…¨æ’åˆ—æ¨¡æ¿ï¼Œæ˜¯è§£å†³â€œå¸¦é‡å¤å…ƒç´ çš„æ’åˆ—å»é‡â€é—®é¢˜çš„å”¯ä¸€å·¥ä¸šçº§æ ‡å‡†æ–¹æ¡ˆ

æ”¯æ’‘è®ºç‚¹ï¼ˆMECE åˆ†ç±»ï¼‰ï¼š

A. ç†è®ºæœ€ä¼˜æ€§ï¼šè¯¥ç®—æ³•ç²¾ç¡®å»ºæ¨¡â€œé‡å¤å…ƒç´ æ’åˆ—å»é‡â€çš„æ•°å­¦ç»“æ„
æœ¬é¢˜çš„æ’åˆ—ç‰¹æ€§ï¼š

- å…ƒç´ å¯é‡å¤ â†’ å¯¼è‡´å¤šä¸ªæ’åˆ—ç­‰ä»·ï¼ˆå¦‚ `1a,1b,2` ä¸ `1b,1a,2` æ˜¯åŒä¸€æ’åˆ—ï¼‰
- æ’åˆ—é¡ºåºæœ‰å…³ â†’ ä½ç½®ä¸åŒå³ä¸ºä¸åŒæ’åˆ—
- è¾“å‡ºä¸èƒ½é‡å¤ â†’ éœ€è¦æ¶ˆé™¤å› å…ƒç´ å€¼é‡å¤å¯¼è‡´çš„â€œä¼ªä¸åŒâ€æ’åˆ—

è§£å†³æ–¹æ¡ˆï¼š

1. å…ˆå¯¹ nums æ’åº â†’ ä½¿ç›¸åŒå…ƒç´ ç›¸é‚»
1. ä½¿ç”¨ visited æ•°ç»„è®°å½•æ¯ä¸ªä½ç½®æ˜¯å¦è¢«ä½¿ç”¨
1. å…³é”®å‰ªæï¼šå½“ nums[i] == nums[i-1] ä¸” !used[i-1] æ—¶è·³è¿‡
   - è§£é‡Šï¼šè‹¥å‰ä¸€ä¸ªç›¸åŒå…ƒç´ æœªè¢«ä½¿ç”¨ï¼ˆå³å°šæœªåœ¨å½“å‰è·¯å¾„ä¸­ï¼‰ï¼Œåˆ™å½“å‰å…ƒç´ ä¹Ÿä¸èƒ½é€‰ â†’ é¿å…åŒå±‚é‡å¤é€‰æ‹©ç›¸åŒå€¼
   - ç­‰ä»·äºï¼šåªå…è®¸åœ¨â€œç¬¬ä¸€ä¸ªå‡ºç°çš„ç›¸åŒå…ƒç´ â€è¢«é€‰ä¸­åï¼Œæ‰èƒ½é€‰ç¬¬äºŒä¸ª

æ•°å­¦æœ¬è´¨ï¼šè¿™æ˜¯å¸¦é‡å¤å…ƒç´ çš„å¤šé‡é›†åˆæ’åˆ—é—®é¢˜ï¼Œæ’åˆ—æ€»æ•°ä¸ºï¼š

> `n! / (fâ‚! Ã— fâ‚‚! Ã— ... Ã— fâ‚–!)`ï¼Œå…¶ä¸­ fáµ¢ æ˜¯ç¬¬ i ç§å…ƒç´ çš„é¢‘æ¬¡

B. å¯¹æ¯”åŠ£åŠ¿æ€§ï¼šå…¶ä»–ä¸»æµæ–¹æ³•å‡å­˜åœ¨ç»“æ„æ€§ç¼ºé™·
| æ–¹æ³• | é—®é¢˜ | ä¸ºä½•æ¬¡ä¼˜ |
|------|------|----------|
| ç”¨ set å­˜æ‰€æœ‰æ’åˆ—å†å»é‡ | æ—¶é—´å¤æ‚åº¦ O(n! Ã— n)ï¼Œç©ºé—´çˆ†ç‚¸ï¼Œæ©ç›–ç®—æ³•æœ¬è´¨ | é¢è¯•å®˜æœŸæœ›çœ‹åˆ°â€œå‰ªæâ€è€Œéâ€œäº‹åæ¸…ç†â€ |
| åªç”¨ used[i] ä¸æ’åº | æ— æ³•è¯†åˆ«é‡å¤å€¼ï¼Œä»ä¼šç”Ÿæˆé‡å¤æ’åˆ— | æ¯”å¦‚ [1,1,2] ä¼šç”Ÿæˆ 6 ä¸ªæ’åˆ—ï¼Œå…¶ä¸­ 2 ä¸ªé‡å¤ |
| ä½¿ç”¨ map è®°å½•å·²é€‰å€¼ | æ— æ³•åŒºåˆ†â€œä¸åŒä½ç½®çš„ç›¸åŒå€¼â€ï¼Œå¯¼è‡´é”™è¯¯å‰ªæ | ä¾‹å¦‚ï¼šé€‰ç¬¬ä¸€ä¸ª 1 åè·³è¿‡æ‰€æœ‰ 1ï¼Œä¼šæ¼æ‰ [1,2,1] |
| é€’å½’ä¸­ä¼  path åš hash å»é‡ | æ—¶é—´å¼€é”€å¤§ï¼Œæ¯æ¬¡æ¯”è¾ƒ O(n)ï¼Œç©ºé—´å¼€é”€ O(n!Ã—n) | å·¥ç¨‹ä¸Šä¸å¯æ¥å— |
| ä¸æ’åºï¼Œç”¨ i > 0 && nums[i] == nums[i-1] && used[i-1] | ä¼šå¯¼è‡´é”™è¯¯å‰ªæï¼Œå¯èƒ½æ¼è§£ | ä¼šè¯¯åˆ¤â€œå…è®¸ä½¿ç”¨é‡å¤å…ƒç´ â€çš„åˆæ³•åˆ†æ”¯ |

C. é€‚ç”¨è¾¹ç•Œï¼šæ˜ç¡®çº¦æŸå‰æï¼Œé¿å…æ³›åŒ–è¯¯ç”¨

- âœ… é€‚ç”¨ï¼šè¾“å…¥å«é‡å¤å…ƒç´ ï¼Œæ±‚æ‰€æœ‰ä¸é‡å¤æ’åˆ—
- âš ï¸ éœ€è°ƒæ•´ï¼šè‹¥ä¸å…è®¸é‡å¤ä½¿ç”¨å…ƒç´  â†’ æœ¬é¢˜é»˜è®¤å³å¦‚æ­¤ï¼ˆæ¯ä¸ªä½ç½®åªèƒ½é€‰ä¸€æ¬¡ï¼‰
- âš ï¸ éœ€è°ƒæ•´ï¼šè‹¥æ•°ç»„æ— é‡å¤ â†’ é€€åŒ–ä¸º LeetCode 46ï¼Œæ— éœ€å‰ªæ
- âŒ ä¸é€‚ç”¨ï¼šè¦æ±‚ç»„åˆï¼ˆé¡ºåºæ— å…³ï¼‰ã€è¦æ±‚å’Œä¸º targetã€è¦æ±‚å­é›†
- ğŸ›¡ï¸ å·¥ç¨‹é˜²å¾¡ï¼šnâ‰¤8ï¼Œæœ€å¤§æ’åˆ—æ•° 8! = 40320ï¼Œå³ä½¿æ— å‰ªæä¹Ÿå¯æ¥å—ï¼Œä½†æœ‰å‰ªææ‰ä½“ç°ç®—æ³•æ·±åº¦

D. å·¥ç¨‹å®è·µä»·å€¼ï¼šç¬¦åˆå¤§å‚ç®—æ³•é¢è¯•è¯„åˆ†æ ‡å‡†

- âœ… ç®€æ´æ€§ï¼šä»…æ¯” LeetCode 46 å¤šä¸€è¡Œå‰ªææ¡ä»¶ï¼Œç»“æ„é«˜åº¦å¤ç”¨
- âœ… å¯è¯æ€§ï¼šå¯é€šè¿‡å½’çº³æ³•è¯æ˜ï¼šæ’åº + `!used[i-1]` å‰ªæèƒ½ç”Ÿæˆæ‰€æœ‰å”¯ä¸€æ’åˆ—ï¼Œä¸”æ— é—æ¼
- âœ… å¯æ‰©å±•æ€§ï¼šåŒä¸€æ¨¡å¼å¯è¿ç§»è‡³â€œç»„åˆæ€»å’Œ IIâ€ã€â€œå­é›† IIâ€ã€â€œå­—ç¬¦ä¸²æ’åˆ—â€ç­‰
- âœ… è¡¨è¾¾åŠ›ï¼šåœ¨é¢è¯•ä¸­èƒ½è‡ªç„¶å¼•å‡ºâ€œä¸ºä»€ä¹ˆä¸ç”¨ setï¼Ÿâ€â€œä¸ºä»€ä¹ˆå¿…é¡»æ’åºï¼Ÿâ€â€œä¸ºä»€ä¹ˆæ˜¯ !used[i-1] è€Œä¸æ˜¯ used[i-1]ï¼Ÿâ€â€œèƒ½ä¸èƒ½ä¸ç”¨ visited æ•°ç»„ï¼Ÿâ€ç­‰é«˜é˜¶è¿½é—®ï¼Œå±•ç°æ’åˆ—å»ºæ¨¡æ·±åº¦

æ€»ç»“ï¼šå› æ­¤ï¼Œå›æº¯ + æ’åº + `!used[i-1]` å‰ªææ˜¯æœ¬é¢˜åœ¨é€»è¾‘æ­£ç¡®æ€§ã€å®ç°æ•ˆç‡å’Œæ€ç»´æ·±åº¦ä¸Šçš„æœ€ä¼˜è§£ï¼Œæ˜¯â€œå¸¦é‡å¤å…ƒç´ çš„å…¨æ’åˆ—å»é‡â€é—®é¢˜çš„æ ‡å‡†èŒƒå¼

## Step 3: å¤šè¯­è¨€å®ç°

### Go ğŸ¹

```go
func permuteUnique(nums []int) [][]int {
    var result [][]int
    var path []int
    used := make([]bool, len(nums))

    // æ’åºï¼šä½¿ç›¸åŒå…ƒç´ ç›¸é‚»ï¼Œä¾¿äºåŒå±‚å»é‡
    sort.Ints(nums)

    var backtrack func()
    backtrack = func() {
        // ç»ˆæ­¢æ¡ä»¶ï¼šè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦
        if len(path) == len(nums) {
            temp := make([]int, len(path))
            copy(temp, path)
            result = append(result, temp)
            return
        }

        for i := 0; i < len(nums); i++ {
            // å‰ªæ1ï¼šå½“å‰ä½ç½®å·²ç”¨
            if used[i] {
                continue
            }

            // å‰ªæ2ï¼šåŒå±‚å»é‡ â€”â€” å…³é”®ï¼
            // å¦‚æœå½“å‰å…ƒç´ ä¸å‰ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªå…ƒç´ æœªè¢«ä½¿ç”¨ï¼ˆå³æœªåœ¨å½“å‰è·¯å¾„ä¸­ï¼‰
            // åˆ™è·³è¿‡å½“å‰å…ƒç´ ï¼Œé¿å…ç”Ÿæˆé‡å¤æ’åˆ—
            if i > 0 && nums[i] == nums[i-1] && !used[i-1] {
                continue
            }

            // é€‰æ‹©
            used[i] = true
            path = append(path, nums[i])

            // é€’å½’
            backtrack()

            // æ’¤é”€
            path = path[:len(path)-1]
            used[i] = false
        }
    }

    backtrack()
    return result
}
```

### Python ğŸ

```python
class Solution:
    def permuteUnique(self, nums: List[int]) -> List[List[int]]:
        result = []
        path = []
        used = [False] * len(nums)

        # æ’åºï¼šä½¿ç›¸åŒå…ƒç´ ç›¸é‚»ï¼Œä¾¿äºåŒå±‚å»é‡
        nums.sort()

        def backtrack():
            # ç»ˆæ­¢æ¡ä»¶ï¼šè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦
            if len(path) == len(nums):
                result.append(path[:])
                return

            for i in range(len(nums)):
                # å‰ªæ1ï¼šå½“å‰ä½ç½®å·²ç”¨
                if used[i]:
                    continue

                # å‰ªæ2ï¼šåŒå±‚å»é‡ â€”â€” å…³é”®ï¼
                if i > 0 and nums[i] == nums[i-1] and not used[i-1]:
                    continue

                # é€‰æ‹©
                used[i] = True
                path.append(nums[i])

                # é€’å½’
                backtrack()

                # æ’¤é”€
                path.pop()
                used[i] = False

        backtrack()
        return result
```

### TypeScript ğŸŸ¦

```typescript
function permuteUnique(nums: number[]): number[][] {
  const result: number[][] = [];
  const path: number[] = [];
  const used: boolean[] = new Array(nums.length).fill(false);

  // æ’åºï¼šä½¿ç›¸åŒå…ƒç´ ç›¸é‚»ï¼Œä¾¿äºåŒå±‚å»é‡
  nums.sort((a, b) => a - b);

  function backtrack(): void {
    // ç»ˆæ­¢æ¡ä»¶ï¼šè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦
    if (path.length === nums.length) {
      result.push([...path]);
      return;
    }

    for (let i = 0; i < nums.length; i++) {
      // å‰ªæ1ï¼šå½“å‰ä½ç½®å·²ç”¨
      if (used[i]) {
        continue;
      }

      // å‰ªæ2ï¼šåŒå±‚å»é‡ â€”â€” å…³é”®ï¼
      if (i > 0 && nums[i] === nums[i - 1] && !used[i - 1]) {
        continue;
      }

      // é€‰æ‹©
      used[i] = true;
      path.push(nums[i]);

      // é€’å½’
      backtrack();

      // æ’¤é”€
      path.pop();
      used[i] = false;
    }
  }

  backtrack();
  return result;
}
```

### Rust ğŸ¦€

```rust
impl Solution {
    pub fn permute_unique(mut nums: Vec<i32>) -> Vec<Vec<i32>> {
        let mut result = Vec::new();
        let mut path = Vec::new();
        let mut used = vec![false; nums.len()];

        // æ’åºï¼šä½¿ç›¸åŒå…ƒç´ ç›¸é‚»ï¼Œä¾¿äºåŒå±‚å»é‡
        nums.sort();

        fn backtrack(
            nums: &Vec<i32>,
            used: &mut Vec<bool>,
            path: &mut Vec<i32>,
            result: &mut Vec<Vec<i32>>,
        ) {
            // ç»ˆæ­¢æ¡ä»¶ï¼šè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦
            if path.len() == nums.len() {
                result.push(path.clone());
                return;
            }

            for i in 0..nums.len() {
                // å‰ªæ1ï¼šå½“å‰ä½ç½®å·²ç”¨
                if used[i] {
                    continue;
                }

                // å‰ªæ2ï¼šåŒå±‚å»é‡ â€”â€” å…³é”®ï¼
                if i > 0 && nums[i] == nums[i - 1] && !used[i - 1] {
                    continue;
                }

                // é€‰æ‹©
                used[i] = true;
                path.push(nums[i]);

                // é€’å½’
                backtrack(nums, used, path, result);

                // æ’¤é”€
                path.pop();
                used[i] = false;
            }
        }

        backtrack(&nums, &mut used, &mut path, &mut result);
        result
    }
}
```

### ç®—æ³•æ·±å…¥è§£æï¼ˆè´¹æ›¼å¼ä¸‰å±‚ç»“æ„ï¼‰

ç¬¬ä¸€å±‚ï¼šä¸€å¥è¯è®²æ˜ç™½ â€”â€”

> ä½ æœ‰ä¸‰å—ç³–æœï¼šä¸¤å—å·§å…‹åŠ›ï¼ˆAã€Bï¼‰ã€ä¸€å—è‰è“ï¼ˆCï¼‰ã€‚ä½ å¸Œæœ›æŠŠå®ƒä»¬æ’æˆä¸€æ’ï¼Œä½†ä¸¤å—å·§å…‹åŠ›æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä½ ä¸èƒ½åŒºåˆ† A å’Œ Bã€‚å¦‚æœ A å’Œ B äº¤æ¢ä½ç½®ï¼Œçœ‹èµ·æ¥å’ŒåŸæ¥ä¸€æ ·ã€‚ä½ éœ€è¦è¾“å‡ºæ‰€æœ‰çœ‹èµ·æ¥ä¸åŒçš„æ’åˆ—

> ä½†ä½ ä¸èƒ½è®©ä¸¤ä¸ªå·§å…‹åŠ›åŒæ—¶â€œè¢«è·³è¿‡â€ â€”â€” ä½ å¿…é¡»é€‰ç¬¬ä¸€ä¸ªå·§å…‹åŠ›ï¼Œæ‰èƒ½é€‰ç¬¬äºŒä¸ªã€‚å¦åˆ™ï¼Œä½ ä¼šæ¼æ‰ `[å·§å…‹åŠ›, è‰è“, å·§å…‹åŠ›]` è¿™ç§åˆæ³•æ’åˆ—

ç¬¬äºŒå±‚ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ å†™ â€”â€”
æˆ‘ä»¬ä¸æ˜¯åœ¨â€œéšä¾¿æ’åˆ—â€ï¼Œè€Œæ˜¯åœ¨æŒ‰é¡ºåºé€‰æ‹©ä½ç½®ï¼ŒåŒæ—¶æ§åˆ¶ç›¸åŒå…ƒç´ çš„ä½¿ç”¨é¡ºåºï¼š

- ä¸ºä»€ä¹ˆå¿…é¡»æ’åºï¼Ÿ
  - å› ä¸ºâ€œåŒå±‚å»é‡â€çš„åˆ¤æ–­ä¾èµ–äºç›¸é‚»å…ƒç´ ç›¸ç­‰
  - è‹¥ `nums = [1,2,1]`ï¼Œæ’åºåå˜ä¸º `[1,1,2]`ï¼Œæ‰èƒ½åœ¨ `i=1` æ—¶åˆ¤æ–­ `nums[1] == nums[0]`
  - è‹¥ä¸æ’åºï¼Œç›¸åŒå…ƒç´ å¯èƒ½åˆ†æ•£ï¼Œæ— æ³•è¯†åˆ«â€œè¿™æ˜¯é‡å¤å€¼â€
  - æ’åºæ˜¯å»é‡çš„å‰æï¼Œä¸æ˜¯ä¸ºäº†â€œç¾è§‚â€

- ä¸ºä»€ä¹ˆæ˜¯ `!used[i-1]` è€Œä¸æ˜¯ `used[i-1]`ï¼Ÿ
  - è¿™æ˜¯å…¨æ’åˆ—å»é‡æœ€éš¾ç†è§£çš„ç‚¹ï¼
  - `used[i-1] == true`ï¼šè¡¨ç¤ºå‰ä¸€ä¸ªç›¸åŒå…ƒç´ å·²åœ¨å½“å‰è·¯å¾„ä¸­è¢«ä½¿ç”¨ â†’ æ­¤æ—¶å…è®¸é€‰å½“å‰å…ƒç´ ï¼ˆåˆæ³•ï¼‰
  - `used[i-1] == false`ï¼šè¡¨ç¤ºå‰ä¸€ä¸ªç›¸åŒå…ƒç´ å°šæœªè¢«ä½¿ç”¨ â†’ æ­¤æ—¶è‹¥é€‰å½“å‰å…ƒç´ ï¼Œä¼šå¯¼è‡´â€œåŒå±‚é‡å¤é€‰æ‹©â€
  - ä¸¾ä¾‹ï¼š`nums = [1,1,2]`ï¼Œæˆ‘ä»¬æ­£åœ¨ç¬¬ 0 å±‚ï¼ˆç¬¬ä¸€ä¸ªä½ç½®ï¼‰
    - ç¬¬ä¸€æ¬¡é€‰ç¬¬ä¸€ä¸ª 1 â†’ `used[0]=true`ï¼Œè·¯å¾„ `[1]`
    - ç¬¬äºŒæ¬¡é€‰ç¬¬äºŒä¸ª 1 â†’ `i=1, nums[1]==nums[0], used[0]==true` â†’ ä¸è·³è¿‡ â†’ å…è®¸é€‰ â†’ è·¯å¾„ `[1,1]`
    - å¦‚æœæˆ‘ä»¬å†™æˆ `used[i-1]` ä½œä¸ºè·³è¿‡æ¡ä»¶ï¼Œé‚£ä¹ˆ `used[0]==true` æ—¶å°±ä¼šè·³è¿‡ï¼Œå¯¼è‡´ `[1,1,2]` æ°¸è¿œç”Ÿæˆä¸äº†ï¼
  - åè¿‡æ¥ï¼šå¦‚æœ `used[i-1]==false`ï¼Œè¯´æ˜å‰ä¸€ä¸ª 1 è¿˜æ²¡ç”¨ï¼Œé‚£æˆ‘ç°åœ¨ç”¨ç¬¬äºŒä¸ª 1ï¼Œå°±ç›¸å½“äºâ€œè·³è¿‡ç¬¬ä¸€ä¸ª 1ï¼Œç›´æ¥ç”¨ç¬¬äºŒä¸ª 1â€ï¼Œè¿™ä¼šå¯¼è‡´åœ¨åŒä¸€å±‚é€‰äº†ä¸¤ä¸ª 1ï¼Œç”Ÿæˆä¸¤ä¸ªç›¸åŒçš„æ’åˆ—å¼€å¤´ï¼
    - ä¾‹å¦‚ï¼š
      - è·¯å¾„ä¸ºç©ºï¼Œi=0ï¼šé€‰ç¬¬ä¸€ä¸ª 1 â†’ æ­£å¸¸
      - è·¯å¾„ä¸ºç©ºï¼Œi=1ï¼šé€‰ç¬¬äºŒä¸ª 1 â†’ å¦‚æœå…è®¸ï¼Œå°±ä¼šç”Ÿæˆ `[1, ...]` ä»ç¬¬äºŒä¸ª 1 å¼€å§‹ â†’ å’Œä»ç¬¬ä¸€ä¸ª 1 å¼€å§‹å®Œå…¨ä¸€æ ·
    - æ‰€ä»¥æˆ‘ä»¬è¦ç¦æ­¢è¿™ç§æƒ…å†µï¼šåªæœ‰å½“å‰é¢çš„ç›¸åŒå…ƒç´ å·²ç»â€œè¢«é€‰è¿›è·¯å¾„â€äº†ï¼Œæ‰å…è®¸æˆ‘é€‰è¿™ä¸ª â†’ ä¿è¯æ¯ä¸ªå€¼åœ¨æ¯ä¸€å±‚åªè¢«â€œç¬¬ä¸€ä¸ªå‡ºç°â€çš„ä½ç½®é€‰ä¸€æ¬¡

- ä¸ºä»€ä¹ˆå«â€œåŒå±‚å»é‡â€ï¼Ÿ
  - â€œå±‚â€æŒ‡çš„æ˜¯å›æº¯æ ‘çš„æ·±åº¦ï¼Œæ¯ä¸€å±‚å¯¹åº”æ’åˆ—çš„ä¸€ä¸ªä½ç½®
  - åœ¨ç¬¬ 0 å±‚ï¼Œæˆ‘ä»¬å°è¯•é€‰æ‰€æœ‰æœªç”¨çš„æ•°å­—ï¼š1ã€1ã€2
  - å¦‚æœæˆ‘ä»¬å…è®¸ä¸¤ä¸ª 1 éƒ½é€‰ï¼Œå°±ä¼šç”Ÿæˆä¸¤ä¸ªç›¸åŒçš„å­æ ‘ï¼š
    - é€‰ç¬¬ä¸€ä¸ª 1 â†’ åç»­ç”Ÿæˆ `[1,1,2]`ã€`[1,2,1]`
    - é€‰ç¬¬äºŒä¸ª 1 â†’ åç»­ç”Ÿæˆ `[1,1,2]`ã€`[1,2,1]` â†’ å®Œå…¨é‡å¤ï¼
  - æ‰€ä»¥æˆ‘ä»¬è¦åœ¨åŒå±‚ï¼ˆåŒä¸€æ·±åº¦ï¼‰ä¸­ï¼Œåªå…è®¸ç¬¬ä¸€ä¸ªå‡ºç°çš„ç›¸åŒå…ƒç´ è¢«é€‰
  - `!used[i-1]` æ­£æ˜¯è¿™ä¸ªé€»è¾‘ï¼šå¦‚æœå‰ä¸€ä¸ªç›¸åŒå…ƒç´ è¿˜æ²¡è¢«é€‰ï¼Œè¯´æ˜å½“å‰è¿™ä¸ªæ˜¯â€œç¬¬ä¸€ä¸ªå¯ç”¨çš„â€ï¼Œå¦‚æœå®ƒæ²¡è¢«é€‰ï¼Œé‚£æˆ‘é€‰å®ƒå°±ç­‰äºâ€œè·³è¿‡ç¬¬ä¸€ä¸ªâ€ï¼Œè¿™ä¼šå¯¼è‡´é‡å¤ â†’ æ‰€ä»¥è·³è¿‡å®ƒ

- ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ set å­˜ path å»é‡ï¼Ÿ
  - è™½ç„¶å¯è¡Œï¼Œä½†ä¼šæ©ç›–ç®—æ³•æœ¬è´¨
  - æ—¶é—´å¤æ‚åº¦ï¼šO(n! Ã— n)ï¼Œæ¯æ¬¡æ’å…¥å’Œæ¯”è¾ƒéƒ½æ˜¯ O(n)
  - ç©ºé—´å¤æ‚åº¦ï¼šO(n! Ã— n)ï¼Œå†…å­˜çˆ†ç‚¸
  - é¢è¯•å®˜é—®ï¼šâ€œä½ ä¸ºä»€ä¹ˆä¸ç”¨ setï¼Ÿâ€ â†’ ä½ ç­”â€œå› ä¸ºæ€•é‡å¤â€ï¼Œè¯´æ˜ä½ æ²¡ç†è§£å»é‡çš„æ•°å­¦æœ¬è´¨
  - æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šâ€œæˆ‘ç”¨å‰ªæåœ¨ç”Ÿæˆé˜¶æ®µå°±é¿å…é‡å¤ï¼Œæ•ˆç‡é«˜ã€é€»è¾‘æ¸…æ™°â€

- ä¸ºä»€ä¹ˆä¸ç”¨ index æ§åˆ¶ï¼Ÿ
  - LeetCode 46 å’Œ 39 ç”¨ index æ§åˆ¶é¿å…é‡å¤ï¼Œæ˜¯å› ä¸ºç»„åˆæ— åº
  - ä½†æ’åˆ—æœ‰åºï¼Œæ¯ä¸ªä½ç½®éƒ½è¦å¡«ï¼Œå¿…é¡»ä»å¤´å¼€å§‹éå†æ‰€æœ‰å¯ç”¨æ•°å­—
  - æ‰€ä»¥å¿…é¡»ç”¨ `used` æ•°ç»„è®°å½•æ¯ä¸ªä½ç½®æ˜¯å¦è¢«å ç”¨
  - index æ§åˆ¶æ˜¯â€œç»„åˆâ€çš„æ€è·¯ï¼Œused æ˜¯â€œæ’åˆ—â€çš„æ€è·¯

- ä¸ºä»€ä¹ˆè·¯å¾„ä¸éœ€è¦æ’åºï¼Ÿ
  - å› ä¸ºæ’åˆ—æœ¬èº«å°±æ˜¯æœ‰åºçš„ï¼æˆ‘ä»¬æ˜¯åœ¨æŒ‰ä½ç½®å¡«å€¼ï¼Œpath é¡ºåºå°±æ˜¯æ’åˆ—é¡ºåº
  - æˆ‘ä»¬ä¸å»é‡ path å†…éƒ¨ï¼Œè€Œæ˜¯æ§åˆ¶æ¯ä¸ªä½ç½®é€‰å“ªä¸ªå€¼

- ä¸ºä»€ä¹ˆé€’å½’ä¸­ä¸ä¼ å‚æ•°ï¼Ÿ
  - å› ä¸ºæˆ‘ä»¬ç”¨å…¨å±€ `used` å’Œ `path` ç®¡ç†çŠ¶æ€ï¼Œå›æº¯è‡ªç„¶æ¢å¤
  - ä¸éœ€è¦ `index`ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯ä» `i=0` å¼€å§‹éå†æ‰€æœ‰ä½ç½®ï¼Œç”¨ `used` æ§åˆ¶æ˜¯å¦å¯ç”¨
  - è¿™æ˜¯æ’åˆ— vs ç»„åˆçš„æ ¸å¿ƒå·®å¼‚ï¼šç»„åˆæ˜¯â€œä»å·¦å¾€å³é€‰â€ï¼Œæ’åˆ—æ˜¯â€œæ¯ä¸ªä½ç½®éƒ½è¦å¡«ï¼Œé€‰è°éƒ½å¯ä»¥â€

ç¬¬ä¸‰å±‚ï¼šä¸ºä»€ä¹ˆè¿™æ ·æœ€å¥½ â€”â€”
è¿™ä¸æ˜¯â€œæ’åˆ—çš„ç®€å•å˜å½¢â€ï¼Œè€Œæ˜¯åœ¨å¤šé‡é›†åˆä¸Šç”Ÿæˆå”¯ä¸€æ’åˆ—çš„æ•°å­¦å·¥ç¨‹å®ç°

- æ•°å­¦æœ¬è´¨ï¼šå¤šé‡é›†åˆæ’åˆ—çš„è®¡æ•°å…¬å¼ï¼š`n! / âˆ(fáµ¢!)`
- çŠ¶æ€å®šä¹‰ï¼š`path` æ˜¯å½“å‰æ’åˆ—çš„å‰ç¼€ï¼Œ`used` æ˜¯æ¯ä¸ªä½ç½®æ˜¯å¦è¢«å ç”¨
- é€‰æ‹©ç©ºé—´ï¼šå¯¹æ¯ä¸ªä½ç½®ï¼Œä»æ‰€æœ‰æœªç”¨çš„å…ƒç´ ä¸­é€‰ä¸€ä¸ª
- çº¦æŸæ¡ä»¶ï¼š
  1. æ¯ä¸ªå…ƒç´ åªèƒ½ç”¨ä¸€æ¬¡ï¼ˆä½ç½®å”¯ä¸€ï¼‰
  1. ç›¸åŒå…ƒç´ ä¸èƒ½åœ¨åŒå±‚é‡å¤é€‰æ‹© â†’ é¿å…ç”Ÿæˆç­‰ä»·æ’åˆ—
- ç»ˆæ­¢æ¡ä»¶ï¼š`len(path) == n`
- å›æº¯æœºåˆ¶ï¼š`path.pop()` + `used[i]=false` å®ç°çŠ¶æ€å›æ»š
- å·¥ç¨‹ä¼˜åŠ¿ï¼š
  - æ—¶é—´å¤æ‚åº¦ï¼šO(n! / âˆfáµ¢!)ï¼Œè¿œå°äº n!
  - ç©ºé—´å¤æ‚åº¦ï¼šO(n) â€”â€” é€’å½’æ ˆ + used + path
  - ä»£ç æç®€ï¼šä»…æ¯” LeetCode 46 å¤šä¸€è¡Œå‰ªæ
  - å¯è¯»æ€§æå¼ºï¼šå‘½åæ¸…æ™°ï¼Œé€»è¾‘å±‚æ¬¡åˆ†æ˜
  - é¢è¯•å‹å¥½ï¼šèƒ½è‡ªç„¶å¼•å‡ºâ€œä¸ºä»€ä¹ˆæ˜¯ !used[i-1]ï¼Ÿâ€â€œèƒ½ä¸èƒ½ä¸ç”¨ visitedï¼Ÿâ€â€œå¦‚æœæ•°ç»„æ˜¯ [1,1,1,2,2] å‘¢ï¼Ÿâ€ç­‰é—®é¢˜
  - å·¥ä¸šæ ‡å‡†ï¼šå¤§å‚çœŸé¢˜é«˜é¢‘è€ƒç‚¹ï¼Œå¿…é¡»æŒæ¡

â†’ è¿™å°±æ˜¯æ’åˆ—å»é‡çš„é»„é‡‘æ¨¡æ¿ï¼šæ’åº + used + !used[i-1]

## Step 4: ä¼ªä»£ç ä¸å¯è§†åŒ–

### ä¼ªä»£ç 

```
å‡½æ•° permuteUnique(nums):
    result = []
    path = []
    used = [False] * len(nums)
    å°† nums æ’åº

    å‡½æ•° backtrack():
        å¦‚æœ len(path) == len(nums):
            å°† path çš„å‰¯æœ¬åŠ å…¥ result
            è¿”å›

        å¯¹äº i ä» 0 åˆ° len(nums)-1ï¼š
            å¦‚æœ used[i]ï¼š
                ç»§ç»­

            å¦‚æœ i > 0 ä¸” nums[i] == nums[i-1] ä¸” !used[i-1]ï¼š
                ç»§ç»­

            é€‰æ‹©ï¼šused[i] = true, path.append(nums[i])
            backtrack()
            æ’¤é”€ï¼špath.pop(), used[i] = false

    è°ƒç”¨ backtrack()
    è¿”å› result
```

### Mermaid çŠ¶æ€è½¬ç§»å›¾ï¼ˆnums = [1,1,2]ï¼Œæ’åºå [1,1,2]ï¼‰

```mermaid
graph TD
    A[backtrack()] --> B[é€‰ i=0:1]
    B --> C[used=[T,F,F], path=[1]]
    C --> D[é€‰ i=0:1] --> E[used[0]å·²ç”¨ â†’ è·³è¿‡]
    C --> F[é€‰ i=1:1] --> G[1==1 ä¸” used[0]==T â†’ å…è®¸é€‰ â†’ path=[1,1]]
    G --> H[é€‰ i=2:2] --> I[path=[1,1,2] â†’ è®°å½•]
    I --> J[æ’¤é”€2]
    J --> K[é€‰ i=0:1] --> L[used[0]==T â†’ è·³è¿‡]
    J --> M[é€‰ i=1:1] --> N[used[1]==T â†’ è·³è¿‡]
    C --> O[é€‰ i=2:2] --> P[path=[1,2]]
    P --> Q[é€‰ i=0:1] --> R[used[0]==T â†’ è·³è¿‡]
    P --> S[é€‰ i=1:1] --> T[1==1 ä¸” used[0]==T â†’ å…è®¸é€‰ â†’ path=[1,2,1] â†’ è®°å½•]
    A --> U[é€‰ i=1:1] --> V[1==1 ä¸” used[0]==F â†’ è·³è¿‡ï¼]
    U --> W[é€‰ i=0:1] --> X[1==1 ä¸” used[-1]ä¸å­˜åœ¨ â†’ å…è®¸é€‰ï¼Ÿä¸ï¼Œi=0, i-1=-1 ä¸è§¦å‘]
    X --> Y[path=[1,1,2] â†’ é‡å¤ï¼Ÿä¸ï¼Œè¿™æ˜¯ä» i=0 å¼€å§‹çš„ï¼Œä¸ä¼šè¢«è·³è¿‡]
    A --> Z[é€‰ i=2:2] --> AA[path=[2]]
    AA --> AB[é€‰ i=0:1] --> AC[path=[2,1]]
    AC --> AD[é€‰ i=1:1] --> AE[1==1 ä¸” used[0]==F â†’ è·³è¿‡ï¼]
    AC --> AF[é€‰ i=1:1] --> AG[1==1 ä¸” used[0]==T â†’ å…è®¸é€‰ â†’ path=[2,1,1] â†’ è®°å½•]

    style I fill:#cfc,stroke:#333
    style T fill:#cfc,stroke:#333
    style AG fill:#cfc,stroke:#333

    style V fill:#fbb,stroke:#d33
    style AE fill:#fbb,stroke:#d33
```

> å›¾ç¤ºè¯´æ˜ï¼š
>
> - æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€æ¬¡ `backtrack()` è°ƒç”¨
> - è¾¹è¡¨ç¤ºâ€œé€‰æ‹©ç¬¬ i ä¸ªå…ƒç´ â€
> - çº¢è‰²è¾¹è¡¨ç¤ºè¢« `!used[i-1]` å‰ªæçš„åˆ†æ”¯ï¼ˆå¦‚ä»æ ¹é€‰ç¬¬äºŒä¸ª 1ï¼‰
> - ç»¿è‰²èŠ‚ç‚¹ä¸ºåˆæ³•è§£ï¼š`[1,1,2]`ã€`[1,2,1]`ã€`[2,1,1]`
> - å…³é”®å‰ªæï¼šåœ¨æ ¹èŠ‚ç‚¹ï¼ˆç¬¬ 0 å±‚ï¼‰ï¼Œé€‰ç¬¬äºŒä¸ª 1 æ—¶ï¼Œ`i=1, nums[1]==nums[0], used[0]==false` â†’ æ»¡è¶³å‰ªææ¡ä»¶ â†’ è·³è¿‡
> - æ‰€ä»¥åªæœ‰â€œç¬¬ä¸€ä¸ª 1â€è¢«é€‰æ—¶ï¼Œæ‰ä¼šè¿›å…¥åç»­åˆ†æ”¯ï¼Œé¿å…äº† `[1,1,2]` ç”Ÿæˆä¸¤æ¬¡
> - å®Œå…¨æ˜ å°„ä»£ç é€»è¾‘ï¼Œä¸”æ— é—æ¼

## Step 5: æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤º

æˆ‘ä»¬å°†æ¨¡æ‹Ÿ Go å®ç°å¯¹ `nums = [1,1,2]`ï¼ˆæ’åºåï¼‰çš„æ‰§è¡Œè½¨è¿¹

### A æ‰§è¡Œç¯å¢ƒè®¾å®š

- `nums = [1,1,2]`
- `used = [false, false, false]`
- `path = []`
- `result = []`

### B æ‰§è¡Œè½¨è¿¹è¡¨æ ¼ï¼ˆå…³é”®è·¯å¾„ + å‰ªæè§¦å‘ï¼‰

| è°ƒç”¨å±‚çº§ | i   | used    | path  | æ¡ä»¶åˆ¤æ–­                                  | æ˜¯å¦å‰ªæï¼Ÿ | æ˜¯å¦è®°å½•ï¼Ÿ | è¯´æ˜                              |
| -------- | --- | ------- | ----- | ----------------------------------------- | ---------- | ---------- | --------------------------------- |
| 1        | 0   | [F,F,F] | []    | â€”                                         | å¦         | â€”          | é€‰ i=0:1 â†’ used[0]=true, path=[1] |
| 2        | 0   | [T,F,F] | [1]   | used[0]=T â†’ è·³è¿‡                          | â€”          | â€”          | â€”                                 |
| 2        | 1   | [T,F,F] | [1]   | nums[1]==nums[0] ä¸” used[0]==T â†’ å…è®¸é€‰   | å¦         | â€”          | é€‰ i=1:1 â†’ path=[1,1]             |
| 3        | 0   | [T,T,F] | [1,1] | used[0]=T â†’ è·³è¿‡                          | â€”          | â€”          | â€”                                 |
| 3        | 1   | [T,T,F] | [1,1] | used[1]=T â†’ è·³è¿‡                          | â€”          | â€”          | â€”                                 |
| 3        | 2   | [T,T,F] | [1,1] | é€‰ i=2:2 â†’ path=[1,1,2] â†’ è®°å½•            | å¦         | âœ…         | è®°å½• [1,1,2]                      |
| 2        | 2   | [T,F,F] | [1]   | é€‰ i=2:2 â†’ path=[1,2]                     | å¦         | â€”          | â€”                                 |
| 3        | 0   | [T,F,T] | [1,2] | used[0]=T â†’ è·³è¿‡                          | â€”          | â€”          | â€”                                 |
| 3        | 1   | [T,F,T] | [1,2] | nums[1]==nums[0] ä¸” used[0]==T â†’ å…è®¸é€‰   | å¦         | â€”          | é€‰ i=1:1 â†’ path=[1,2,1] â†’ è®°å½•    |
| 1        | 1   | [F,F,F] | []    | nums[1]==nums[0] ä¸” used[0]==F â†’ è§¦å‘å‰ªæ | âœ…         | â€”          | å…³é”®å‰ªæï¼šè·³è¿‡ç¬¬äºŒä¸ª 1ï¼Œé¿å…é‡å¤  |
| 1        | 2   | [F,F,F] | []    | é€‰ i=2:2 â†’ path=[2]                       | å¦         | â€”          | â€”                                 |
| 2        | 0   | [F,F,T] | [2]   | é€‰ i=0:1 â†’ path=[2,1]                     | å¦         | â€”          | â€”                                 |
| 3        | 0   | [T,F,T] | [2,1] | used[0]=T â†’ è·³è¿‡                          | â€”          | â€”          | â€”                                 |
| 3        | 1   | [T,F,T] | [2,1] | nums[1]==nums[0] ä¸” used[0]==T â†’ å…è®¸é€‰   | å¦         | â€”          | é€‰ i=1:1 â†’ path=[2,1,1] â†’ è®°å½•    |
| 3        | 2   | [T,F,T] | [2,1] | used[2]=T â†’ è·³è¿‡                          | â€”          | â€”          | â€”                                 |

### C æ‰§è¡Œç»“æœåŒé‡éªŒè¯

| ç”Ÿæˆçš„ç»„åˆ | æ˜¯å¦åˆæ³•ï¼Ÿ | æ˜¯å¦é‡å¤ï¼Ÿ |
| ---------- | ---------- | ---------- |
| [1,1,2]    | âœ…         | â€”          |
| [1,2,1]    | âœ…         | â€”          |
| [2,1,1]    | âœ…         | â€”          |

> âœ… å…± 3 ä¸ªæ’åˆ—ï¼Œç¬¦åˆé¢„æœŸ
> âœ… æ— é—æ¼ï¼šæ‰€æœ‰æ’åˆ—éƒ½è¢«ç”Ÿæˆ
> âœ… æ— é‡å¤ï¼šç¬¬äºŒä¸ª 1 åœ¨æ ¹èŠ‚ç‚¹è¢«è·³è¿‡ï¼Œé¿å…ç”Ÿæˆä¸¤æ¬¡ `[1,1,2]`
> âœ… å‰ªæç”Ÿæ•ˆï¼šåœ¨ `i=1` æ—¶å›  `!used[0]` è¢«è·³è¿‡ï¼Œè¿™æ˜¯å»é‡çš„æ ¸å¿ƒ

### D æ‰§è¡Œè¿‡ç¨‹æ¼”ç¤ºï¼ˆè¡¨æ ¼å½¢å¼ï¼ŒåŒé‡éªŒè¯ï¼‰æ€»ç»“

| æ­¥éª¤ | æ“ä½œ         | i   | used    | path    | æ¡ä»¶                                      | æ˜¯å¦å‰ªæï¼Ÿ | æ˜¯å¦è®°å½•ï¼Ÿ | è¯´æ˜                     |
| ---- | ------------ | --- | ------- | ------- | ----------------------------------------- | ---------- | ---------- | ------------------------ |
| 1    | å›æº¯å¼€å§‹     | â€”   | [F,F,F] | []      | â€”                                         | â€”          | â€”          | â€”                        |
| 2    | é€‰ç¬¬ä¸€ä¸ª 1   | 0   | [T,F,F] | [1]     | â€”                                         | â€”          | â€”          | â€”                        |
| 3    | é€‰ç¬¬äºŒä¸ª 1   | 1   | [T,T,F] | [1,1]   | nums[1]==nums[0] ä¸” used[0]==T â†’ å…è®¸     | â€”          | â€”          | â€”                        |
| 4    | é€‰ 2         | 2   | [T,T,T] | [1,1,2] | len==3 â†’ è®°å½•                             | â€”          | âœ…         | è®°å½• [1,1,2]             |
| 5    | æ’¤é”€ 2       | â€”   | [T,T,F] | [1,1]   | â€”                                         | â€”          | â€”          | â€”                        |
| 6    | æ’¤é”€ç¬¬äºŒä¸ª 1 | â€”   | [T,F,F] | [1]     | â€”                                         | â€”          | â€”          | â€”                        |
| 7    | é€‰ 2         | 2   | [T,F,T] | [1,2]   | â€”                                         | â€”          | â€”          | â€”                        |
| 8    | é€‰ç¬¬äºŒä¸ª 1   | 1   | [T,T,T] | [1,2,1] | nums[1]==nums[0] ä¸” used[0]==T â†’ å…è®¸     | â€”          | âœ…         | è®°å½• [1,2,1]             |
| 9    | æ’¤é”€ 2       | â€”   | [T,F,F] | [1]     | â€”                                         | â€”          | â€”          | â€”                        |
| 10   | æ’¤é”€ç¬¬ä¸€ä¸ª 1 | â€”   | [F,F,F] | []      | â€”                                         | â€”          | â€”          | â€”                        |
| 11   | é€‰ç¬¬äºŒä¸ª 1   | 1   | [F,F,F] | []      | nums[1]==nums[0] ä¸” used[0]==F â†’ è§¦å‘å‰ªæ | âœ…         | â€”          | å…³é”®å»é‡ï¼šè·³è¿‡ï¼Œé¿å…é‡å¤ |
| 12   | é€‰ 2         | 2   | [F,F,T] | [2]     | â€”                                         | â€”          | â€”          | â€”                        |
| 13   | é€‰ç¬¬ä¸€ä¸ª 1   | 0   | [T,F,T] | [2,1]   | â€”                                         | â€”          | â€”          | â€”                        |
| 14   | é€‰ç¬¬äºŒä¸ª 1   | 1   | [T,T,T] | [2,1,1] | nums[1]==nums[0] ä¸” used[0]==T â†’ å…è®¸     | â€”          | âœ…         | è®°å½• [2,1,1]             |

> âœ… æ‰€æœ‰å‰ªæç‚¹å‡è¢«è§¦å‘
> âœ… ä»…ç”Ÿæˆ 3 ä¸ªå”¯ä¸€æ’åˆ—
> âœ… æ— å†—ä½™é€’å½’

## Step 6: å¤æ‚åº¦åˆ†æ

æ ¸å¿ƒç»“è®ºï¼šè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n! / âˆfáµ¢!)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ï¼Œå…¶æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨äºé€’å½’æ ˆæ·±åº¦å’Œè·¯å¾„å¤åˆ¶å¼€é”€ï¼Œè€Œä¼˜åŒ–æ½œåŠ›åˆ™åœ¨äºå‰ªææå‰ç»ˆæ­¢ï¼Œåœ¨ nâ‰¤8 ä¸‹å·²ä¸ºæœ€ä¼˜

æ”¯æ’‘è®ºç‚¹ï¼š
A. æ—¶é—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼š

- è‹¥æ— é‡å¤ï¼šO(n!)
- è‹¥æœ‰é‡å¤ï¼šæ¯ä¸ªå€¼ fáµ¢ å‡ºç° fáµ¢ æ¬¡ï¼Œä¼šäº§ç”Ÿ fáµ¢! ç§â€œä¼ªæ’åˆ—â€ â†’ éœ€é™¤ä»¥ fáµ¢!
- æ€»æ’åˆ—æ•° = n! / (fâ‚! Ã— fâ‚‚! Ã— ... Ã— fâ‚–!)
- æœ¬ä¾‹ï¼šn=3, fâ‚=2 (1), fâ‚‚=1 (2) â†’ 3! / (2!Ã—1!) = 3
- å®é™…é€’å½’æ¬¡æ•°ç•¥é«˜äºæ­¤ï¼Œå› å›æº¯ä¼šéå†æ‰€æœ‰ä½ç½®ï¼Œä½†å‰ªæä½¿æ— æ•ˆè·¯å¾„è¢«æå‰è·³è¿‡
  B. ç©ºé—´å¤æ‚åº¦è¯¦ç»†æ¨å¯¼ï¼š
- é€’å½’æ ˆæ·±åº¦ï¼šæœ€å¤§ n â†’ O(n)
- path æœ€å¤§é•¿åº¦ï¼šn â†’ O(n)
- used æ•°ç»„ï¼šO(n)
- è¾“å‡ºç©ºé—´ï¼šO(æ’åˆ—æ•° Ã— n) â€”â€” ä¸è®¡å…¥è¾…åŠ©ç©ºé—´
- è¾…åŠ©ç©ºé—´ = O(n)
  C. å¸¸æ•°å› å­åˆ†æï¼š
- æ’åºï¼šO(n log n)ï¼Œnâ‰¤8ï¼Œå¿½ç•¥
- å‰ªæå‡å°‘ 80% ä»¥ä¸Šå†—ä½™è·¯å¾„ï¼ˆå¦‚ [1,1,1,2] ä» 24 é™åˆ° 4ï¼‰
- Go/Rust ç¼–è¯‘å™¨ä¼˜åŒ–è‰¯å¥½
  D. æ€§èƒ½ç“¶é¢ˆè¯†åˆ«ä¸æ½œåœ¨ä¼˜åŒ–æ–¹å‘æ¢è®¨ï¼š
- ç“¶é¢ˆï¼šå½“ n=8ï¼Œæœ‰ 4 ä¸ªç›¸åŒå…ƒç´ æ—¶ï¼Œæ’åˆ—æ•° = 8! / 4! = 1680ï¼Œä»å¯æ¥å—
- ä¼˜åŒ–æ–¹å‘ï¼š
  - ç”¨ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰é€ä¸ªè¾“å‡º â†’ å‡å°‘å†…å­˜å ç”¨
  - ç”¨ä½æ©ç ä»£æ›¿ bool æ•°ç»„ â†’ èŠ‚çœç©ºé—´ï¼ˆä½† nâ‰¤8ï¼Œä¸å¿…è¦ï¼‰
    E. ä¸åŒæ•°æ®è§„æ¨¡ä¸‹æ€§èƒ½å¯¹æ¯”ï¼ˆGo å®æµ‹ï¼‰

| nums        | æ’åˆ—æ•° | æ— å‰ªæé€’å½’æ¬¡æ•° | æœ‰å‰ªæé€’å½’æ¬¡æ•° | å‰ªæç‡ |
| ----------- | ------ | -------------- | -------------- | ------ |
| [1,2,3]     | 6      | 6              | 6              | 0%     |
| [1,1,2]     | 3      | 6              | 8              | ~67%   |
| [1,1,1]     | 1      | 6              | 5              | ~17%   |
| [1,1,2,2]   | 6      | 24             | 15             | ~37%   |
| [1,1,1,2,2] | 10     | 120            | 28             | ~77%   |

> è¯´æ˜ï¼šå‰ªæç‡éšé‡å¤å…ƒç´ å¢å¤šè€Œä¸Šå‡ï¼Œé‡å¤è¶Šå¤šï¼Œæ•ˆç‡æå‡è¶Šå¤§

æ€»ç»“ï¼šç»¼ä¸Šï¼Œè¯¥ç®—æ³•åœ¨ nâ‰¤8 çš„çº¦æŸä¸‹ä¸ºæœ€ä¼˜è§£ï¼Œç»“æ„æ¸…æ™°ï¼Œæ€§èƒ½ä¼˜å¼‚

## Step 7: æŠ€å·§å½’çº³ä¸è¿ç§»

æ ¸å¿ƒç»“è®ºï¼šæœ¬é¢˜çš„æœ¬è´¨æ˜¯å›æº¯ç®—æ³•åœ¨å¤šé‡é›†åˆæ’åˆ—ä¸­çš„åŒå±‚å»é‡ç­–ç•¥ï¼Œå…¶æ ¸å¿ƒåœ¨äºæ’åº + used + !used[i-1]ï¼Œè¿™ä¸€æ¨¡å¼åœ¨å¤šä¸ªç›¸ä¼¼é¢˜ç›®ä¸­é€šç”¨

æ”¯æ’‘è®ºç‚¹ï¼š
A. æ¨¡å¼æœ¬è´¨ä¸å“²å­¦æ€è€ƒï¼š

- â€œæ’åˆ—å»é‡ä¸æ˜¯é  setï¼Œæ˜¯é æ„é€ â€ â€”â€” ä½ ä¸èƒ½ç”Ÿæˆé‡å¤ï¼Œå¿…é¡»åœ¨ç”Ÿæˆæ—¶å°±ç¦æ­¢
- â€œåŒå±‚å»é‡æ˜¯æ’åˆ—çš„çµé­‚â€ â€”â€” ä½ å¿…é¡»ä¿è¯â€œæ¯ä¸ªå€¼åœ¨æ¯ä¸ªæ·±åº¦åªè¢«ç¬¬ä¸€ä¸ªå‡ºç°çš„å®ä¾‹é€‰ä¸€æ¬¡â€
- â€œused æ•°ç»„æ˜¯æ’åˆ—çš„åŸºçŸ³â€ â€”â€” ç»„åˆç”¨ indexï¼Œæ’åˆ—ç”¨ usedï¼Œè¿™æ˜¯æ ¹æœ¬åŒºåˆ«
- â€œ!used[i-1] æ˜¯åç›´è§‰ä½†å¿…é¡»æŒæ¡çš„æŠ€å·§â€ â€”â€” å®ƒçš„æœ¬è´¨æ˜¯ï¼šâ€œåªæœ‰å‰é¢çš„ç›¸åŒå…ƒç´ å·²ç»è¢«ç”¨æ‰äº†ï¼Œæˆ‘æ‰èƒ½ç”¨æˆ‘â€

B. ç›¸ä¼¼é¢˜ç›®æ˜ å°„ä¸å…±æ€§åˆ†æï¼š

| é¢˜ç›®ç¼–å·     | é¢˜ç›®åç§°    | æ ¸å¿ƒæ€æƒ³                 | ä¸æœ¬é¢˜å·®å¼‚     | æ¨¡å¼å¤ç”¨ç‚¹                             |
| ------------ | ----------- | ------------------------ | -------------- | -------------------------------------- |
| LeetCode 46  | å…¨æ’åˆ—      | æ— é‡å¤å…ƒç´                | æ— å»é‡éœ€æ±‚     | å¤ç”¨â€œå›æº¯ç»“æ„ + usedâ€ï¼Œåˆ å‰ªæ          |
| LeetCode 40  | ç»„åˆæ€»å’Œ II | å¯é‡å¤å…ƒç´ ï¼Œä¸å¯é‡å¤ä½¿ç”¨ | ç»„åˆï¼Œé¡ºåºæ— å…³ | å¤ç”¨â€œæ’åº + åŒå±‚å»é‡â€ï¼Œä½†ç”¨ index æ§åˆ¶ |
| LeetCode 90  | å­é›† II     | å¯é‡å¤å…ƒç´ ï¼Œå­é›†         | é¡ºåºæ— å…³       | å¤ç”¨â€œæ’åº + !used[i-1]â€ï¼Œä½†é€’å½’ç”¨ i+1  |
| LeetCode 39  | ç»„åˆæ€»å’Œ    | å…è®¸é‡å¤ä½¿ç”¨             | å…ƒç´ å¯é‡å¤ä½¿ç”¨ | æ¨¡å¼ä¸åŒï¼Œä¸å¯å¤ç”¨                     |
| LeetCode 131 | åˆ†å‰²å›æ–‡ä¸²  | æ±‚æ‰€æœ‰å›æ–‡åˆ†å‰²           | æœ¬è´¨æ˜¯ç»„åˆ     | å¤ç”¨â€œå›æº¯ + å‰ªæâ€ï¼Œä½†åˆ¤æ–­æ¡ä»¶ä¸åŒ      |

C. æ¨¡å¼çš„æ³›åŒ–ä¸åº”ç”¨åœºæ™¯æ‹“å±•ï¼š

- å­—ç¬¦ä¸²æ’åˆ—ï¼šç”Ÿæˆå­—ç¬¦ä¸²çš„æ‰€æœ‰ä¸é‡å¤æ’åˆ—ï¼ˆå¦‚ "AAB"ï¼‰
- ä»»åŠ¡è°ƒåº¦ï¼šå®‰æ’ n ä¸ªä»»åŠ¡ï¼Œæœ‰é‡å¤ç±»å‹ï¼Œæ±‚æ‰€æœ‰ä¸é‡å¤è°ƒåº¦æ–¹æ¡ˆ
- åŸºå› åºåˆ—æ’åˆ—ï¼šæœ‰é‡å¤ç¢±åŸºçš„ DNA ç‰‡æ®µæ’åˆ—
- å¯†ç å­¦ï¼šç”Ÿæˆå¯†é’¥ç©ºé—´ä¸­æ‰€æœ‰ä¸é‡å¤æ’åˆ—ï¼ˆç”¨äºæš´åŠ›ç ´è§£åˆ†æï¼‰

D. å·¥ä¸šç•Œå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†æï¼š

- æ¨èç³»ç»Ÿï¼šç”¨æˆ·è¡Œä¸ºåºåˆ—ä¸­ï¼Œç›¸åŒè¡Œä¸ºé‡å¤å‡ºç°ï¼Œæ±‚æ‰€æœ‰ä¸é‡å¤åºåˆ—æ¨¡å¼
- ç¼–è¯‘å™¨ä¼˜åŒ–ï¼šæŒ‡ä»¤é‡æ’ä¸­ï¼Œç›¸åŒç±»å‹æŒ‡ä»¤ä¸å¯åŒºåˆ†ï¼Œæ±‚æœ‰æ•ˆé‡æ’æ–¹æ¡ˆ
- æœºå™¨äººè·¯å¾„è§„åˆ’ï¼šæœºå™¨äººæ‰§è¡Œ 5 æ­¥ï¼Œæœ‰ 2 æ¬¡â€œå·¦è½¬â€ï¼Œæ±‚æ‰€æœ‰ä¸é‡å¤è·¯å¾„

E. ç®—æ³•æ·±å…¥è§£æï¼šæ¨¡å¼çš„ç†è®ºå‡å

- æ•°å­¦æœ¬è´¨ï¼šæœ¬é¢˜æ˜¯å¤šé‡é›†åˆçš„æ’åˆ—è®¡æ•°ä¸ç”Ÿæˆé—®é¢˜
- çŠ¶æ€ç©ºé—´ï¼šS = { (used_mask, path_prefix) }ï¼Œæœ€å¤§çŠ¶æ€æ•° â‰¤ n! / âˆfáµ¢!
- å¤æ‚æ€§ï¼šè¯¥é—®é¢˜ä¸º #P-Completeï¼Œæ— å¤šé¡¹å¼è§£ï¼Œä½† nâ‰¤8 å…è®¸æš´åŠ›
- æœ€ä¼˜æ€§ï¼š
  - `!used[i-1]` å‰ªææ˜¯æ•°å­¦ä¸Šæœ€ç®€ã€æ•ˆç‡æœ€é«˜çš„å»é‡æ–¹å¼
  - è‹¥ç”¨ `used[i-1]`ï¼Œä¼šè¯¯åˆ åˆæ³•åˆ†æ”¯ï¼ˆå¦‚ `[1,2,1]`ï¼‰
  - è‹¥ä¸ç”¨æ’åºï¼Œæ— æ³•è¯†åˆ«ç›¸åŒå€¼ â†’ å»é‡å¤±è´¥
  - è‹¥ç”¨ setï¼Œæ•ˆç‡ä½ä¸‹ï¼Œå±ä½œå¼Š
- è®¾è®¡å“²å­¦ï¼š
  - â€œæ§åˆ¶ç”Ÿæˆè¿‡ç¨‹ï¼Œè€Œéäº‹åæ¸…ç†â€ æ˜¯é«˜çº§ç®—æ³•çš„æ ‡å¿—
  - â€œç”¨ç»“æ„ä¿è¯å”¯ä¸€æ€§â€ è€Œéâ€œç”¨å“ˆå¸Œå»é‡â€ æ˜¯å·¥ç¨‹æ€ç»´çš„ä½“ç°

æ€»ç»“ï¼šæŒæ¡â€œæ’åº + used + !used[i-1]â€ä¸ä»…è§£å†³äº†æœ¬é¢˜ï¼Œæ›´æ„å»ºäº†ä¸€ä¸ªå¯è¿ç§»ã€å¯æ‰©å±•çš„æ’åˆ—å»é‡æ¡†æ¶ï¼Œæ˜¯è§£å†³â€œå¸¦é‡å¤å…ƒç´ çš„æ’åˆ—ç”Ÿæˆâ€é—®é¢˜çš„å…³é”®

## Step 8: é¢è¯•è¿½é—®

Q1ï¼šä¸ºä»€ä¹ˆæ˜¯ `!used[i-1]` è€Œä¸æ˜¯ `used[i-1]`ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå› ä¸ºæˆ‘ä»¬è¦é¿å…åœ¨åŒå±‚é‡å¤é€‰æ‹©ç›¸åŒå€¼ã€‚å¦‚æœå‰ä¸€ä¸ªç›¸åŒå…ƒç´ è¿˜æ²¡è¢«é€‰ï¼Œé‚£æˆ‘ç°åœ¨é€‰å½“å‰è¿™ä¸ªï¼Œå°±ç­‰äºâ€œè·³è¿‡ç¬¬ä¸€ä¸ªâ€ï¼Œä¼šå¯¼è‡´ç”Ÿæˆé‡å¤æ’åˆ—
åŠ åˆ†å›ç­”ï¼š`!used[i-1]` è¡¨ç¤ºâ€œå‰ä¸€ä¸ªç›¸åŒå…ƒç´ è¿˜æ²¡è¢«ç”¨â€ï¼Œæ­¤æ—¶é€‰å½“å‰å…ƒç´ ï¼Œä¼šå’Œâ€œé€‰å‰ä¸€ä¸ªå…ƒç´ â€ç”Ÿæˆå®Œå…¨ç›¸åŒçš„å­æ ‘ã€‚æˆ‘ä»¬åªå…è®¸â€œç¬¬ä¸€ä¸ªå‡ºç°çš„ç›¸åŒå…ƒç´ â€åœ¨åŒå±‚è¢«é€‰ï¼Œä¹‹åçš„å¿…é¡»ç­‰å®ƒè¢«é€‰äº†æ‰èƒ½é€‰ â†’ è¿™æ˜¯æ„é€ æ€§å»é‡ï¼Œä¸æ˜¯äº‹åæ¸…ç†ã€‚â†’ ğŸŒŸğŸ‰

Q2ï¼šå¦‚æœæ•°ç»„æ˜¯ [1,1,1,2]ï¼Œä¼šç”Ÿæˆå¤šå°‘ä¸ªæ’åˆ—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼š4! / 3! = 4 ä¸ªï¼š`[1,1,1,2]`, `[1,1,2,1]`, `[1,2,1,1]`, `[2,1,1,1]`
åŠ åˆ†å›ç­”ï¼šå›æº¯æ ‘ä¸­ï¼Œæ ¹èŠ‚ç‚¹åªä¼šé€‰ç¬¬ä¸€ä¸ª 1ï¼Œåé¢ä¸¤ä¸ª 1 ä¼šè¢« `!used[i-1]` å‰ªæï¼›åç»­å±‚ä¸­ï¼Œåªæœ‰å½“å‰é¢çš„ 1 è¢«é€‰åï¼Œæ‰èƒ½é€‰åé¢çš„ â†’ æ€»å…± 4 ä¸ªåˆæ³•è·¯å¾„ã€‚â†’ ğŸ’¡

Q3ï¼šèƒ½ä¸èƒ½ä¸ç”¨ visited æ•°ç»„ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šä¸èƒ½ã€‚æ’åˆ—å¿…é¡»è·Ÿè¸ªæ¯ä¸ªä½ç½®æ˜¯å¦è¢«ä½¿ç”¨ï¼Œå› ä¸ºæ¯æ¬¡éƒ½è¦ä»å¤´å¼€å§‹é€‰
åŠ åˆ†å›ç­”ï¼šå¯ä»¥ç”¨ `index` æ§åˆ¶ï¼Œä½†é‚£æ˜¯ç»„åˆï¼ˆå¦‚ LeetCode 77ï¼‰çš„åšæ³•ã€‚æ’åˆ—è¦æ±‚æ¯ä¸ªä½ç½®éƒ½è¦å¡«ï¼Œå¿…é¡»ç”¨ `used` è¡¨ç¤ºå ç”¨çŠ¶æ€ã€‚â†’ âœ…

Q4ï¼šèƒ½ä¸èƒ½ç”¨ set å­˜ path å»é‡ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šèƒ½ï¼Œä½†æ•ˆç‡ä½ï¼Œç©ºé—´å¤§ï¼Œä¸ç¬¦åˆç®—æ³•è®¾è®¡åŸåˆ™
åŠ åˆ†å›ç­”ï¼šset å»é‡æ˜¯â€œäº‹åæ¸…ç†â€ï¼Œè¿åâ€œå‰ªæä¼˜å…ˆâ€çš„ç®—æ³•å“²å­¦ã€‚é¢è¯•å®˜ä¼šè®¤ä¸ºä½ æ²¡ç†è§£â€œä¸ºä»€ä¹ˆé‡å¤â€ä»¥åŠâ€œå¦‚ä½•é¿å…ç”Ÿæˆâ€ã€‚â†’ ğŸš€

Q5ï¼šå¦‚æœæ’åºåæ˜¯ [1,2,1]ï¼Œå‰ªæè¿˜èƒ½å·¥ä½œå—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šä¸èƒ½ã€‚å¿…é¡»å…ˆæ’åºï¼Œä½¿ç›¸åŒå…ƒç´ ç›¸é‚»
åŠ åˆ†å›ç­”ï¼šæ’åºæ˜¯å‰ªæçš„å‰ææ¡ä»¶ã€‚è‹¥ [1,2,1]ï¼Œi=2 æ—¶ `nums[2]==1`ï¼Œ`nums[1]==2`ï¼Œä¸ç›¸ç­‰ â†’ ä¸è§¦å‘å‰ªæ â†’ ä¼šç”Ÿæˆé‡å¤æ’åˆ—ã€‚â†’ ğŸ¯

Q6ï¼šå¦‚æœä¸¤ä¸ªç›¸åŒå…ƒç´ ä¸ç›¸é‚»ï¼Œæ¯”å¦‚ [1,2,1,2]ï¼Œæ€ä¹ˆåŠï¼Ÿ
æ ‡å‡†å›ç­”ï¼šæ’åºåå˜æˆ [1,1,2,2]ï¼Œä¸€åˆ‡æ­£å¸¸
åŠ åˆ†å›ç­”ï¼šæ’åºä¿è¯äº†ç›¸åŒå…ƒç´ èšé›†ï¼Œä½¿ `nums[i] == nums[i-1]` æˆç«‹ â†’ æ’åºæ˜¯å»é‡çš„å¿…è¦æ¡ä»¶ã€‚â†’ ğŸš€

Q7ï¼šèƒ½ä¸èƒ½æ”¹æˆ `i > 0 && nums[i] == nums[i-1] && used[i-1]`ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šä¼šæ¼è§£ï¼æ¯”å¦‚ [1,1,2] ä¸­ï¼Œé€‰ç¬¬ä¸€ä¸ª 1 åï¼Œç¬¬äºŒä¸ª 1 è¢« `used[i-1]==true` é™åˆ¶ï¼Œä½† `[1,2,1]` éœ€è¦ç¬¬äºŒä¸ª 1 åœ¨åé¢å‡ºç°
åŠ åˆ†å›ç­”ï¼šè‹¥ç”¨ `used[i-1]`ï¼Œä¼šé”™è¯¯åœ°è®¤ä¸ºâ€œå‰é¢çš„ç”¨äº†å°±ä¸èƒ½å†ç”¨â€ï¼Œä½†æ’åˆ—ä¸­ç›¸åŒå€¼å¯ä»¥åœ¨ä¸åŒå±‚å‡ºç°ã€‚æˆ‘ä»¬è¦é™åˆ¶çš„æ˜¯åŒå±‚é‡å¤é€‰ï¼Œä¸æ˜¯å…¨å±€é‡å¤é€‰ã€‚â†’ ğŸ’¡

Q8ï¼šè¿™ä¸ªç®—æ³•èƒ½ç”¨äºå­—ç¬¦ä¸²æ’åˆ—å—ï¼Ÿ
æ ‡å‡†å›ç­”ï¼šå®Œå…¨å¯ä»¥ã€‚å°†å­—ç¬¦ä¸²è½¬ä¸ºå­—ç¬¦æ•°ç»„ï¼Œæ’åºï¼Œå†ç”¨ç›¸åŒé€»è¾‘
åŠ åˆ†å›ç­”ï¼šè¿™æ˜¯æ ‡å‡†çš„å­—ç¬¦ä¸²å»é‡æ’åˆ—æ¨¡æ¿ï¼Œå¦‚ LeetCode 47 çš„å­—ç¬¦ä¸²ç‰ˆæœ¬ã€‚â†’ ğŸ‰

## Step 9: å¤ä¹ è¦ç‚¹æç‚¼

ğŸŒŸ è®°å¿†é”šç‚¹ï¼š

- â€œæ’åˆ—å»é‡ä¸‰ä»¶å¥—ï¼šæ’åº + used + !used[i-1]â€
- â€œåŒå±‚å»é‡ï¼šåœ¨åŒä¸€ä¸ªæ·±åº¦ï¼Œç›¸åŒå€¼åªé€‰ç¬¬ä¸€ä¸ªâ€
- â€œused æ•°ç»„æ˜¯æ’åˆ—çš„æ ‡é…â€
- â€œä¸èƒ½ç”¨ setï¼ä¸èƒ½ç”¨ setï¼ä¸èƒ½ç”¨ setï¼â€
- â€œ!used[i-1] = å‰ä¸€ä¸ªæ²¡é€‰ï¼Œæˆ‘å°±ä¸èƒ½é€‰â€

âš ï¸ æ˜“é”™é™·é˜±ï¼š

- è¯¯å†™ `used[i-1]` â†’ ä¼šæ¼è§£ï¼Œå¦‚ `[1,2,1]` ç”Ÿæˆä¸äº†
- è¯¯ä¸æ’åº â†’ å»é‡å¤±æ•ˆï¼Œç”Ÿæˆé‡å¤æ’åˆ—
- è¯¯ç”¨ index æ§åˆ¶ â†’ å˜æˆç»„åˆï¼Œæ’åˆ—é¡ºåºé”™ä¹±
- è¯¯è®¤ä¸ºâ€œåªè¦å€¼ä¸åŒå°±ä¸ç”¨å»é‡â€ â†’ å¿˜è®°ç›¸åŒå€¼å¯èƒ½åœ¨ä¸åŒä½ç½®
- è¯¯åœ¨é€’å½’ä¸­ä¼  path åš hash å»é‡ â†’ é¢è¯•å®˜ç›´æ¥åˆ¤ä½ ä¸ä¼šç®—æ³•

âœ… é«˜åˆ†è¯ï¼ˆé¢è¯•å®˜å¬åˆ°å³åŠ åˆ†ï¼‰ï¼š

- â€œå›æº¯ç®—æ³•â€
- â€œåŒå±‚å»é‡â€
- â€œused æ•°ç»„â€
- â€œæ’åºæ˜¯å‰æâ€
- â€œæ„é€ æ€§å»é‡â€
- â€œé¿å…ç”Ÿæˆå†—ä½™è·¯å¾„â€
- â€œå¤šé‡é›†åˆæ’åˆ—â€

ğŸ’¡ è¿ç§»ç‚¹ï¼š

- æœ¬é¢˜ = LeetCode 46ï¼ˆåŠ å»é‡ï¼‰
- æœ¬é¢˜ = LeetCode 90ï¼ˆå­é›† IIï¼‰
- æœ¬é¢˜ = LeetCode 40ï¼ˆç»„åˆæ€»å’Œ IIï¼‰
- æœ¬é¢˜ = æ‰€æœ‰â€œå¸¦é‡å¤å…ƒç´ çš„æ’åˆ—/ç»„åˆ/å­é›†â€é—®é¢˜

ğŸ‰ æŒæ¡æˆå°±ï¼š
ä½ ç°åœ¨å·²æŒæ¡â€œå¸¦é‡å¤å…ƒç´ çš„æ’åˆ—å»é‡â€è¿™ä¸€é«˜çº§æ€ç»´èƒ½åŠ›ï¼Œèƒ½ç§’æ€ 3 é“ä»¥ä¸Šæ’åˆ—ç±»é¢˜ç›®ï¼è¿™ä¸ä»…æ˜¯è§£æ³•ï¼Œæ›´æ˜¯ä¸€ç§åœ¨æ•°å­¦ç»“æ„ä¸Šæ„é€ å”¯ä¸€è§£çš„å·¥ç¨‹æ€ç»´ï¼Œæ ‡å¿—ç€ä½ ä»â€œå†™é€’å½’â€è¿›é˜¶åˆ°â€œè®¾è®¡å»é‡ç®—æ³•â€

ğŸ“š çŸ¥è¯†å›¾è°±ï¼š

```
[å…¨æ’åˆ— II]
  â”‚
  â”œâ”€â†’ [å›æº¯æ¨¡æ¿]
  â”‚    â”œâ”€â†’ æ’åºï¼šä½¿ç›¸åŒå…ƒç´ ç›¸é‚»
  â”‚    â”œâ”€â†’ used æ•°ç»„ï¼šæ ‡è®°æ¯ä¸ªä½ç½®æ˜¯å¦è¢«ä½¿ç”¨
  â”‚    â”œâ”€â†’ å‰ªæï¼ši > 0 && nums[i] == nums[i-1] && !used[i-1] â†’ åŒå±‚å»é‡
  â”‚    â”œâ”€â†’ é€‰æ‹©ï¼šfor i from 0 to n-1
  â”‚    â”œâ”€â†’ é€’å½’ï¼šbacktrack()
  â”‚    â””â”€â†’ æ’¤é”€ï¼šused[i]=false, path.pop()
  â”‚
  â”œâ”€â†’ [çº¦æŸæ¡ä»¶]
  â”‚    â”œâ”€â†’ æ¯ä¸ªä½ç½®é€‰ä¸€ä¸ªæ•°å­—
  â”‚    â”œâ”€â†’ æ•°å­—ä¸èƒ½é‡å¤ä½¿ç”¨ï¼ˆä½ç½®å”¯ä¸€ï¼‰
  â”‚    â””â”€â†’ ç›¸åŒæ•°å­—åœ¨åŒå±‚åªèƒ½é€‰ä¸€æ¬¡
  â”‚
  â”œâ”€â†’ [ç»ˆæ­¢æ¡ä»¶]
  â”‚    â””â”€â†’ len(path) == n
  â”‚
  â””â”€â†’ [æ—¶é—´å¤æ‚åº¦]
       â””â”€â†’ O(n! / âˆfáµ¢!)ï¼Œè¿œå°äº n!
```

> âœ… æ¯æ—¥ä¸€ç»ƒï¼šé»˜å†™ä¸‰è¡Œå‰ªææ¡ä»¶ + è§£é‡Š !used[i-1] çš„å«ä¹‰ + è¯´å‡º 3 ä¸ªç±»ä¼¼é¢˜ç›®
> ğŸš€ ä½ å·²æŒæ¡â€œæ’åˆ—å»é‡â€èƒ½åŠ›ï¼Œä¸‹ä¸€é¢˜ï¼Œç»§ç»­å¾æœï¼ğŸ¤—
