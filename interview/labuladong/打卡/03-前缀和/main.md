# 前缀和

## 一维数组

核心思路是我们 new 一个新的数组 preSum 出来，preSum[i] 记录 nums[0..i-1] 的累加和。看这个 preSum 数组，如果我想求索引区间 [1, 4] 内的所有元素之和，就可以通过 preSum[5] - preSum[1] 得出。这样，sumRange 函数仅仅需要做一次减法运算，避免了每次进行 for 循环调用，最坏时间复杂度为常数 O(1)

这个技巧在生活中运用也挺广泛的，比方说，你们班上有若干同学，每个同学有一个期末考试的成绩（满分 100 分），那么请你实现一个 API，输入任意一个分数段，返回有多少同学的成绩在这个分数段内。那么，你可以先通过计数排序的方式计算每个分数具体有多少个同学，然后利用前缀和技巧来实现分数段查询

## 二维矩阵

我们可以维护一个二维 preSum 数组，专门记录以原点为顶点的矩阵的元素之和，就可以用几次加减运算算出任何一个子矩阵的元素和

![](https://raw.githubusercontent.com/UlricYang/FigureBed/main/img/20251112131605280.jpeg)

## 局限性

- 使用前缀和技巧的前提是原数组 nums 不会发生变化

- 前缀和技巧只适用于存在逆运算的场景

想要同时解决这两个问题，就需要更高级的数据结构，最通用的解决方案是线段树
